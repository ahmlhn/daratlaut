import{E as Mt,o as Et,c as r,a as A,u as Wt,h as Ft,m as Kt,b as t,j as l,d as L,t as o,e as x,F as T,s as P,n as W,f as d,v as u,i as yt,x as ot,w as Jt,y as Z,r as c,G as U}from"./app-DL_lWBci.js";import{_ as Ht}from"./AdminLayout-BIk4ezIf.js";import zt from"./SystemUpdatePanel-DOec1mCS.js";import F from"./SettingsNavIcon-DmRiv8kP.js";import"./LoadingSpinner-CpLpxhUj.js";const qt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-10 pb-16"},Qt={class:"relative overflow-hidden rounded-3xl border border-gray-200/60 dark:border-white/10 bg-white dark:bg-dark-900 shadow-sm"},Zt={class:"relative p-7 sm:p-10"},Xt={class:"flex flex-col gap-5 sm:flex-row sm:items-start sm:justify-between"},Yt={class:"min-w-0"},te={key:0,class:"mt-3 text-xs text-gray-500 dark:text-gray-500"},ee={class:"font-semibold"},ae={class:"flex items-center gap-2 shrink-0"},se=["disabled"],re={key:0,class:"card p-0 overflow-hidden rounded-2xl"},le={key:1,class:"space-y-6 lg:space-y-8"},oe={class:"card p-0 overflow-hidden rounded-2xl"},ne={class:"px-5 py-4 sm:px-7 sm:py-5 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},de={class:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between"},ie={class:"flex gap-2 overflow-x-auto custom-scrollbar"},ue={class:"shrink-0 inline-flex gap-1 p-1 rounded-2xl bg-gray-100/70 dark:bg-white/5 border border-gray-200/70 dark:border-white/10"},pe=["onClick"],ge={class:"relative w-full lg:w-[340px]"},xe={key:0,class:"absolute z-30 mt-2 w-full rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 shadow-xl overflow-hidden"},ce={key:0,class:"p-4 text-sm text-gray-500 dark:text-gray-400"},be={key:1,class:"max-h-72 overflow-auto custom-scrollbar p-2"},me=["onClick"],ye={class:"flex-1"},ke={class:"text-[10px] font-black tracking-widest text-gray-400 dark:text-gray-500 uppercase"},fe={class:"mt-3 flex flex-wrap gap-2"},ve=["onClick"],we={class:"whitespace-nowrap"},_e={class:"min-w-0 space-y-6 lg:space-y-8"},he={key:0,class:"card p-0 overflow-hidden rounded-2xl"},Te={class:"px-6 py-6 sm:px-8"},Ce={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5"},Se={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},Pe={class:"flex items-center justify-between gap-3"},Ue={class:"flex items-center gap-3 min-w-0"},Ve={class:"h-10 w-10 rounded-2xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center shrink-0"},Ae={class:"min-w-0"},Oe={class:"mt-0.5 text-xs text-gray-500 dark:text-gray-400 truncate"},$e={class:"font-semibold"},je={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},Le={class:"flex items-center justify-between gap-3"},Ge={class:"flex items-center gap-3 min-w-0"},Ne={class:"h-10 w-10 rounded-2xl bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center shrink-0"},De={class:"min-w-0"},Re={class:"mt-0.5 text-xs text-gray-500 dark:text-gray-400 truncate"},Be={class:"font-semibold"},Ie={key:1,class:"card p-0 overflow-hidden rounded-2xl"},Me={class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},Ee={class:"flex items-center gap-2 cursor-pointer select-none"},We={class:"text-xs font-semibold text-gray-500 dark:text-gray-400"},Fe={class:"px-6 py-6 sm:px-8 space-y-6"},Ke={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},Je={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden bg-gray-50/60 dark:bg-dark-900/30"},He={class:"p-5 space-y-4 bg-white dark:bg-dark-950 border-t border-gray-200/70 dark:border-white/10"},ze={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},qe=["disabled"],Qe=["disabled"],Ze=["disabled"],Xe={key:2,class:"card p-0 overflow-hidden rounded-2xl"},Ye={class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},ta={class:"flex items-center gap-2 cursor-pointer select-none"},ea={class:"text-xs font-semibold text-gray-500 dark:text-gray-400"},aa={class:"px-6 py-6 sm:px-8 space-y-6"},sa={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},ra={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},la=["disabled"],oa=["disabled"],na=["disabled"],da={key:3,class:"card p-0 overflow-hidden rounded-2xl"},ia={class:"px-6 py-6 sm:px-8 space-y-6"},ua={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},pa={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},ga=["disabled"],xa=["disabled"],ca={key:4,class:"card p-0 overflow-hidden rounded-2xl"},ba={class:"px-6 py-6 sm:px-8 space-y-4"},ma={class:"flex items-start justify-between gap-3"},ya={class:"min-w-0"},ka={class:"font-bold text-gray-900 dark:text-white"},fa={class:"mt-2 text-sm text-gray-600 dark:text-gray-400 whitespace-pre-line"},va={class:"mt-4 flex gap-3"},wa=["onClick"],_a=["onClick"],ha={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},Ta={key:5,class:"card p-0 overflow-hidden rounded-2xl"},Ca={class:"px-6 py-6 sm:px-8 space-y-6"},Sa={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},Pa={class:"flex flex-col lg:flex-row gap-4 items-end"},Ua={class:"flex-1 w-full"},Va={class:"w-full lg:w-1/4"},Aa={class:"w-full lg:w-1/3"},Oa={class:"flex gap-2"},$a={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden"},ja={class:"max-h-72 overflow-y-auto"},La={class:"w-full text-left"},Ga={class:"text-sm divide-y divide-gray-200 dark:divide-white/10 bg-white dark:bg-dark-950"},Na={class:"px-4 py-3 text-gray-900 dark:text-white"},Da={class:"px-4 py-3 text-gray-500 dark:text-gray-400"},Ra={class:"px-4 py-3 text-gray-500 dark:text-gray-400 font-mono text-xs"},Ba={class:"px-4 py-3 text-right space-x-3"},Ia=["onClick"],Ma=["onClick"],Ea={key:0},Wa={key:6,class:"card p-0 overflow-hidden rounded-2xl"},Fa={class:"px-6 py-6 sm:px-8 space-y-6"},Ka={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},Ja={class:"flex flex-col lg:flex-row gap-4 items-end"},Ha={class:"flex-1 w-full"},za={class:"flex-1 w-full"},qa={class:"flex gap-2"},Qa={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden"},Za={class:"max-h-72 overflow-y-auto"},Xa={class:"w-full text-left"},Ya={class:"text-sm divide-y divide-gray-200 dark:divide-white/10 bg-white dark:bg-dark-950"},ts={class:"px-4 py-3 text-gray-900 dark:text-white"},es={class:"px-4 py-3 text-gray-500 dark:text-gray-400 font-mono text-xs"},as={class:"px-4 py-3 text-right space-x-3"},ss=["onClick"],rs=["onClick"],ls={key:0},os={key:7,class:"card p-0 overflow-hidden rounded-2xl"},ns={class:"px-6 py-6 sm:px-8 space-y-6"},ds={class:"grid grid-cols-1 lg:grid-cols-2 gap-5"},is={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},us={key:0,class:"space-y-2"},ps=["onUpdate:modelValue","placeholder"],gs=["onClick"],xs={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},cs={class:"pt-2"},bs=["disabled"],ms={key:8,class:"card p-0 overflow-hidden rounded-2xl"},ys={class:"px-6 py-6 sm:px-8 space-y-4"},ks={class:"flex flex-col sm:flex-row gap-2"},fs=["value"],vs={key:9,class:"space-y-6"},ws={class:"card p-0 overflow-hidden rounded-2xl"},_s={class:"px-6 py-6 sm:px-8 space-y-6"},hs={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Ts={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},Cs={class:"text-3xl font-black text-gray-900 dark:text-white"},Ss={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},Ps={class:"text-3xl font-black text-emerald-600 dark:text-emerald-300"},Us={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},Vs={class:"text-3xl font-black text-red-600 dark:text-red-300"},As={class:"flex flex-col sm:flex-row sm:items-end gap-3"},Os={class:"flex flex-wrap gap-2"},$s={class:"card p-0 overflow-hidden rounded-2xl"},js={class:"px-6 py-4 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-gray-50/80 dark:bg-dark-900/40 backdrop-blur flex items-center justify-between gap-4"},Ls={class:"text-xs text-gray-500 dark:text-gray-400"},Gs={class:"overflow-x-auto max-h-96"},Ns={class:"min-w-full divide-y divide-gray-200 dark:divide-white/10"},Ds={class:"bg-white dark:bg-dark-950 divide-y divide-gray-200 dark:divide-white/10"},Rs={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap"},Bs={class:"px-4 py-3 text-xs text-gray-900 dark:text-gray-200"},Is={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400"},Ms={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 max-w-[260px] truncate"},Es={class:"px-4 py-3"},Ws={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 max-w-[260px] truncate"},Fs={key:0},Ks={key:10,class:"card p-0 overflow-hidden rounded-2xl"},Js={class:"px-6 py-6 sm:px-8"},Hs={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},zs={class:"flex items-center justify-center min-h-screen pt-4 px-4"},qs={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},Qs={class:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center"},Zs={class:"text-lg font-medium text-gray-900 dark:text-white"},Xs=["disabled"],Ys={key:0,class:"bg-blue-50 dark:bg-gray-900 p-3 rounded-lg border dark:border-gray-700"},tr={class:"flex flex-wrap gap-1"},er=["onClick"],ar={class:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700"},sr="/api/v1/settings",ur={__name:"Index",setup(rr){const X=c(!0),K=c(!1),m=c(!1),y=c(""),Y=c(null),N=c(""),O=c({wa:{},tg:{}}),i=U({base_url:"",group_url:"",token:"",sender_number:"",target_number:"",group_id:"",recap_group_id:"",is_active:0,failover_mode:"manual"}),p=U({base_url:"",token:"",sender_number:"",target_number:"",group_id:"",footer:"",is_active:0}),V=U({bot_token:"",chat_id:""}),D=c([]),h=U({code:"",message:""}),J=c(null),$=c(!1),tt=c([]),R=c([]),C=U({id:0,pop_name:"",wa_number:"",group_id:""}),H=c(!1),B=c([]),j=U({id:0,name:"",group_id:""}),z=c(!1),v=U({teknisi_fee_install:0,sales_fee_install:0,expense_categories:[]}),et=c(""),q=c([]),Q=c({total:0,sent:0,failed:0}),w=U({search:"",status:"",range:""}),k=c("status"),nt=[{id:"status",name:"Gateway Status",icon:"wifi"},{id:"wa",name:"WhatsApp",icon:"chat"},{id:"mpwa",name:"WA Backup (MPWA)",icon:"bolt"},{id:"tg",name:"Telegram",icon:"paper-airplane"},{id:"templates",name:"Template Pesan",icon:"document-text"},{id:"pops",name:"Manajemen POP",icon:"map-pin"},{id:"recap_groups",name:"Group Rekap",icon:"user-group"},{id:"fee",name:"Fee Teknisi",icon:"cash"},{id:"public_url",name:"Link Isolir",icon:"link"},{id:"logs",name:"Log Notifikasi",icon:"clock"},{id:"system_update",name:"Update Sistem",icon:"refresh"}],G=[{id:"gateway",title:"Gateway",items:["status","wa","mpwa","tg"]},{id:"pesan",title:"Pesan",items:["templates","logs"]},{id:"operasional",title:"Operasional",items:["pops","recap_groups","fee"]},{id:"system",title:"System",items:["public_url","system_update"]}],kt=Z(()=>Object.fromEntries(nt.map(s=>[s.id,s]))),at=Z(()=>{const s={};for(const e of G)for(const f of e.items)s[f]=e.id;return s}),st=U({gateway:"status",pesan:"templates",operasional:"pops",system:"public_url"}),I=c("gateway");function dt(s){if(!s)return;k.value=s;const e=at.value[s];e&&(I.value=e,st[e]=s)}function ft(s){var n;I.value=s;const e=G.find(_=>_.id===s),f=st[s]||((n=e==null?void 0:e.items)==null?void 0:n[0]);f&&(k.value=f)}Mt(()=>k.value,s=>{const e=at.value[s];e&&(I.value=e,st[e]=s)},{immediate:!0});const vt=Z(()=>{const s=G.find(f=>f.id===I.value)||G[0],e=kt.value;return((s==null?void 0:s.items)||[]).map(f=>e[f]).filter(Boolean)}),it=Z(()=>{const s=N.value.trim().toLowerCase();return s?nt.filter(e=>e.name.toLowerCase().includes(s)):[]});async function g(s,e={}){return(await fetch(`${sr}${s}`,{headers:{Accept:"application/json","Content-Type":"application/json",...e.headers},...e})).json()}async function ut(s={}){var f;const e=!!s.refresh;e?K.value=!0:X.value=!0;try{const n=await g("");if(n.gateway_status&&(O.value=n.gateway_status),n.wa_config&&Object.assign(i,{base_url:n.wa_config.base_url||"",group_url:n.wa_config.group_url||"",token:n.wa_config.token||"",sender_number:n.wa_config.sender_number||"",target_number:n.wa_config.target_number||"",group_id:n.wa_config.group_id||"",recap_group_id:n.wa_config.recap_group_id||"",is_active:n.wa_config.is_active?1:0}),n.wa_failover_mode&&(i.failover_mode=n.wa_failover_mode),(f=n.wa_gateways)!=null&&f.backup){const _=n.wa_gateways.backup,M=_.extra||{};Object.assign(p,{base_url:_.base_url||"",token:_.token||"",sender_number:_.sender_number||"",target_number:M.target_number||"",group_id:_.group_id||"",footer:M.footer||"",is_active:_.is_active?1:0})}n.tg_config&&(V.bot_token=n.tg_config.bot_token||"",V.chat_id=n.tg_config.chat_id||""),D.value=n.templates||[],R.value=n.pops||[],B.value=n.recap_groups||[],n.fee_settings&&Object.assign(v,n.fee_settings),et.value=n.public_url||""}catch(n){console.error("Load settings error:",n)}finally{e?K.value=!1:X.value=!1,Y.value=new Date}S(),wt()}async function S(){const s=new URLSearchParams;w.search&&s.set("search",w.search),w.status&&s.set("status",w.status),w.range&&s.set("range",w.range);const e=await g(`/notif-logs?${s}`);q.value=e.data||[],e.stats&&(Q.value=e.stats)}async function wt(){const s=await g("/install-variables");tt.value=s.data||[]}async function _t(){m.value=!0;try{await g("/wa",{method:"POST",body:JSON.stringify(i)}),alert("WhatsApp config tersimpan!")}catch{alert("Gagal menyimpan")}finally{m.value=!1}}async function ht(){m.value=!0;try{await g("/wa-backup",{method:"POST",body:JSON.stringify({...p,failover_mode:i.failover_mode})}),alert("MPWA config tersimpan!")}catch{alert("Gagal menyimpan")}finally{m.value=!1}}async function Tt(){m.value=!0;try{await g("/tg",{method:"POST",body:JSON.stringify(V)}),alert("Telegram config tersimpan!")}catch{alert("Gagal menyimpan")}finally{m.value=!1}}async function pt(s=!1){y.value=s?"wa_group":"wa_personal";try{const e=await g("/test-wa",{method:"POST",body:JSON.stringify({url:i.base_url,token:i.token,sender:i.sender_number,target:s?i.group_id:i.target_number,is_group:s})});alert(e.status==="success"?"Berhasil!":`Gagal: ${e.message}`),S()}catch(e){alert("Error: "+e.message)}finally{y.value=""}}async function gt(s=!1){y.value=s?"mpwa_group":"mpwa_personal";try{const e=await g("/test-mpwa",{method:"POST",body:JSON.stringify({url:p.base_url,token:p.token,sender:p.sender_number,target:s?p.group_id:p.target_number,footer:p.footer,is_group:s})});alert(e.status==="success"?"Berhasil!":`Gagal: ${e.message}`),S()}catch(e){alert("Error: "+e.message)}finally{y.value=""}}async function Ct(){y.value="tg";try{const s=await g("/test-tg",{method:"POST",body:JSON.stringify(V)});alert(s.status==="success"?"Berhasil!":`Gagal: ${s.message}`),S()}catch(s){alert("Error: "+s.message)}finally{y.value=""}}function St(s){h.code=s.code,h.message=s.message,J.value=s.code,$.value=!0}function Pt(){h.code="",h.message="",J.value=null,$.value=!0}async function Ut(){await g("/templates",{method:"POST",body:JSON.stringify(h)}),$.value=!1;const s=await g("/templates");D.value=s.data||[]}async function Vt(s){if(!confirm(`Hapus template "${s.code}"?`))return;await g(`/templates/${s.id}`,{method:"DELETE"});const e=await g("/templates");D.value=e.data||[]}function At(s){h.message+=`{${s}}`}function Ot(s){Object.assign(C,{id:s.id,pop_name:s.pop_name,wa_number:s.wa_number||"",group_id:s.group_id||""}),H.value=!0}function xt(){Object.assign(C,{id:0,pop_name:"",wa_number:"",group_id:""}),H.value=!1}async function $t(){const s=await g("/pops",{method:"POST",body:JSON.stringify(C)});if(s.status==="error"){alert(s.message);return}xt();const e=await g("/pops");R.value=e.data||[]}async function jt(s){if(!confirm(`Hapus POP "${s.pop_name}"?`))return;await g(`/pops/${s.id}`,{method:"DELETE"});const e=await g("/pops");R.value=e.data||[]}function Lt(s){Object.assign(j,{id:s.id,name:s.name,group_id:s.group_id}),z.value=!0}function ct(){Object.assign(j,{id:0,name:"",group_id:""}),z.value=!1}async function Gt(){const s=await g("/recap-groups",{method:"POST",body:JSON.stringify(j)});if(s.status==="error"){alert(s.message);return}ct();const e=await g("/recap-groups");B.value=e.data||[]}async function Nt(s){if(!confirm(`Hapus group "${s.name}"?`))return;await g(`/recap-groups/${s.id}`,{method:"DELETE"});const e=await g("/recap-groups");B.value=e.data||[]}function Dt(){v.expense_categories.push("")}function Rt(s){v.expense_categories.splice(s,1)}async function Bt(){m.value=!0;try{await g("/fee-settings",{method:"POST",body:JSON.stringify(v)}),alert("Fee settings tersimpan!")}catch{alert("Gagal")}finally{m.value=!1}}function It(){navigator.clipboard.writeText(et.value),alert("URL disalin!")}function rt(s){return s?new Date(s).toLocaleString("id-ID"):"-"}function lt(s){return s=(s||"").toLowerCase(),["success","sent","ok"].includes(s)?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-400":["failed","error","fail"].includes(s)?"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-300"}return Et(ut),(s,e)=>(l(),r(T,null,[A(Wt(Ft),{title:"Pengaturan"}),A(Ht,null,{default:Kt(()=>{var f,n,_,M,bt,mt;return[t("div",qt,[t("div",Qt,[e[42]||(e[42]=t("div",{class:"pointer-events-none absolute inset-0"},[t("div",{class:"absolute -top-24 -right-24 h-72 w-72 rounded-full bg-gradient-to-br from-primary-500/25 to-primary-700/10 blur-3xl"}),t("div",{class:"absolute -bottom-24 -left-24 h-72 w-72 rounded-full bg-gradient-to-br from-emerald-500/10 to-cyan-500/10 blur-3xl"})],-1)),t("div",Zt,[t("div",Xt,[t("div",Yt,[e[40]||(e[40]=t("h1",{class:"text-3xl sm:text-4xl font-black tracking-tight text-gray-900 dark:text-white"},"Pengaturan",-1)),e[41]||(e[41]=t("p",{class:"mt-2 text-sm sm:text-base text-gray-600 dark:text-gray-400 max-w-2xl"}," Konfigurasi gateway, notifikasi, template, POP, dan fee teknisi. ",-1)),Y.value?(l(),r("p",te,[e[39]||(e[39]=L(" Terakhir refresh: ",-1)),t("span",ee,o(Y.value.toLocaleString("id-ID")),1)])):x("",!0)]),t("div",ae,[t("button",{onClick:e[0]||(e[0]=a=>ut({refresh:!0})),disabled:K.value,class:"btn btn-secondary btn-press gap-2"},[A(F,{name:"refresh",className:"h-4 w-4"}),t("span",null,o(K.value?"Refreshing...":"Refresh"),1)],8,se)])])])]),X.value?(l(),r("div",re,[...e[43]||(e[43]=[t("div",{class:"p-10 flex items-center justify-center gap-3"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t("span",{class:"text-gray-600 dark:text-gray-300 text-sm"},"Memuat data...")],-1)])])):(l(),r("div",le,[t("div",oe,[t("div",ne,[t("div",de,[t("div",ie,[t("div",ue,[(l(),r(T,null,P(G,a=>t("button",{key:a.id,type:"button",onClick:b=>ft(a.id),class:W(["px-3.5 py-2 rounded-xl text-xs sm:text-sm font-black tracking-tight transition whitespace-nowrap",I.value===a.id?"bg-primary-600 text-white shadow-sm shadow-primary-500/20":"text-gray-700 dark:text-gray-200 hover:bg-white/80 dark:hover:bg-white/10"])},o(a.title),11,pe)),64))])]),t("div",ge,[d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>N.value=a),type:"text",class:"input !rounded-xl",placeholder:"Cari pengaturan..."},null,512),[[u,N.value]]),N.value.trim()?(l(),r("div",xe,[it.value.length===0?(l(),r("div",ce," Menu tidak ditemukan. ")):(l(),r("div",be,[(l(!0),r(T,null,P(it.value,a=>{var b;return l(),r("button",{key:a.id,type:"button",onClick:E=>{dt(a.id),N.value=""},class:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-left text-sm font-semibold text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-white/5 transition"},[A(F,{name:a.icon,className:"h-4 w-4 text-gray-400 dark:text-gray-500"},null,8,["name"]),t("span",ye,o(a.name),1),t("span",ke,o(((b=G.find(E=>E.id===at.value[a.id]))==null?void 0:b.title)||""),1)],8,me)}),128))]))])):x("",!0)])]),t("div",fe,[(l(!0),r(T,null,P(vt.value,a=>(l(),r("button",{key:a.id,type:"button",onClick:b=>dt(a.id),class:W(["inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs sm:text-sm font-semibold transition border",k.value===a.id?"bg-primary-600 text-white border-primary-600 shadow-sm shadow-primary-500/20":"bg-white dark:bg-dark-900 text-gray-700 dark:text-gray-200 border-gray-200/70 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/5"])},[A(F,{name:a.icon,className:k.value===a.id?"h-4 w-4 text-white":"h-4 w-4 text-gray-400 dark:text-gray-500"},null,8,["name","className"]),t("span",we,o(a.name),1)],10,ve))),128))])])]),t("div",_e,[k.value==="status"?(l(),r("div",he,[e[48]||(e[48]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Gateway Status"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Ringkasan kondisi & aktivitas terakhir")],-1)),t("div",Te,[t("div",Ce,[t("div",Se,[t("div",Pe,[t("div",Ue,[t("div",Ve,[A(F,{name:"chat",className:"h-5 w-5 text-emerald-700 dark:text-emerald-300"})]),t("div",Ae,[e[45]||(e[45]=t("div",{class:"text-sm font-bold text-gray-900 dark:text-white"},"WhatsApp",-1)),t("div",Oe,[e[44]||(e[44]=L(" Last Log: ",-1)),t("span",$e,o(rt((f=O.value.wa)==null?void 0:f.last_time)),1)])])]),t("span",{class:W([lt((n=O.value.wa)==null?void 0:n.last_status),"px-2 py-0.5 rounded-md text-xs font-bold uppercase whitespace-nowrap"])},o(((_=O.value.wa)==null?void 0:_.last_status)||"-"),3)])]),t("div",je,[t("div",Le,[t("div",Ge,[t("div",Ne,[A(F,{name:"paper-airplane",className:"h-5 w-5 text-blue-700 dark:text-blue-300"})]),t("div",De,[e[47]||(e[47]=t("div",{class:"text-sm font-bold text-gray-900 dark:text-white"},"Telegram",-1)),t("div",Re,[e[46]||(e[46]=L(" Last Log: ",-1)),t("span",Be,o(rt((M=O.value.tg)==null?void 0:M.last_time)),1)])])]),t("span",{class:W([lt((bt=O.value.tg)==null?void 0:bt.last_status),"px-2 py-0.5 rounded-md text-xs font-bold uppercase whitespace-nowrap"])},o(((mt=O.value.tg)==null?void 0:mt.last_status)||"-"),3)])])])])])):x("",!0),k.value==="wa"?(l(),r("div",Ie,[t("div",Me,[e[49]||(e[49]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"WhatsApp (Gateway Utama)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Gateway utama untuk notifikasi personal dan group.")],-1)),t("label",Ee,[t("span",We,o(i.is_active?"Aktif":"Non-aktif"),1),d(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>i.is_active=a),"true-value":1,"false-value":0,class:"h-5 w-5 rounded-md text-primary-600 dark:bg-gray-700"},null,512),[[yt,i.is_active]])])]),t("div",Fe,[t("div",Ke,[t("div",null,[e[50]||(e[50]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL Pesan Personal",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.base_url=a),type:"url",class:"input w-full",placeholder:"https://api.balesotomatis.id/v1/send-message"},null,512),[[u,i.base_url]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"API Token",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.token=a),type:"text",class:"input w-full",placeholder:"Token..."},null,512),[[u,i.token]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Device Key (Sender)",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>i.sender_number=a),type:"text",class:"input w-full",placeholder:"Device Key..."},null,512),[[u,i.sender_number]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Target Tes",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.target_number=a),type:"text",class:"input w-full",placeholder:"08xxx"},null,512),[[u,i.target_number]])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Mode Failover",-1)),d(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>i.failover_mode=a),class:"input w-full"},[...e[54]||(e[54]=[t("option",{value:"manual"},"Manual (tetap gateway aktif)",-1),t("option",{value:"auto"},"Auto (pindah ke backup jika gagal)",-1)])],512),[[ot,i.failover_mode]]),e[56]||(e[56]=t("p",{class:"text-xs text-gray-400 mt-1"},"Manual: aktifkan hanya gateway yang ingin dipakai. Auto: gunakan backup bila primary gagal.",-1))])]),t("details",Je,[e[61]||(e[61]=t("summary",{class:"px-5 py-4 cursor-pointer text-sm font-bold text-gray-700 dark:text-gray-200 hover:bg-gray-100/80 dark:hover:bg-white/5"}," Pengaturan Group (Advanced) ",-1)),t("div",He,[t("div",null,[e[57]||(e[57]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL Pesan Group",-1)),d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>i.group_url=a),type:"url",class:"input w-full",placeholder:"https://api.balesotomatis.id/v1/send-group-message"},null,512),[[u,i.group_url]])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Default Group ID",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>i.group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[u,i.group_id]])]),t("div",null,[e[59]||(e[59]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group Laporan Rekap",-1)),d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>i.recap_group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[u,i.recap_group_id]]),e[60]||(e[60]=t("p",{class:"text-xs text-gray-400 mt-1"},"Grup khusus untuk laporan harian teknisi. Jika kosong, gunakan Default Group ID.",-1))])])]),t("div",ze,[t("button",{onClick:e[11]||(e[11]=a=>pt(!1)),disabled:y.value==="wa_personal",class:"btn btn-secondary"},o(y.value==="wa_personal"?"Sending...":"Tes Personal"),9,qe),t("button",{onClick:e[12]||(e[12]=a=>pt(!0)),disabled:y.value==="wa_group",class:"btn btn-secondary"},o(y.value==="wa_group"?"Sending...":"Tes Group"),9,Qe),t("button",{onClick:_t,disabled:m.value,class:"btn btn-primary ml-auto"},o(m.value?"Menyimpan...":"Simpan"),9,Ze)])])])):x("",!0),k.value==="mpwa"?(l(),r("div",Xe,[t("div",Ye,[e[62]||(e[62]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"WhatsApp Backup (MPWA)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Gateway cadangan untuk failover atau penggunaan manual.")],-1)),t("label",ta,[t("span",ea,o(p.is_active?"Aktif":"Non-aktif"),1),d(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=a=>p.is_active=a),"true-value":1,"false-value":0,class:"h-5 w-5 rounded-md text-orange-600 dark:bg-gray-700"},null,512),[[yt,p.is_active]])])]),t("div",aa,[t("div",sa,[t("div",null,[e[63]||(e[63]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL API",-1)),d(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>p.base_url=a),type:"url",class:"input w-full",placeholder:"https://app.mpwa.net/send-message"},null,512),[[u,p.base_url]])]),t("div",null,[e[64]||(e[64]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"API Key",-1)),d(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>p.token=a),type:"text",class:"input w-full"},null,512),[[u,p.token]])]),t("div",null,[e[65]||(e[65]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Sender",-1)),d(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>p.sender_number=a),type:"text",class:"input w-full",placeholder:"62888xxxx"},null,512),[[u,p.sender_number]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Target Tes",-1)),d(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>p.target_number=a),type:"text",class:"input w-full",placeholder:"62888xxxx atau xxx@g.us"},null,512),[[u,p.target_number]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Default Group ID",-1)),d(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>p.group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[u,p.group_id]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Footer (Opsional)",-1)),d(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>p.footer=a),type:"text",class:"input w-full",placeholder:"Sent via mpwa"},null,512),[[u,p.footer]])])]),t("div",ra,[t("button",{onClick:e[20]||(e[20]=a=>gt(!1)),disabled:y.value==="mpwa_personal",class:"btn btn-secondary"},o(y.value==="mpwa_personal"?"Sending...":"Tes Personal"),9,la),t("button",{onClick:e[21]||(e[21]=a=>gt(!0)),disabled:y.value==="mpwa_group",class:"btn btn-secondary"},o(y.value==="mpwa_group"?"Sending...":"Tes Group"),9,oa),t("button",{onClick:ht,disabled:m.value,class:"btn btn-primary ml-auto"},o(m.value?"Menyimpan...":"Simpan"),9,na)])])])):x("",!0),k.value==="tg"?(l(),r("div",da,[e[71]||(e[71]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Telegram Backup"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Backup notifikasi jika WhatsApp bermasalah.")],-1)),t("div",ia,[t("div",ua,[t("div",null,[e[69]||(e[69]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Bot Token",-1)),d(t("input",{"onUpdate:modelValue":e[22]||(e[22]=a=>V.bot_token=a),type:"text",class:"input w-full",placeholder:"123:ABC..."},null,512),[[u,V.bot_token]])]),t("div",null,[e[70]||(e[70]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Chat ID",-1)),d(t("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>V.chat_id=a),type:"text",class:"input w-full",placeholder:"-100xxx"},null,512),[[u,V.chat_id]])])]),t("div",pa,[t("button",{onClick:Ct,disabled:y.value==="tg",class:"btn btn-secondary"},o(y.value==="tg"?"Sending...":"Tes Kirim"),9,ga),t("button",{onClick:Tt,disabled:m.value,class:"btn btn-primary ml-auto"},o(m.value?"Menyimpan...":"Simpan"),9,xa)])])])):x("",!0),k.value==="templates"?(l(),r("div",ca,[t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},[e[72]||(e[72]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Template Pesan"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Kelola template notifikasi (WA/Telegram) yang dipakai sistem.")],-1)),t("button",{onClick:Pt,class:"btn btn-primary shrink-0"},"+ Tambah")]),t("div",ba,[(l(!0),r(T,null,P(D.value,a=>(l(),r("div",{key:a.id||a.code,class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},[t("div",ma,[t("div",ya,[t("h3",ka,o(a.code),1),t("p",fa,o(a.message),1)])]),t("div",va,[t("button",{onClick:b=>St(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,wa),t("button",{onClick:b=>Vt(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,_a)])]))),128)),D.value.length===0?(l(),r("div",ha,"Belum ada template")):x("",!0)])])):x("",!0),k.value==="pops"?(l(),r("div",Ta,[e[78]||(e[78]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Manajemen Data POP"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Pengaturan area & group notifikasi spesifik.")],-1)),t("div",Ca,[t("div",Sa,[t("div",Pa,[t("div",Ua,[e[73]||(e[73]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Nama POP / Area",-1)),d(t("input",{"onUpdate:modelValue":e[24]||(e[24]=a=>C.pop_name=a),type:"text",class:"input w-full",placeholder:"Contoh: Krui Selatan..."},null,512),[[u,C.pop_name]])]),t("div",Va,[e[74]||(e[74]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"WA Admin (PIC)",-1)),d(t("input",{"onUpdate:modelValue":e[25]||(e[25]=a=>C.wa_number=a),type:"text",class:"input w-full",placeholder:"08xxx..."},null,512),[[u,C.wa_number]])]),t("div",Aa,[e[75]||(e[75]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group ID (Notif)",-1)),d(t("input",{"onUpdate:modelValue":e[26]||(e[26]=a=>C.group_id=a),type:"text",class:"input w-full",placeholder:"xxxx@g.us"},null,512),[[u,C.group_id]])]),t("div",Oa,[H.value?(l(),r("button",{key:0,onClick:xt,class:"btn btn-secondary"},"Batal")):x("",!0),t("button",{onClick:$t,class:"btn btn-primary whitespace-nowrap"},o(H.value?"Update":"+ Tambah"),1)])])]),t("div",$a,[t("div",ja,[t("table",La,[e[77]||(e[77]=t("thead",{class:"bg-gray-50/80 dark:bg-dark-900/60 text-[11px] uppercase font-black tracking-widest text-gray-500 sticky top-0"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Nama Area"),t("th",{class:"px-4 py-3"},"PIC WA"),t("th",{class:"px-4 py-3"},"Group ID"),t("th",{class:"px-4 py-3 text-right"},"Aksi")])],-1)),t("tbody",Ga,[(l(!0),r(T,null,P(R.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",Na,o(a.pop_name),1),t("td",Da,o(a.wa_number||"-"),1),t("td",Ra,o(a.group_id||"-"),1),t("td",Ba,[t("button",{onClick:b=>Ot(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,Ia),t("button",{onClick:b=>jt(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,Ma)])]))),128)),R.value.length===0?(l(),r("tr",Ea,[...e[76]||(e[76]=[t("td",{colspan:"4",class:"px-4 py-10 text-center text-gray-500 dark:text-gray-400"},"Belum ada POP",-1)])])):x("",!0)])])])])])])):x("",!0),k.value==="recap_groups"?(l(),r("div",Wa,[e[83]||(e[83]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Manajemen Group Rekap"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Kelola grup WhatsApp untuk laporan teknisi.")],-1)),t("div",Fa,[t("div",Ka,[t("div",Ja,[t("div",Ha,[e[79]||(e[79]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Nama Group Rekap",-1)),d(t("input",{"onUpdate:modelValue":e[27]||(e[27]=a=>j.name=a),type:"text",class:"input w-full",placeholder:"Contoh: Rekap Jakarta..."},null,512),[[u,j.name]])]),t("div",za,[e[80]||(e[80]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group ID WhatsApp",-1)),d(t("input",{"onUpdate:modelValue":e[28]||(e[28]=a=>j.group_id=a),type:"text",class:"input w-full",placeholder:"xxxx@g.us"},null,512),[[u,j.group_id]])]),t("div",qa,[z.value?(l(),r("button",{key:0,onClick:ct,class:"btn btn-secondary"},"Batal")):x("",!0),t("button",{onClick:Gt,class:"btn btn-primary whitespace-nowrap"},o(z.value?"Update":"+ Tambah"),1)])])]),t("div",Qa,[t("div",Za,[t("table",Xa,[e[82]||(e[82]=t("thead",{class:"bg-gray-50/80 dark:bg-dark-900/60 text-[11px] uppercase font-black tracking-widest text-gray-500 sticky top-0"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Nama Group"),t("th",{class:"px-4 py-3"},"Group ID"),t("th",{class:"px-4 py-3 text-right"},"Aksi")])],-1)),t("tbody",Ya,[(l(!0),r(T,null,P(B.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",ts,o(a.name),1),t("td",es,o(a.group_id),1),t("td",as,[t("button",{onClick:b=>Lt(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,ss),t("button",{onClick:b=>Nt(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,rs)])]))),128)),B.value.length===0?(l(),r("tr",ls,[...e[81]||(e[81]=[t("td",{colspan:"3",class:"px-4 py-10 text-center text-gray-500 dark:text-gray-400"},"Belum ada group",-1)])])):x("",!0)])])])])])])):x("",!0),k.value==="fee"?(l(),r("div",os,[e[90]||(e[90]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Konfigurasi Fee Teknisi"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Atur fee instalasi dan kategori pengeluaran.")],-1)),t("div",ns,[t("div",ds,[t("div",null,[e[84]||(e[84]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Fee Instalasi - Teknisi (Rp)",-1)),d(t("input",{"onUpdate:modelValue":e[29]||(e[29]=a=>v.teknisi_fee_install=a),type:"number",min:"0",class:"input w-full",placeholder:"0"},null,512),[[u,v.teknisi_fee_install,void 0,{number:!0}]]),e[85]||(e[85]=t("p",{class:"text-xs text-gray-400 mt-1"},"Fee default untuk setiap teknisi per instalasi",-1))]),t("div",null,[e[86]||(e[86]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Fee Instalasi - Sales (Rp)",-1)),d(t("input",{"onUpdate:modelValue":e[30]||(e[30]=a=>v.sales_fee_install=a),type:"number",min:"0",class:"input w-full",placeholder:"0"},null,512),[[u,v.sales_fee_install,void 0,{number:!0}]]),e[87]||(e[87]=t("p",{class:"text-xs text-gray-400 mt-1"},"Fee default untuk setiap sales per instalasi",-1))])]),t("div",is,[t("div",{class:"flex items-center justify-between gap-3 mb-4"},[e[88]||(e[88]=t("div",null,[t("h5",{class:"text-sm font-black tracking-tight text-gray-900 dark:text-white"},"Kategori Pengeluaran"),t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Dipakai untuk input pengeluaran teknisi.")],-1)),t("button",{onClick:Dt,class:"btn btn-secondary shrink-0"},"+ Tambah")]),v.expense_categories.length>0?(l(),r("div",us,[(l(!0),r(T,null,P(v.expense_categories,(a,b)=>(l(),r("div",{key:b,class:"flex items-center gap-2"},[d(t("input",{"onUpdate:modelValue":E=>v.expense_categories[b]=E,type:"text",class:"input flex-1",placeholder:`Kategori ${b+1}`},null,8,ps),[[u,v.expense_categories[b]]]),t("button",{onClick:E=>Rt(b),class:"h-10 w-10 rounded-xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-900 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition",title:"Hapus"}," ✕ ",8,gs)]))),128))])):(l(),r("div",xs,[...e[89]||(e[89]=[L(" Belum ada kategori. Klik ",-1),t("span",{class:"font-semibold"},"Tambah",-1),L(" untuk membuat. ",-1)])]))]),t("div",cs,[t("button",{onClick:Bt,disabled:m.value,class:"btn btn-primary"},o(m.value?"Menyimpan...":"Simpan Konfigurasi"),9,bs)])])])):x("",!0),k.value==="public_url"?(l(),r("div",ms,[e[92]||(e[92]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Link Isolir (URL Publik)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Link tenant untuk halaman isolir/direct/chat.")],-1)),t("div",ys,[t("div",ks,[t("input",{value:et.value,readonly:"",class:"input flex-1 font-mono text-sm bg-gray-50 dark:bg-gray-800",placeholder:"Belum tersedia"},null,8,fs),t("button",{onClick:It,class:"btn btn-primary shrink-0"},"Copy")]),e[91]||(e[91]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bagikan link ini ke pelanggan agar masuk ke halaman isolir/chat.",-1))])])):x("",!0),k.value==="logs"?(l(),r("div",vs,[t("div",ws,[e[98]||(e[98]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Log Notifikasi"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Monitoring status pengiriman notifikasi (WA/Telegram).")],-1)),t("div",_s,[t("div",hs,[t("div",Ts,[t("div",Cs,o(Q.value.total),1),e[93]||(e[93]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Total",-1))]),t("div",Ss,[t("div",Ps,o(Q.value.sent),1),e[94]||(e[94]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Terkirim",-1))]),t("div",Us,[t("div",Vs,o(Q.value.failed),1),e[95]||(e[95]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Gagal",-1))])]),t("div",As,[t("div",Os,[d(t("select",{"onUpdate:modelValue":e[31]||(e[31]=a=>w.range=a),onChange:S,class:"input text-sm !rounded-xl"},[...e[96]||(e[96]=[t("option",{value:""},"All Time",-1),t("option",{value:"24h"},"24 Jam",-1),t("option",{value:"7d"},"7 Hari",-1),t("option",{value:"30d"},"30 Hari",-1)])],544),[[ot,w.range]]),d(t("select",{"onUpdate:modelValue":e[32]||(e[32]=a=>w.status=a),onChange:S,class:"input text-sm !rounded-xl"},[...e[97]||(e[97]=[t("option",{value:""},"All Status",-1),t("option",{value:"success"},"Success",-1),t("option",{value:"failed"},"Failed",-1)])],544),[[ot,w.status]]),d(t("input",{"onUpdate:modelValue":e[33]||(e[33]=a=>w.search=a),onInput:S,type:"text",class:"input text-sm w-56 !rounded-xl",placeholder:"Cari..."},null,544),[[u,w.search]])]),t("button",{onClick:S,class:"btn btn-secondary sm:ml-auto"},"Refresh")])])]),t("div",$s,[t("div",js,[t("div",null,[e[99]||(e[99]=t("h3",{class:"text-sm font-black tracking-tight text-gray-900 dark:text-white"},"Daftar Log",-1)),t("p",Ls,"Menampilkan "+o(q.value.length)+" baris",1)]),t("button",{onClick:S,class:"btn btn-secondary shrink-0"},"Refresh")]),t("div",Gs,[t("table",Ns,[e[101]||(e[101]=t("thead",{class:"bg-white/70 dark:bg-dark-950/60 sticky top-0"},[t("tr",{class:"text-[11px] uppercase font-black tracking-widest text-gray-500 dark:text-gray-400"},[t("th",{class:"px-4 py-3 text-left"},"Waktu"),t("th",{class:"px-4 py-3 text-left"},"Platform"),t("th",{class:"px-4 py-3 text-left"},"Target"),t("th",{class:"px-4 py-3 text-left"},"Pesan"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-left"},"Response")])],-1)),t("tbody",Ds,[(l(!0),r(T,null,P(q.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",Rs,o(rt(a.timestamp)),1),t("td",Bs,o(a.platform),1),t("td",Is,o(a.target),1),t("td",Ms,o(a.message),1),t("td",Es,[t("span",{class:W([lt(a.normalized_status||a.status),"px-2 py-1 text-xs rounded-full font-bold uppercase"])},o(a.normalized_status||a.status),3)]),t("td",Ws,o(a.response_log||"-"),1)]))),128)),q.value.length===0?(l(),r("tr",Fs,[...e[100]||(e[100]=[t("td",{colspan:"6",class:"px-4 py-12 text-center text-gray-500 dark:text-gray-400"},"Tidak ada log",-1)])])):x("",!0)])])])])])):x("",!0),k.value==="system_update"?(l(),r("div",Ks,[e[102]||(e[102]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Update Sistem"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Update panel via ZIP atau paket build dari GitHub.")],-1)),t("div",Js,[A(zt,{embedded:""})])])):x("",!0)])]))]),$.value?(l(),r("div",Hs,[t("div",zs,[t("div",{class:"fixed inset-0 bg-gray-500/75 dark:bg-gray-900/80",onClick:e[34]||(e[34]=a=>$.value=!1)}),t("div",qs,[t("div",Qs,[t("h3",Zs,o(J.value?"Edit Template":"Tambah Template"),1),t("button",{onClick:e[35]||(e[35]=a=>$.value=!1),class:"text-gray-400 hover:text-gray-500"},"✕")]),t("form",{onSubmit:Jt(Ut,["prevent"]),class:"p-6 space-y-4"},[t("div",null,[e[103]||(e[103]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kode Template *",-1)),d(t("input",{"onUpdate:modelValue":e[36]||(e[36]=a=>h.code=a),type:"text",required:"",class:"input w-full",disabled:!!J.value,placeholder:"web_welcome"},null,8,Xs),[[u,h.code]])]),t("div",null,[e[104]||(e[104]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Konten *",-1)),d(t("textarea",{"onUpdate:modelValue":e[37]||(e[37]=a=>h.message=a),rows:"5",required:"",class:"input w-full",placeholder:"Tulis template..."},null,512),[[u,h.message]])]),tt.value.length>0?(l(),r("div",Ys,[e[107]||(e[107]=t("p",{class:"text-xs text-gray-500 font-bold uppercase mb-2"},"Klik untuk insert variable:",-1)),t("div",tr,[(l(!0),r(T,null,P(tt.value,a=>(l(),r("button",{key:a,type:"button",onClick:b=>At(a),class:"px-2 py-1 text-xs bg-white dark:bg-gray-800 border dark:border-gray-600 rounded hover:bg-blue-100 dark:hover:bg-blue-900 transition"},[e[105]||(e[105]=L(" {",-1)),t("span",null,o(a),1),e[106]||(e[106]=L("} ",-1))],8,er))),128))])])):x("",!0),t("div",ar,[t("button",{type:"button",onClick:e[38]||(e[38]=a=>$.value=!1),class:"btn btn-secondary"},"Batal"),e[108]||(e[108]=t("button",{type:"submit",class:"btn btn-primary"},"Simpan",-1))])],32)])])])):x("",!0)]}),_:1})],64))}};export{ur as default};
