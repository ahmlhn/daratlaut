import{r as p,E as ct,o as vt,c as n,a as W,u as bt,h as yt,m as xt,b as t,j as o,F as y,s as m,n as T,t as l,e as v,f as d,v as f,x as j,i as X,y as I}from"./app--4A5_vJn.js";import{_ as mt}from"./AdminLayout-4k71Has-.js";const ft={class:"p-6"},gt={class:"border-b mb-6"},_t={class:"flex gap-4"},ht=["onClick"],kt={key:0},wt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Tt={class:"card p-4"},Ct={class:"text-xl font-bold"},jt={class:"card p-4"},Dt={class:"text-xl font-bold text-yellow-600"},Et={class:"card p-4"},$t={class:"text-xl font-bold text-green-600"},At={class:"card p-4"},St={class:"card p-4"},Rt={class:"overflow-x-auto"},Ut={class:"min-w-full text-sm"},Vt={class:"px-3 py-2"},Pt={class:"px-3 py-2"},Ft={class:"px-3 py-2"},Nt={class:"px-3 py-2 text-right"},Ot={key:1},Bt={class:"flex justify-end mb-4"},Lt={class:"card p-4"},It={class:"min-w-full text-sm"},Kt={class:"px-3 py-2 font-mono"},Mt={class:"px-3 py-2"},Gt={class:"px-3 py-2"},Jt={class:"px-3 py-2"},qt={class:"px-3 py-2"},Ht=["onClick"],zt=["onClick"],Yt={key:2},Qt={class:"flex flex-wrap gap-3 mb-4"},Wt={class:"card p-4"},Xt={class:"min-w-full text-sm"},Zt={key:0},te={key:1},ee={class:"px-3 py-2"},se={class:"px-3 py-2"},ae={class:"px-3 py-2"},le={class:"px-3 py-2"},ne={class:"px-3 py-2 text-right"},oe={class:"px-3 py-2 text-right"},ie={class:"px-3 py-2"},de=["onClick"],re=["onClick"],ue={key:3},pe={class:"flex justify-between mb-4"},ce={class:"text-sm text-gray-600"},ve={class:"card p-4"},be={class:"min-w-full text-sm"},ye={class:"bg-gray-50"},xe={class:"px-3 py-2"},me={key:0},fe={class:"px-3 py-2"},ge=["value"],_e={class:"px-3 py-2"},he={class:"px-3 py-2"},ke={class:"px-3 py-2 text-right"},we={class:"px-3 py-2"},Te={class:"px-3 py-2"},Ce=["onClick"],je=["onClick"],De={key:4},Ee={class:"flex flex-wrap gap-3 mb-4"},$e={key:0,class:"card p-4"},Ae={key:0},Se={class:"grid md:grid-cols-2 gap-6"},Re={class:"flex justify-between py-2 font-bold border-t-2"},Ue={class:"flex justify-between py-2 font-bold border-t-2"},Ve={class:"mt-6 p-4 bg-gray-100 rounded-lg"},Pe={class:"flex justify-between text-xl font-bold"},Fe={key:1},Ne={class:"grid md:grid-cols-2 gap-6"},Oe={class:"flex justify-between py-2 font-bold border-t-2"},Be={class:"flex justify-between py-2 font-bold border-t-2"},Le={key:0,class:"flex justify-between py-1 border-b"},Ie={class:"flex justify-between py-2 font-bold border-t-2"},Ke={key:2},Me={class:"min-w-full text-sm"},Ge={class:"px-3 py-2 font-mono"},Je={class:"px-3 py-2"},qe={class:"px-3 py-2 text-right"},He={class:"px-3 py-2 text-right"},ze={class:"bg-gray-100 font-bold"},Ye={class:"px-3 py-2 text-right"},Qe={class:"px-3 py-2 text-right"},We={key:0,class:"mt-2 text-red-600 text-sm"},Xe={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Ze={class:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4"},ts={class:"p-4 border-b"},es={class:"text-lg font-semibold"},ss={class:"p-4 space-y-4"},as={class:"grid grid-cols-2 gap-3"},ls={class:"grid grid-cols-2 gap-3"},ns=["value"],os={class:"flex items-center gap-2"},is={class:"p-4 border-t flex justify-end gap-3"},ds={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},rs={class:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto"},us={class:"p-4 border-b"},ps={class:"text-lg font-semibold"},cs={class:"p-4 space-y-4"},vs={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},bs=["value"],ys={class:"grid grid-cols-2 gap-3"},xs={class:"border rounded-lg overflow-hidden"},ms={class:"min-w-full text-sm"},fs={class:"px-2 py-1"},gs=["onUpdate:modelValue"],_s=["value"],hs={class:"px-2 py-1"},ks=["onUpdate:modelValue"],ws={class:"px-2 py-1"},Ts=["onUpdate:modelValue"],Cs={class:"px-2 py-1"},js=["onUpdate:modelValue"],Ds={class:"px-2 py-1"},Es=["onClick"],$s={class:"bg-gray-50 font-medium"},As={class:"px-2 py-2 text-right"},Ss={class:"px-2 py-2 text-right"},Rs={key:0,class:"mt-2 text-red-600 text-sm"},Us={class:"p-4 border-t flex justify-end gap-3"},Vs=["disabled"],g="/api/v1/finance",Os={__name:"Index",setup(Ps){const w=p("dashboard"),h=p(!1),C=p({total_balance:0,pending_approvals:0,posted_today:0,revenue_this_month:0,expense_this_month:0,profit_this_month:0,recent_transactions:[]}),Z=p([]),N=p([]),S=p(!1),R=p(null),x=p({code:"",name:"",category:"asset",type:"detail",parent_id:null,is_active:!0}),O=p([]),K=p({total:0,per_page:20,current_page:1}),b=p({status:"",start_date:"",end_date:"",search:""}),U=p(!1),$=p(null),u=p({tx_date:new Date().toISOString().split("T")[0],ref_no:"",description:"",branch_id:null,party_name:"",method:"",lines:[]}),M=p([]),G=p([]),A=p([]),k=p([]),D=p("income"),E=p({start_date:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),c=p(null);function i(a){return new Intl.NumberFormat("id-ID").format(a||0)}async function V(){h.value=!0;try{const e=await(await fetch(`${g}/dashboard`)).json();e.status==="ok"&&(C.value=e.data)}catch(a){console.error("Failed to load dashboard:",a)}h.value=!1}async function B(){h.value=!0;try{const e=await(await fetch(`${g}/coa`)).json();e.status==="ok"&&(Z.value=e.data,N.value=e.flat)}catch(a){console.error("Failed to load COA:",a)}h.value=!1}async function tt(){try{const e=await(await fetch(`${g}/coa/dropdown`)).json();e.status==="ok"&&(M.value=e.data)}catch(a){console.error("Failed to load COA dropdown:",a)}}async function et(){try{const e=await(await fetch(`${g}/branches`)).json();e.status==="ok"&&(G.value=e.data)}catch(a){console.error("Failed to load branches:",a)}}function J(a=null){R.value=a,a?x.value={...a}:x.value={code:"",name:"",category:"asset",type:"detail",parent_id:null,is_active:!0},S.value=!0}async function st(){try{const a={...x.value};R.value&&(a.id=R.value.id);const s=await(await fetch(`${g}/coa`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();s.status==="ok"?(S.value=!1,await B()):alert(s.message||"Gagal menyimpan")}catch(a){alert("Error: "+a.message)}}async function at(a){if(confirm(`Hapus akun "${a.code} - ${a.name}"?`))try{const s=await(await fetch(`${g}/coa/${a.id}`,{method:"DELETE"})).json();s.status==="ok"?await B():alert(s.message||"Gagal menghapus")}catch(e){alert("Error: "+e.message)}}async function P(){h.value=!0;try{const a=new URLSearchParams;b.value.status&&a.append("status",b.value.status),b.value.start_date&&a.append("start_date",b.value.start_date),b.value.end_date&&a.append("end_date",b.value.end_date),b.value.search&&a.append("search",b.value.search),a.append("page",K.value.current_page);const s=await(await fetch(`${g}/transactions?${a}`)).json();s.status==="ok"&&(O.value=s.data,K.value=s.pagination)}catch(a){console.error("Failed to load transactions:",a)}h.value=!1}function q(a=null){$.value=a,a?u.value={tx_date:a.tx_date,ref_no:a.ref_no||"",description:a.description,branch_id:a.branch_id,party_name:a.party_name||"",method:a.method||"",lines:a.lines.map(e=>({coa_id:e.coa_id,description:e.description||"",debit:e.debit||0,credit:e.credit||0}))}:u.value={tx_date:new Date().toISOString().split("T")[0],ref_no:"",description:"",branch_id:null,party_name:"",method:"",lines:[{coa_id:null,description:"",debit:0,credit:0},{coa_id:null,description:"",debit:0,credit:0}]},U.value=!0}function lt(){u.value.lines.push({coa_id:null,description:"",debit:0,credit:0})}function nt(a){u.value.lines.length>2&&u.value.lines.splice(a,1)}const H=I(()=>u.value.lines.reduce((a,e)=>a+(parseFloat(e.debit)||0),0)),z=I(()=>u.value.lines.reduce((a,e)=>a+(parseFloat(e.credit)||0),0)),L=I(()=>Math.abs(H.value-z.value)<.01);async function ot(){if(!L.value){alert("Transaksi tidak balance!");return}try{const a=$.value?`${g}/transactions/${$.value.id}`:`${g}/transactions`,e=$.value?"PUT":"POST",r=await(await fetch(a,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(u.value)})).json();r.status==="ok"?(U.value=!1,await P()):alert(r.message||"Gagal menyimpan")}catch(a){alert("Error: "+a.message)}}async function it(a){if(confirm("Hapus transaksi ini?"))try{const s=await(await fetch(`${g}/transactions/${a.id}`,{method:"DELETE"})).json();s.status==="ok"?await P():alert(s.message||"Gagal menghapus")}catch(e){alert("Error: "+e.message)}}async function F(){h.value=!0;try{const e=await(await fetch(`${g}/approvals`)).json();e.status==="ok"&&(A.value=e.data,k.value=[])}catch(a){console.error("Failed to load approvals:",a)}h.value=!1}async function dt(a){if(confirm("Approve transaksi ini?"))try{const s=await(await fetch(`${g}/transactions/${a.id}/approve`,{method:"POST"})).json();s.status==="ok"?(await F(),await V()):alert(s.message||"Gagal approve")}catch(e){alert("Error: "+e.message)}}async function rt(a){const e=prompt("Alasan penolakan:");if(e)try{const r=await(await fetch(`${g}/transactions/${a.id}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:e})})).json();r.status==="ok"?await F():alert(r.message||"Gagal reject")}catch(s){alert("Error: "+s.message)}}async function ut(){if(k.value.length===0){alert("Pilih transaksi yang akan di-approve");return}if(confirm(`Approve ${k.value.length} transaksi?`))try{const e=await(await fetch(`${g}/transactions/bulk-approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:k.value})})).json();alert(e.message||"Selesai"),await F(),await V()}catch(a){alert("Error: "+a.message)}}async function Y(){h.value=!0;try{let a="";switch(D.value){case"income":a="income-statement";break;case"balance":a="balance-sheet";break;case"trial":a="trial-balance";break}const e=new URLSearchParams({start_date:E.value.start_date,end_date:E.value.end_date}),r=await(await fetch(`${g}/reports/${a}?${e}`)).json();r.status==="ok"&&(c.value=r.data)}catch(a){console.error("Failed to load report:",a)}h.value=!1}function Q(a){return{DRAFT:"bg-red-100 text-red-800",PENDING:"bg-yellow-100 text-yellow-800",POSTED:"bg-green-100 text-green-800",REJECTED:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"}function pt(a){return{asset:"bg-blue-100 text-blue-800",liability:"bg-purple-100 text-purple-800",equity:"bg-indigo-100 text-indigo-800",revenue:"bg-green-100 text-green-800",expense:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800"}return ct(w,a=>{switch(a){case"dashboard":V();break;case"coa":B();break;case"transactions":P(),tt(),et();break;case"approvals":F();break;case"reports":Y();break}}),vt(()=>{V()}),(a,e)=>(o(),n(y,null,[W(bt(yt),{title:"Keuangan"}),W(mt,null,{default:xt(()=>[t("div",ft,[e[60]||(e[60]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-800"},"Keuangan"),t("p",{class:"text-gray-600"},"Manajemen keuangan dan akuntansi")],-1)),t("div",gt,[t("nav",_t,[(o(),n(y,null,m([{id:"dashboard",label:"Dashboard"},{id:"coa",label:"Chart of Accounts"},{id:"transactions",label:"Transaksi"},{id:"approvals",label:"Approval"},{id:"reports",label:"Laporan"}],s=>t("button",{key:s.id,onClick:r=>w.value=s.id,class:T(["px-4 py-2 font-medium border-b-2 transition",w.value===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"])},l(s.label),11,ht)),64))])]),w.value==="dashboard"?(o(),n("div",kt,[t("div",wt,[t("div",Tt,[e[25]||(e[25]=t("div",{class:"text-sm text-gray-500"},"Total Saldo",-1)),t("div",Ct,"Rp "+l(i(C.value.total_balance)),1)]),t("div",jt,[e[26]||(e[26]=t("div",{class:"text-sm text-gray-500"},"Pending Approval",-1)),t("div",Dt,l(C.value.pending_approvals),1)]),t("div",Et,[e[27]||(e[27]=t("div",{class:"text-sm text-gray-500"},"Pendapatan Bulan Ini",-1)),t("div",$t,"Rp "+l(i(C.value.revenue_this_month)),1)]),t("div",At,[e[28]||(e[28]=t("div",{class:"text-sm text-gray-500"},"Laba Bulan Ini",-1)),t("div",{class:T(["text-xl font-bold",C.value.profit_this_month>=0?"text-green-600":"text-red-600"])}," Rp "+l(i(C.value.profit_this_month)),3)])]),t("div",St,[e[30]||(e[30]=t("h3",{class:"font-semibold mb-4"},"Transaksi Terbaru",-1)),t("div",Rt,[t("table",Ut,[e[29]||(e[29]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-3 py-2 text-left"},"Tanggal"),t("th",{class:"px-3 py-2 text-left"},"Deskripsi"),t("th",{class:"px-3 py-2 text-left"},"Status"),t("th",{class:"px-3 py-2 text-right"},"Jumlah")])],-1)),t("tbody",null,[(o(!0),n(y,null,m(C.value.recent_transactions,s=>(o(),n("tr",{key:s.id,class:"border-b"},[t("td",Vt,l(s.tx_date),1),t("td",Pt,l(s.description),1),t("td",Ft,[t("span",{class:T(["px-2 py-0.5 rounded text-xs",Q(s.status)])},l(s.status),3)]),t("td",Nt,"Rp "+l(i(s.total_debit)),1)]))),128))])])])])])):v("",!0),w.value==="coa"?(o(),n("div",Ot,[t("div",Bt,[t("button",{onClick:e[0]||(e[0]=s=>J()),class:"btn btn-primary"},"+ Tambah Akun")]),t("div",Lt,[t("table",It,[e[31]||(e[31]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-3 py-2 text-left"},"Kode"),t("th",{class:"px-3 py-2 text-left"},"Nama Akun"),t("th",{class:"px-3 py-2 text-left"},"Kategori"),t("th",{class:"px-3 py-2 text-left"},"Tipe"),t("th",{class:"px-3 py-2 text-left"},"Status"),t("th",{class:"px-3 py-2 text-left"},"Aksi")])],-1)),t("tbody",null,[(o(!0),n(y,null,m(N.value,s=>(o(),n("tr",{key:s.id,class:"border-b hover:bg-gray-50"},[t("td",Kt,l(s.code),1),t("td",{class:T(["px-3 py-2",{"font-semibold":s.type==="header"}])},l(s.name),3),t("td",Mt,[t("span",{class:T(["px-2 py-0.5 rounded text-xs",pt(s.category)])},l(s.category),3)]),t("td",Gt,l(s.type),1),t("td",Jt,[t("span",{class:T(s.is_active?"text-green-600":"text-red-600")},l(s.is_active?"Aktif":"Nonaktif"),3)]),t("td",qt,[t("button",{onClick:r=>J(s),class:"text-blue-600 hover:underline mr-2"},"Edit",8,Ht),t("button",{onClick:r=>at(s),class:"text-red-600 hover:underline"},"Hapus",8,zt)])]))),128))])])])])):v("",!0),w.value==="transactions"?(o(),n("div",Yt,[t("div",Qt,[d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>b.value.start_date=s),type:"date",class:"input"},null,512),[[f,b.value.start_date]]),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>b.value.end_date=s),type:"date",class:"input"},null,512),[[f,b.value.end_date]]),d(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>b.value.status=s),class:"input"},[...e[32]||(e[32]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"PENDING"},"PENDING",-1),t("option",{value:"POSTED"},"POSTED",-1),t("option",{value:"DRAFT"},"DRAFT",-1),t("option",{value:"REJECTED"},"REJECTED",-1)])],512),[[j,b.value.status]]),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>b.value.search=s),type:"text",placeholder:"Cari...",class:"input flex-1"},null,512),[[f,b.value.search]]),t("button",{onClick:P,class:"btn bg-gray-100"},"Cari"),t("button",{onClick:e[5]||(e[5]=s=>q()),class:"btn btn-primary"},"+ Tambah Transaksi")]),t("div",Wt,[t("table",Xt,[e[35]||(e[35]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-3 py-2 text-left"},"Tanggal"),t("th",{class:"px-3 py-2 text-left"},"Ref"),t("th",{class:"px-3 py-2 text-left"},"Deskripsi"),t("th",{class:"px-3 py-2 text-left"},"Status"),t("th",{class:"px-3 py-2 text-right"},"Debit"),t("th",{class:"px-3 py-2 text-right"},"Credit"),t("th",{class:"px-3 py-2 text-left"},"Aksi")])],-1)),t("tbody",null,[h.value?(o(),n("tr",Zt,[...e[33]||(e[33]=[t("td",{colspan:"7",class:"text-center py-8 text-gray-500"},"Loading...",-1)])])):O.value.length===0?(o(),n("tr",te,[...e[34]||(e[34]=[t("td",{colspan:"7",class:"text-center py-8 text-gray-500"},"Tidak ada data",-1)])])):v("",!0),(o(!0),n(y,null,m(O.value,s=>(o(),n("tr",{key:s.id,class:"border-b hover:bg-gray-50"},[t("td",ee,l(s.tx_date),1),t("td",se,l(s.ref_no||"-"),1),t("td",ae,l(s.description),1),t("td",le,[t("span",{class:T(["px-2 py-0.5 rounded text-xs",Q(s.status)])},l(s.status),3)]),t("td",ne,l(i(s.total_debit)),1),t("td",oe,l(i(s.total_credit)),1),t("td",ie,[t("button",{onClick:r=>q(s),class:"text-blue-600 hover:underline mr-2"},"Edit",8,de),s.status!=="POSTED"?(o(),n("button",{key:0,onClick:r=>it(s),class:"text-red-600 hover:underline"},"Hapus",8,re)):v("",!0)])]))),128))])])])])):v("",!0),w.value==="approvals"?(o(),n("div",ue,[t("div",pe,[t("div",ce,l(A.value.length)+" transaksi menunggu approval ",1),k.value.length>0?(o(),n("button",{key:0,onClick:ut,class:"btn btn-primary"}," Approve "+l(k.value.length)+" Terpilih ",1)):v("",!0)]),t("div",ve,[t("table",be,[t("thead",null,[t("tr",ye,[t("th",xe,[t("input",{type:"checkbox",onChange:e[6]||(e[6]=s=>k.value=s.target.checked?A.value.map(r=>r.id):[])},null,32)]),e[36]||(e[36]=t("th",{class:"px-3 py-2 text-left"},"Tanggal",-1)),e[37]||(e[37]=t("th",{class:"px-3 py-2 text-left"},"Deskripsi",-1)),e[38]||(e[38]=t("th",{class:"px-3 py-2 text-right"},"Jumlah",-1)),e[39]||(e[39]=t("th",{class:"px-3 py-2 text-left"},"Dibuat",-1)),e[40]||(e[40]=t("th",{class:"px-3 py-2 text-left"},"Aksi",-1))])]),t("tbody",null,[A.value.length===0?(o(),n("tr",me,[...e[41]||(e[41]=[t("td",{colspan:"6",class:"text-center py-8 text-gray-500"},"Tidak ada transaksi pending",-1)])])):v("",!0),(o(!0),n(y,null,m(A.value,s=>(o(),n("tr",{key:s.id,class:"border-b hover:bg-gray-50"},[t("td",fe,[d(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[7]||(e[7]=r=>k.value=r)},null,8,ge),[[X,k.value]])]),t("td",_e,l(s.tx_date),1),t("td",he,l(s.description),1),t("td",ke,"Rp "+l(i(s.total_debit)),1),t("td",we,l(s.created_by),1),t("td",Te,[t("button",{onClick:r=>dt(s),class:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded mr-1"},"Approve",8,Ce),t("button",{onClick:r=>rt(s),class:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded"},"Reject",8,je)])]))),128))])])])])):v("",!0),w.value==="reports"?(o(),n("div",De,[t("div",Ee,[d(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>D.value=s),class:"input"},[...e[42]||(e[42]=[t("option",{value:"income"},"Laba Rugi",-1),t("option",{value:"balance"},"Neraca",-1),t("option",{value:"trial"},"Trial Balance",-1)])],512),[[j,D.value]]),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>E.value.start_date=s),type:"date",class:"input"},null,512),[[f,E.value.start_date]]),d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>E.value.end_date=s),type:"date",class:"input"},null,512),[[f,E.value.end_date]]),t("button",{onClick:Y,class:"btn btn-primary"},"Generate")]),c.value?(o(),n("div",$e,[D.value==="income"?(o(),n("div",Ae,[e[48]||(e[48]=t("h3",{class:"text-lg font-bold mb-4"},"Laporan Laba Rugi",-1)),t("div",Se,[t("div",null,[e[44]||(e[44]=t("h4",{class:"font-semibold mb-2 text-green-700"},"Pendapatan",-1)),(o(!0),n(y,null,m(c.value.revenue.details,s=>(o(),n("div",{key:s.code,class:"flex justify-between py-1 border-b"},[t("span",null,l(s.code)+" - "+l(s.name),1),t("span",null,"Rp "+l(i(s.balance)),1)]))),128)),t("div",Re,[e[43]||(e[43]=t("span",null,"Total Pendapatan",-1)),t("span",null,"Rp "+l(i(c.value.revenue.total)),1)])]),t("div",null,[e[46]||(e[46]=t("h4",{class:"font-semibold mb-2 text-red-700"},"Beban",-1)),(o(!0),n(y,null,m(c.value.expense.details,s=>(o(),n("div",{key:s.code,class:"flex justify-between py-1 border-b"},[t("span",null,l(s.code)+" - "+l(s.name),1),t("span",null,"Rp "+l(i(s.balance)),1)]))),128)),t("div",Ue,[e[45]||(e[45]=t("span",null,"Total Beban",-1)),t("span",null,"Rp "+l(i(c.value.expense.total)),1)])])]),t("div",Ve,[t("div",Pe,[e[47]||(e[47]=t("span",null,"Laba Bersih",-1)),t("span",{class:T(c.value.net_income>=0?"text-green-600":"text-red-600")}," Rp "+l(i(c.value.net_income)),3)])])])):v("",!0),D.value==="balance"?(o(),n("div",Fe,[e[56]||(e[56]=t("h3",{class:"text-lg font-bold mb-4"},"Laporan Posisi Keuangan",-1)),t("div",Ne,[t("div",null,[e[50]||(e[50]=t("h4",{class:"font-semibold mb-2 text-blue-700"},"Aset",-1)),(o(!0),n(y,null,m(c.value.assets.details,s=>(o(),n("div",{key:s.code,class:"flex justify-between py-1 border-b"},[t("span",null,l(s.code)+" - "+l(s.name),1),t("span",null,"Rp "+l(i(s.balance)),1)]))),128)),t("div",Oe,[e[49]||(e[49]=t("span",null,"Total Aset",-1)),t("span",null,"Rp "+l(i(c.value.assets.total)),1)])]),t("div",null,[e[54]||(e[54]=t("h4",{class:"font-semibold mb-2 text-purple-700"},"Kewajiban",-1)),(o(!0),n(y,null,m(c.value.liabilities.details,s=>(o(),n("div",{key:s.code,class:"flex justify-between py-1 border-b"},[t("span",null,l(s.code)+" - "+l(s.name),1),t("span",null,"Rp "+l(i(s.balance)),1)]))),128)),t("div",Be,[e[51]||(e[51]=t("span",null,"Total Kewajiban",-1)),t("span",null,"Rp "+l(i(c.value.liabilities.total)),1)]),e[55]||(e[55]=t("h4",{class:"font-semibold mb-2 mt-4 text-indigo-700"},"Ekuitas",-1)),(o(!0),n(y,null,m(c.value.equity.details,s=>(o(),n("div",{key:s.code,class:"flex justify-between py-1 border-b"},[t("span",null,l(s.code)+" - "+l(s.name),1),t("span",null,"Rp "+l(i(s.balance)),1)]))),128)),c.value.equity.retained_earnings?(o(),n("div",Le,[e[52]||(e[52]=t("span",null,"Laba Ditahan",-1)),t("span",null,"Rp "+l(i(c.value.equity.retained_earnings)),1)])):v("",!0),t("div",Ie,[e[53]||(e[53]=t("span",null,"Total Ekuitas",-1)),t("span",null,"Rp "+l(i(c.value.equity.total)),1)])])])])):v("",!0),D.value==="trial"?(o(),n("div",Ke,[e[59]||(e[59]=t("h3",{class:"text-lg font-bold mb-4"},"Trial Balance",-1)),t("table",Me,[e[58]||(e[58]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-3 py-2 text-left"},"Kode"),t("th",{class:"px-3 py-2 text-left"},"Nama Akun"),t("th",{class:"px-3 py-2 text-right"},"Debit"),t("th",{class:"px-3 py-2 text-right"},"Credit")])],-1)),t("tbody",null,[(o(!0),n(y,null,m(c.value.report,s=>(o(),n("tr",{key:s.code,class:"border-b"},[t("td",Ge,l(s.code),1),t("td",Je,l(s.name),1),t("td",qe,l(s.debit>0?i(s.debit):"-"),1),t("td",He,l(s.credit>0?i(s.credit):"-"),1)]))),128))]),t("tfoot",null,[t("tr",ze,[e[57]||(e[57]=t("td",{class:"px-3 py-2",colspan:"2"},"Total",-1)),t("td",Ye,l(i(c.value.total_debit)),1),t("td",Qe,l(i(c.value.total_credit)),1)])])]),c.value.is_balanced?v("",!0):(o(),n("div",We," ⚠️ Trial balance tidak seimbang! "))])):v("",!0)])):v("",!0)])):v("",!0)]),S.value?(o(),n("div",Xe,[t("div",Ze,[t("div",ts,[t("h3",es,l(R.value?"Edit Akun":"Tambah Akun"),1)]),t("div",ss,[t("div",as,[t("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium mb-1"},"Kode",-1)),d(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>x.value.code=s),type:"text",class:"input w-full"},null,512),[[f,x.value.code]])]),t("div",null,[e[63]||(e[63]=t("label",{class:"block text-sm font-medium mb-1"},"Kategori",-1)),d(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>x.value.category=s),class:"input w-full"},[...e[62]||(e[62]=[t("option",{value:"asset"},"Aset",-1),t("option",{value:"liability"},"Kewajiban",-1),t("option",{value:"equity"},"Ekuitas",-1),t("option",{value:"revenue"},"Pendapatan",-1),t("option",{value:"expense"},"Beban",-1)])],512),[[j,x.value.category]])])]),t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm font-medium mb-1"},"Nama Akun",-1)),d(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>x.value.name=s),type:"text",class:"input w-full"},null,512),[[f,x.value.name]])]),t("div",ls,[t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium mb-1"},"Tipe",-1)),d(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>x.value.type=s),class:"input w-full"},[...e[65]||(e[65]=[t("option",{value:"header"},"Header",-1),t("option",{value:"detail"},"Detail",-1)])],512),[[j,x.value.type]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm font-medium mb-1"},"Parent",-1)),d(t("select",{"onUpdate:modelValue":e[15]||(e[15]=s=>x.value.parent_id=s),class:"input w-full"},[e[67]||(e[67]=t("option",{value:null},"- Tidak Ada -",-1)),(o(!0),n(y,null,m(N.value.filter(s=>s.type==="header"),s=>(o(),n("option",{key:s.id,value:s.id},l(s.code)+" - "+l(s.name),9,ns))),128))],512),[[j,x.value.parent_id]])])]),t("label",os,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=s=>x.value.is_active=s)},null,512),[[X,x.value.is_active]]),e[69]||(e[69]=t("span",{class:"text-sm"},"Aktif",-1))])]),t("div",is,[t("button",{onClick:e[17]||(e[17]=s=>S.value=!1),class:"btn bg-gray-100"},"Batal"),t("button",{onClick:st,class:"btn btn-primary"},"Simpan")])])])):v("",!0),U.value?(o(),n("div",ds,[t("div",rs,[t("div",us,[t("h3",ps,l($.value?"Edit Transaksi":"Tambah Transaksi"),1)]),t("div",cs,[t("div",vs,[t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium mb-1"},"Tanggal",-1)),d(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>u.value.tx_date=s),type:"date",class:"input w-full"},null,512),[[f,u.value.tx_date]])]),t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm font-medium mb-1"},"No. Ref",-1)),d(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>u.value.ref_no=s),type:"text",class:"input w-full"},null,512),[[f,u.value.ref_no]])]),t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm font-medium mb-1"},"Cabang",-1)),d(t("select",{"onUpdate:modelValue":e[20]||(e[20]=s=>u.value.branch_id=s),class:"input w-full"},[e[72]||(e[72]=t("option",{value:null},"- Pilih -",-1)),(o(!0),n(y,null,m(G.value,s=>(o(),n("option",{key:s.id,value:s.id},l(s.name),9,bs))),128))],512),[[j,u.value.branch_id]])]),t("div",null,[e[74]||(e[74]=t("label",{class:"block text-sm font-medium mb-1"},"Metode",-1)),d(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>u.value.method=s),type:"text",class:"input w-full",placeholder:"Transfer/Cash"},null,512),[[f,u.value.method]])])]),t("div",ys,[t("div",null,[e[75]||(e[75]=t("label",{class:"block text-sm font-medium mb-1"},"Deskripsi",-1)),d(t("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>u.value.description=s),type:"text",class:"input w-full"},null,512),[[f,u.value.description]])]),t("div",null,[e[76]||(e[76]=t("label",{class:"block text-sm font-medium mb-1"},"Pihak Terkait",-1)),d(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>u.value.party_name=s),type:"text",class:"input w-full"},null,512),[[f,u.value.party_name]])])]),t("div",null,[t("div",{class:"flex items-center justify-between mb-2"},[e[77]||(e[77]=t("label",{class:"text-sm font-medium"},"Detail Jurnal",-1)),t("button",{onClick:lt,type:"button",class:"text-sm text-blue-600 hover:underline"},"+ Tambah Baris")]),t("div",xs,[t("table",ms,[e[81]||(e[81]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-2 py-2 text-left"},"Akun"),t("th",{class:"px-2 py-2 text-left"},"Keterangan"),t("th",{class:"px-2 py-2 text-right w-32"},"Debit"),t("th",{class:"px-2 py-2 text-right w-32"},"Credit"),t("th",{class:"px-2 py-2 w-10"})])],-1)),t("tbody",null,[(o(!0),n(y,null,m(u.value.lines,(s,r)=>(o(),n("tr",{key:r,class:"border-t"},[t("td",fs,[d(t("select",{"onUpdate:modelValue":_=>s.coa_id=_,class:"input w-full text-sm"},[e[78]||(e[78]=t("option",{value:null},"Pilih Akun",-1)),(o(!0),n(y,null,m(M.value,_=>(o(),n("option",{key:_.id,value:_.id},l(_.code)+" - "+l(_.name),9,_s))),128))],8,gs),[[j,s.coa_id]])]),t("td",hs,[d(t("input",{"onUpdate:modelValue":_=>s.description=_,type:"text",class:"input w-full text-sm"},null,8,ks),[[f,s.description]])]),t("td",ws,[d(t("input",{"onUpdate:modelValue":_=>s.debit=_,type:"number",class:"input w-full text-sm text-right",min:"0"},null,8,Ts),[[f,s.debit,void 0,{number:!0}]])]),t("td",Cs,[d(t("input",{"onUpdate:modelValue":_=>s.credit=_,type:"number",class:"input w-full text-sm text-right",min:"0"},null,8,js),[[f,s.credit,void 0,{number:!0}]])]),t("td",Ds,[t("button",{onClick:_=>nt(r),type:"button",class:"text-red-600 hover:text-red-800"},"×",8,Es)])]))),128))]),t("tfoot",$s,[t("tr",null,[e[79]||(e[79]=t("td",{colspan:"2",class:"px-2 py-2 text-right"},"Total:",-1)),t("td",As,l(i(H.value)),1),t("td",Ss,l(i(z.value)),1),e[80]||(e[80]=t("td",null,null,-1))])])])]),L.value?v("",!0):(o(),n("div",Rs," ⚠️ Debit dan Credit harus sama! "))])]),t("div",Us,[t("button",{onClick:e[24]||(e[24]=s=>U.value=!1),class:"btn bg-gray-100"},"Batal"),t("button",{onClick:ot,class:"btn btn-primary",disabled:!L.value},"Simpan",8,Vs)])])])):v("",!0)]),_:1})],64))}};export{Os as default};
