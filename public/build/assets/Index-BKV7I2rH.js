import{o as Y,c as o,a as S,u as W,h as X,m as A,b as e,j as n,F as u,s as v,t as d,e as c,d as y,B as Z,T as ee,I as te,f as R,v as O,n as re,r as m,y as V}from"./app-zxw729Hv.js";import{_ as ae}from"./AdminLayout-Dh6-Clyg.js";const se={class:"space-y-8 animate-fade-in"},ne={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},oe={class:"flex items-start justify-between mb-4"},ie={class:"flex items-center space-x-3"},le={class:"p-3 rounded-lg bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 group-hover:scale-110 transition-transform duration-300"},de={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ce={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ue={class:"text-xl font-bold text-gray-900 dark:text-white capitalize tracking-tight"},me={class:"text-xs font-medium text-gray-400 uppercase tracking-wider"},pe={class:"space-y-3 relative z-10"},ge={class:"flex items-center justify-between text-sm"},ve={class:"px-2 py-0.5 rounded-full text-xs font-bold bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"},ke={class:"flex flex-wrap gap-1.5 h-20 overflow-hidden content-start"},ye={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400"},be={key:1,class:"text-xs text-gray-400 italic py-2"},fe={class:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end items-center gap-3 relative z-10"},xe=["onClick"],he=["onClick"],we={key:0,class:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},_e={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},je={class:"inline-block align-bottom bg-white dark:bg-dark-900 rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl w-full relative z-10 animate-scale-in"},Ce={class:"px-6 py-5 border-b border-gray-100 dark:border-dark-800 flex justify-between items-center bg-gray-50/50 dark:bg-dark-800/50"},Me={class:"text-xl font-bold text-gray-900 dark:text-white",id:"modal-title"},Te={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Le={class:"px-6 py-6 space-y-6"},Se={class:"relative rounded-md shadow-sm"},Pe=["disabled"],ze={key:0,class:"text-xs text-amber-600 mt-2 flex items-center"},Be={class:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-3"},Ee={class:"border border-gray-200 dark:border-dark-700 rounded-xl bg-gray-50/50 dark:bg-dark-800/50 p-4"},$e={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ae={class:"flex items-start justify-between gap-3"},Re={class:"text-sm font-bold text-gray-900 dark:text-white"},Oe={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 border border-amber-200/60 dark:border-amber-900/40"},Ve={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Ne={class:"shrink-0"},Ie=["value","onChange"],He=["value"],De={class:"mt-3 flex flex-wrap gap-1.5"},Ue={key:0,class:"inline-flex items-center px-2 py-1 rounded text-[11px] font-semibold bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300"},Fe={key:1,class:"text-[11px] text-gray-400 italic py-1"},Ke={key:0,class:"mt-5"},qe={class:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-4"},Ge={class:"relative w-full sm:w-72"},Je={class:"h-[60vh] sm:h-96 overflow-y-auto custom-scrollbar border border-gray-200 dark:border-dark-700 rounded-xl bg-gray-50/50 dark:bg-dark-800/50 p-4 space-y-4"},Qe={class:"flex items-center justify-between mb-3 border-b border-gray-100 dark:border-dark-700 pb-2"},Ye={class:"text-sm font-bold text-gray-800 dark:text-gray-200 uppercase tracking-wider flex items-center"},We=["onClick"],Xe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},Ze=["checked","onChange"],et={class:"text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors select-none"},tt={key:0,class:"text-center py-12 text-gray-500"},rt={class:"flex justify-between items-center mt-2 text-xs text-gray-500"},at={class:"bg-gray-50 dark:bg-dark-800 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end gap-3 border-t border-gray-100 dark:border-dark-700"},st=["disabled"],nt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},h="/api/v1",dt={__name:"Index",setup(ot){const P=m([]),w=m([]),M=m(!1),k=m(!1),p=m(!1),f=m(!1),x=m(""),b=m(!1),i=m({id:null,name:"",permissions:[]}),N=[{value:"none",label:"Tidak ada"},{value:"read",label:"Lihat"},{value:"operator",label:"Operator"},{value:"manager",label:"Manager"}],I=[{key:"dashboard",label:"Dashboard",description:"Ringkasan & statistik.",levels:{read:["view dashboard"],operator:["view dashboard"],manager:["view dashboard"]}},{key:"installations",label:"Pasang Baru",description:"Instalasi, monitoring, approval.",levels:{read:["view installations","view riwayat installations"],operator:["view installations","create installations","edit installations","view riwayat installations"],manager:["view installations","create installations","edit installations","delete installations","approve installations","send installations recap","view riwayat installations"]}},{key:"team",label:"Tim",description:"Teknisi/sales/staff.",levels:{read:["view team"],operator:["view team","create team","edit team"],manager:["manage team","view team","create team","edit team","delete team"]}},{key:"teknisi",label:"Teknisi",description:"Tugas, riwayat, rekap.",levels:{read:["view teknisi"],operator:["view teknisi","edit teknisi"],manager:["view teknisi","edit teknisi","send teknisi recap"]}},{key:"maps",label:"Maps",description:"Tracking teknisi.",levels:{read:["view maps"],operator:["view maps","manage maps"],manager:["view maps","manage maps"]}},{key:"chat",label:"Chat",description:"Chat admin.",levels:{read:["view chat"],operator:["view chat","send chat","edit chat"],manager:["view chat","send chat","edit chat","delete chat"]}},{key:"leads",label:"Leads",description:"Prospek & konversi.",levels:{read:["view leads"],operator:["view leads","create leads","edit leads","convert leads","bulk leads"],manager:["view leads","create leads","edit leads","delete leads","convert leads","bulk leads"]}},{key:"customers",label:"Pelanggan",description:"Data pelanggan.",levels:{read:["view customers"],operator:["view customers","create customers","edit customers"],manager:["view customers","create customers","edit customers","delete customers"]}},{key:"plans",label:"Paket Layanan",description:"Produk/paket.",levels:{read:["view plans"],operator:["view plans","create plans","edit plans"],manager:["view plans","create plans","edit plans","delete plans"]}},{key:"invoices",label:"Invoice",description:"Tagihan.",levels:{read:["view invoices"],operator:["view invoices","create invoices","edit invoices"],manager:["view invoices","create invoices","edit invoices","delete invoices"]}},{key:"payments",label:"Pembayaran",description:"Transaksi.",levels:{read:["view payments"],operator:["view payments","create payments","edit payments"],manager:["view payments","create payments","edit payments","delete payments"]}},{key:"reports",label:"Laporan",description:"Analitik & export.",levels:{read:["view reports"],operator:["view reports","export reports"],manager:["view reports","export reports"]}},{key:"finance",label:"Keuangan",description:"Transaksi & approval.",levels:{read:["view finance"],operator:["view finance","create finance","edit finance","export finance"],manager:["manage finance","view finance","create finance","edit finance","delete finance","approve finance","export finance"]}},{key:"olts",label:"OLT",description:"Provisioning OLT/ONU.",levels:{read:["view olts"],operator:["manage olt","view olts","create olts","edit olts"],manager:["manage olt","view olts","create olts","edit olts","delete olts"]}},{key:"isolir",label:"Isolir",description:"Suspend/unsuspend.",levels:{read:[],operator:["manage isolir"],manager:["manage isolir"]}},{key:"settings",label:"Pengaturan Sistem",description:"Settings, roles, update.",levels:{read:[],operator:["manage settings"],manager:["manage settings","manage roles","manage system update"]}}];async function T(){M.value=!0;try{const a=await fetch(`${h}/roles`);P.value=await a.json()}catch(a){console.error("Error loading roles:",a)}finally{M.value=!1}}async function H(){try{const a=await fetch(`${h}/permissions`);w.value=await a.json()}catch(a){console.error("Error loading permissions:",a)}}function D(){p.value=!1,i.value={id:null,name:"",permissions:[]},k.value=!0,x.value="",b.value=!1}function U(a){p.value=!0,i.value={id:a.id,name:a.name,permissions:a.permissions.map(t=>t.name)},k.value=!0,x.value="",b.value=!1}async function F(){if(i.value.name){f.value=!0;try{const a=p.value?`${h}/roles/${i.value.id}`:`${h}/roles`,t=p.value?"PUT":"POST",r=await fetch(a,{method:t,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i.value)});if(r.ok)k.value=!1,T();else{const s=await r.json();alert(s.message||"Gagal menyimpan role")}}catch(a){console.error("Error saving role:",a),alert("Terjadi kesalahan sistem")}finally{f.value=!1}}}async function K(a){if(confirm(`Yakin ingin menghapus role "${a.name}"? Tindakan ini tidak dapat dibatalkan.`))try{const t=await fetch(`${h}/roles/${a.id}`,{method:"DELETE",headers:{Accept:"application/json"}});if(t.ok)T();else{const r=await t.json();alert(r.message||"Gagal menghapus role")}}catch(t){console.error("Error deleting role:",t)}}const z=V(()=>{const a={},t=x.value.toLowerCase();return w.value.forEach(r=>{if(t&&!r.name.toLowerCase().includes(t))return;const s=r.name.split(" "),l=s.length>1?s.slice(1).join(" "):"System",C=l.charAt(0).toUpperCase()+l.slice(1);a[C]||(a[C]=[]),a[C].push(r)}),Object.keys(a).sort().reduce((r,s)=>(r[s]=a[s],r),{})});function q(a){const t=i.value.permissions.indexOf(a);t===-1?i.value.permissions.push(a):i.value.permissions.splice(t,1)}function G(a,t){t.every(s=>i.value.permissions.includes(s.name))?t.forEach(s=>{const l=i.value.permissions.indexOf(s.name);l!==-1&&i.value.permissions.splice(l,1)}):t.forEach(s=>{i.value.permissions.includes(s.name)||i.value.permissions.push(s.name)})}const J=V(()=>new Set((w.value||[]).map(a=>a.name)));function B(a){const t=[],r=new Set;return(a||[]).forEach(s=>{!s||r.has(s)||(r.add(s),t.push(s))}),t}function g(a,t){var s;return(((s=a==null?void 0:a.levels)==null?void 0:s[t])||[]).slice().filter(l=>J.value.has(l))}function E(a){return B([...g(a,"read"),...g(a,"operator"),...g(a,"manager")])}function $(a){const t=E(a),r=new Set(i.value.permissions||[]);return t.filter(s=>r.has(s))}function L(a,t){if(a.size!==t.size)return!1;for(const r of a)if(!t.has(r))return!1;return!0}function _(a){const t=new Set($(a));if(t.size===0)return"none";const r=new Set(g(a,"read")),s=new Set(g(a,"operator")),l=new Set(g(a,"manager"));return L(t,r)?"read":L(t,s)?"operator":L(t,l)?"manager":"custom"}function Q(a,t){if(!a||!["none","read","operator","manager"].includes(t))return;const r=new Set(E(a)),s=(i.value.permissions||[]).filter(l=>!r.has(l));t!=="none"&&s.push(...g(a,t)),i.value.permissions=B(s)}function j(a){const t=_(a),r=t==="custom"?$(a):t==="none"?[]:g(a,t),s=r.slice(0,3),l=Math.max(0,r.length-s.length);return{list:r,head:s,extra:l,level:t}}return Y(()=>{T(),H()}),(a,t)=>(n(),o(u,null,[S(W(X),{title:"Kelola Role"}),S(ae,null,{default:A(()=>[e("div",se,[e("div",{class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-card border border-gray-100 dark:border-dark-700"},[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-primary-600 to-primary-400"}," Role & Permissions "),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Atur akses dan keamanan sistem dengan mudah. ")],-1)),e("button",{onClick:D,class:"group relative inline-flex items-center justify-center px-6 py-3 text-sm font-medium text-white transition-all duration-200 bg-primary-600 border border-transparent rounded-xl hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 shadow-glow-blue hover:shadow-glow-blue-lg overflow-hidden"},[...t[6]||(t[6]=[e("span",{class:"absolute inset-0 w-full h-full -mt-1 rounded-lg opacity-30 bg-gradient-to-b from-transparent via-transparent to-black"},null,-1),e("svg",{class:"w-5 h-5 mr-2 -ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"Tambah Role Baru",-1)])])]),e("div",ne,[M.value?(n(),o(u,{key:0},v(3,r=>e("div",{key:r,class:"h-48 bg-gray-100 dark:bg-dark-800 rounded-2xl animate-pulse"})),64)):(n(!0),o(u,{key:1},v(P.value,r=>(n(),o("div",{key:r.id,class:"group relative flex flex-col justify-between bg-white dark:bg-dark-800 rounded-2xl p-6 shadow-card hover:shadow-card-hover transition-all duration-300 border border-transparent hover:border-primary-100 dark:hover:border-primary-900/30"},[t[13]||(t[13]=e("div",{class:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity"},[e("svg",{class:"w-24 h-24 text-primary-600 transform rotate-12",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"})])],-1)),e("div",null,[e("div",oe,[e("div",ie,[e("div",le,[r.name==="admin"||r.name==="owner"?(n(),o("svg",de,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},null,-1)])])):(n(),o("svg",ce,[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",null,[e("h3",ue,d(r.name.replace(/_/g," ")),1),e("span",me,d(r.name==="owner"?"Super Admin":"Role Sistem"),1)])])]),e("div",pe,[e("div",ge,[t[10]||(t[10]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Akses Permission",-1)),e("span",ve,d(r.permissions.length)+" Item ",1)]),e("div",ke,[(n(!0),o(u,null,v(r.permissions.slice(0,6),s=>(n(),o("span",{key:s.id,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-50 dark:bg-dark-700 text-gray-600 dark:text-gray-300 border border-gray-100 dark:border-gray-600"},d(s.name),1))),128)),r.permissions.length>6?(n(),o("span",ye," +"+d(r.permissions.length-6)+" lainnya ",1)):c("",!0),r.permissions.length===0?(n(),o("span",be," Tidak ada permission khusus. ")):c("",!0)])])]),e("div",fe,[e("button",{onClick:s=>U(r),class:"flex-1 inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-dark-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors"},[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),y(" Edit ",-1)])],8,xe),["admin","owner"].includes(r.name)?c("",!0):(n(),o("button",{key:0,onClick:s=>K(r),class:"inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-red-600 bg-red-50 dark:bg-red-900/20 border border-transparent rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,he))])]))),128))])]),(n(),Z(ee,{to:"body"},[S(te,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[k.value?(n(),o("div",we,[e("div",_e,[e("div",{class:"fixed inset-0 bg-gray-900/50 dark:bg-black/70 backdrop-blur-sm transition-opacity","aria-hidden":"true",onClick:t[0]||(t[0]=r=>k.value=!1)}),t[26]||(t[26]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),e("div",je,[e("div",Ce,[e("div",null,[e("h3",Me,d(p.value?"Edit Konfigurasi Role":"Buat Role Baru"),1),e("p",Te,d(p.value?`Mengubah akses untuk role: ${i.value.name}`:"Tentukan nama dan hak akses untuk role baru."),1)]),e("button",{onClick:t[1]||(t[1]=r=>k.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Le,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},[y(" Nama Identitas Role "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Se,[t[15]||(t[15]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})])],-1)),R(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>i.value.name=r),type:"text",class:"input w-full pl-10 py-2.5 border-gray-300 dark:border-dark-600 focus:ring-primary-500 focus:border-primary-500 rounded-lg dark:bg-dark-800 dark:text-white",placeholder:"Contoh: staff_admin, supervisor_teknisi",disabled:p.value&&["admin","owner"].includes(i.value.name)},null,8,Pe),[[O,i.value.name]])]),p.value&&["admin","owner"].includes(i.value.name)?(n(),o("p",ze,[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),y(" Role sistem tidak dapat diubah namanya. ",-1)])])):c("",!0)]),e("div",null,[e("div",Be,[t[19]||(t[19]=e("div",null,[e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300"}," Preset Akses per Modul "),e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"}," Pilih level akses. Kalau perlu detail, buka mode lanjutan. ")],-1)),e("button",{type:"button",onClick:t[3]||(t[3]=r=>b.value=!b.value),class:"inline-flex items-center justify-center px-3 py-2 text-xs font-semibold rounded-xl border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors"},[t[18]||(t[18]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),y(" "+d(b.value?"Sembunyikan Mode Lanjutan":"Tampilkan Mode Lanjutan"),1)])]),e("div",Ee,[e("div",$e,[(n(),o(u,null,v(I,r=>e("div",{key:r.key,class:re(["p-4 rounded-xl border bg-white dark:bg-dark-800 transition-colors",[_(r)==="custom"?"border-amber-200 dark:border-amber-900/40":"border-gray-100 dark:border-dark-700"]])},[e("div",Ae,[e("div",null,[e("div",Re,[y(d(r.label)+" ",1),_(r)==="custom"?(n(),o("span",Oe," Custom ")):c("",!0)]),e("div",Ve,d(r.description),1)]),e("div",Ne,[e("select",{value:_(r),onChange:s=>Q(r,s.target.value),class:"text-sm rounded-lg border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-900 text-gray-800 dark:text-gray-200 focus:ring-primary-500 focus:border-primary-500 px-3 py-2"},[t[20]||(t[20]=e("option",{value:"custom",disabled:""},"Custom",-1)),(n(),o(u,null,v(N,s=>e("option",{key:s.value,value:s.value},d(s.label),9,He)),64))],40,Ie)])]),e("div",De,[(n(!0),o(u,null,v(j(r).head,s=>(n(),o("span",{key:s,class:"inline-flex items-center px-2 py-1 rounded text-[11px] font-medium bg-gray-50 dark:bg-dark-700 text-gray-600 dark:text-gray-300 border border-gray-100 dark:border-gray-600"},d(s),1))),128)),j(r).extra>0?(n(),o("span",Ue," +"+d(j(r).extra),1)):c("",!0),j(r).list.length===0?(n(),o("span",Fe," Tidak ada akses. ")):c("",!0)])],2)),64))])]),b.value?(n(),o("div",Ke,[e("div",qe,[t[22]||(t[22]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300"}," Mode Lanjutan: Checklist Permission ",-1)),e("div",Ge,[t[21]||(t[21]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),R(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>x.value=r),type:"text",class:"w-full pl-9 pr-3 py-1.5 text-sm border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-800 dark:text-white",placeholder:"Cari izin akses..."},null,512),[[O,x.value]])])]),e("div",Je,[(n(!0),o(u,null,v(z.value,(r,s)=>(n(),o("div",{key:s,class:"bg-white dark:bg-dark-800 rounded-lg border border-gray-100 dark:border-dark-700 p-4 shadow-sm"},[e("div",Qe,[e("h4",Ye,[t[23]||(t[23]=e("span",{class:"w-1.5 h-4 bg-primary-500 rounded-full mr-2"},null,-1)),y(" "+d(s),1)]),e("button",{onClick:l=>G(s,r),class:"text-xs text-primary-600 hover:text-primary-700 font-medium hover:underline"}," Toggle Semua ",8,We)]),e("div",Xe,[(n(!0),o(u,null,v(r,l=>(n(),o("label",{key:l.id,class:"group flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer transition-colors border border-transparent hover:border-gray-200 dark:hover:border-dark-600"},[e("input",{type:"checkbox",checked:i.value.permissions.includes(l.name),onChange:C=>q(l.name),class:"mt-0.5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 cursor-pointer"},null,40,Ze),e("span",et,d(l.name),1)]))),128))])]))),128)),Object.keys(z.value).length===0?(n(),o("div",tt,[...t[24]||(t[24]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",null,"Tidak ada permission yang cocok dengan pencarian.",-1)])])):c("",!0)])])):c("",!0),e("div",rt,[e("span",null,"Total Terpilih: "+d(i.value.permissions.length),1),e("span",null,"Total Tersedia: "+d(w.value.length),1)])])]),e("div",at,[e("button",{onClick:t[5]||(t[5]=r=>k.value=!1),class:"w-full sm:w-auto inline-flex justify-center rounded-xl border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2.5 bg-white dark:bg-dark-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 sm:text-sm transition-all"}," Batal "),e("button",{onClick:F,disabled:f.value,class:"w-full sm:w-auto inline-flex justify-center rounded-xl border border-transparent shadow-glow-blue px-6 py-2.5 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:text-sm transition-all disabled:opacity-70 disabled:cursor-not-allowed"},[f.value?(n(),o("svg",nt,[...t[25]||(t[25]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):c("",!0),y(" "+d(f.value?"Menyimpan Perubahan...":"Simpan Konfigurasi"),1)],8,st)])])])])):c("",!0)]),_:1})]))]),_:1})],64))}};export{dt as default};
