import{o as Y,l as ee,c as n,a as U,m as V,b as e,u as te,h as ae,n as b,d as x,j as i,t as l,e as v,f as k,p as H,q as re,v as w,F as I,s as O,x as se,r as p,y as A,z as le}from"./app-Babio-Hg.js";import{_ as oe}from"./AdminLayout-D4cKWswb.js";const de={id:"legacy-chat-root",class:"h-[calc(100vh-3.5rem)] lg:h-screen w-full overflow-hidden bg-[#f8fafc] text-slate-600 dark:bg-darkbg dark:text-slate-300 transition-colors duration-300"},ne={id:"main-app"},ie={id:"panel-list",class:"w-full md:w-80 flex-shrink-0 flex flex-col border-r border-slate-200 dark:border-white/10 bg-white dark:bg-darkpanel h-full z-20 relative shadow-sm transition-colors"},be={class:"flex shrink-0 border-b border-slate-200 dark:border-white/10"},ue={key:0,class:"bg-red-500 text-white text-[9px] rounded-full px-1 min-w-[16px] h-4 flex items-center justify-center font-bold leading-none"},ce={class:"flex flex-col flex-1 min-h-0"},xe={class:"flex flex-col flex-1 min-h-0"},pe={class:"flex items-center justify-between px-3 pt-3 pb-1 shrink-0"},ge={class:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},he={class:"flex gap-1 px-3 pb-2 overflow-x-auto custom-scrollbar shrink-0"},ke={class:"px-3 pb-2 border-b border-slate-200 dark:border-white/10 shrink-0"},me={class:"relative"},ve={class:"flex-1 overflow-y-auto custom-scrollbar"},fe={key:0,class:"flex items-center justify-center h-32 text-slate-400 text-sm animate-pulse"},we={key:1,class:"flex flex-col items-center justify-center h-32 text-slate-400 text-sm gap-2"},ye=["onClick"],Ce={class:"flex-1 min-w-0"},je={class:"flex items-center justify-between gap-1"},ze={class:"text-sm font-semibold text-slate-800 dark:text-white truncate"},Ee={class:"text-[10px] text-slate-400 dark:text-slate-500 whitespace-nowrap"},Me={class:"flex items-center gap-1.5 mt-0.5"},Be={class:"text-[11px] text-slate-500 dark:text-slate-400 truncate"},Le={key:0,class:"fixed inset-0 z-[70] flex items-center justify-center p-4"},Se={class:"bg-white dark:bg-[#233138] border dark:border-white/10 w-full max-w-sm rounded-2xl shadow-2xl relative z-10 animate-zoomIn overflow-hidden"},Ae={class:"p-4 border-b border-slate-100 dark:border-white/10 flex items-center justify-between"},_e={class:"flex items-center gap-3"},Te={class:"font-bold text-slate-800 dark:text-white text-sm"},Ie={class:"p-4 space-y-3"},Ne=["href"],$e={key:0},Pe={class:"text-sm text-slate-700 dark:text-slate-300"},De={class:"flex gap-4"},Ue={key:0},Ve={class:"text-sm text-slate-700 dark:text-slate-300"},He={class:"text-sm text-slate-700 dark:text-slate-300"},Oe={key:1},Re={class:"text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-white/5 p-2 rounded-lg border border-slate-200 dark:border-white/10"},We={class:"p-4 border-t border-slate-100 dark:border-white/10 grid grid-cols-3 gap-2"},Ke={key:1,class:"fixed inset-0 z-[80] flex items-center justify-center p-4"},Fe={class:"bg-white dark:bg-[#233138] border dark:border-white/10 w-full max-w-sm rounded-2xl p-5 shadow-2xl relative z-10 animate-zoomIn"},Ge={class:"font-bold text-slate-800 dark:text-white mb-4 text-sm"},Je={class:"space-y-3"},Ze={class:"grid grid-cols-2 gap-3"},qe=["value"],Qe={class:"grid grid-cols-2 gap-3 pt-4"},f="/api/v1/leads",tt={__name:"Index",setup(Xe){const E=le(),_=A(()=>{var r,t,a,c;return((t=(r=E.props.auth)==null?void 0:r.user)==null?void 0:t.name)||((c=(a=E.props.auth)==null?void 0:a.user)==null?void 0:c.username)||"Admin"}),R=A(()=>{var r,t;return((t=(r=E.props.auth)==null?void 0:r.user)==null?void 0:t.role)||"Staff"}),W=A(()=>String(_.value||"Admin").trim().split(/\s+/)[0]||"Admin"),K=A(()=>E.props.legacyChatVersion||"");function T(r,t){return new Promise((a,c)=>{if(document.getElementById(t))return a();const h=document.createElement("script");h.id=t;const D=K.value;h.src=D?r+(r.includes("?")?"&":"?")+"v="+encodeURIComponent(D):r,h.async=!0,h.onload=()=>a(),h.onerror=X=>c(X),document.body.appendChild(h)})}function F(){const r=(_.value||"Admin").trim().charAt(0).toUpperCase()||"A",t=document.getElementById("adm-menu-letter"),a=document.getElementById("adm-menu-name"),c=document.getElementById("adm-menu-role"),h=document.getElementById("adm-first-name");t&&(t.textContent=r),a&&(a.textContent=_.value||"Admin"),c&&(c.textContent=R.value||"Staff"),h&&(h.textContent=W.value||"Admin")}Y(async()=>{var r,t;document.documentElement.classList.add("chat-admin-lock"),document.body.classList.add("chat-admin-lock"),(r=window.__chatDispose)==null||r.call(window),await T("/legacy-chat/inline.js","legacy-chat-inline"),await T("/legacy-chat/app.js","legacy-chat-app"),await T("/legacy-chat/game.js","legacy-chat-game"),F(),(t=window.__chatBoot)==null||t.call(window),z()}),ee(()=>{var r;(r=window.__chatDispose)==null||r.call(window),document.documentElement.classList.remove("chat-admin-lock"),document.body.classList.remove("chat-admin-lock")});const y=p("chat"),M=p([]),g=p({total:0,new:0,contacted:0,interested:0,converted:0,lost:0}),B=p(!1),o=p({search:"",status:""}),L=p({}),m=p(!1),C=p(!1),j=p(null),s=p(null),d=p({customer_name:"",customer_phone:"",customer_address:"",notes:"",status:"NEW",source:""});async function u(){B.value=!0;try{const r=new URLSearchParams;o.value.search&&r.append("search",o.value.search),o.value.status&&r.append("status",o.value.status),r.append("per_page","50");const a=await(await fetch(`${f}?${r}`)).json();a.status==="ok"&&(M.value=a.data)}catch(r){console.error("Leads:",r)}B.value=!1}async function z(){try{const t=await(await fetch(`${f}/stats`)).json();t.status==="ok"&&(g.value=t.data)}catch{}}async function G(){try{const t=await(await fetch(`${f}/statuses`)).json();t.status==="ok"&&(L.value=t.data)}catch{}}function N(r){y.value=r,r==="leads"&&!M.value.length&&!B.value&&(G(),z(),u()),r==="chat"&&(s.value=null,m.value=!1)}function $(r=null){j.value=r,d.value=r?{customer_name:r.customer_name,customer_phone:r.customer_phone,customer_address:r.customer_address||"",notes:r.notes||"",status:r.status,source:r.source||""}:{customer_name:"",customer_phone:"",customer_address:"",notes:"",status:"NEW",source:"chat"},C.value=!0,m.value=!1}async function J(){try{const r=j.value?`${f}/${j.value.id}`:f,a=await(await fetch(r,{method:j.value?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d.value)})).json();a.status==="ok"?(C.value=!1,u(),z()):alert(a.message||"Gagal menyimpan")}catch(r){alert("Error: "+r.message)}}async function Z(r){if(confirm(`Hapus lead "${r.customer_name}"?`))try{(await(await fetch(`${f}/${r.id}`,{method:"DELETE"})).json()).status==="ok"&&(m.value=!1,s.value=null,u(),z())}catch(t){alert("Error: "+t.message)}}async function q(r){if(confirm(`Konversi "${r.customer_name}" ke pasang baru?`))try{(await(await fetch(`${f}/${r.id}/convert`,{method:"POST"})).json()).status==="ok"&&(alert("Lead dikonversi ke pasang baru"),m.value=!1,u(),z())}catch(t){alert("Error: "+t.message)}}function Q(r){s.value=r,m.value=!0}function S(r){return{NEW:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",CONTACTED:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",INTERESTED:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",CONVERTED:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",LOST:"bg-slate-200 text-slate-600 dark:bg-slate-700/30 dark:text-slate-400"}[r]||"bg-slate-100 text-slate-600"}function P(r){return r?new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short"}):"-"}return(r,t)=>(i(),n(I,null,[U(te(ae),{title:"Chat Admin"},{default:V(()=>[...t[24]||(t[24]=[e("base",{href:"/chat/"},null,-1)])]),_:1}),U(oe,null,{default:V(()=>[e("div",de,[t[33]||(t[33]=e("audio",{id:"notif-sound",src:"/assets/ding.mp3"},null,-1)),e("div",ne,[e("div",ie,[e("div",be,[e("button",{onClick:t[0]||(t[0]=a=>N("chat")),class:b([y.value==="chat"?"text-blue-600 dark:text-green-400 border-blue-600 dark:border-green-400 bg-blue-50/50 dark:bg-green-900/10":"text-slate-400 dark:text-slate-500 border-transparent hover:text-slate-600","flex-1 flex items-center justify-center gap-1.5 py-2.5 text-[11px] font-bold uppercase tracking-wider border-b-2 transition-all"])},[...t[25]||(t[25]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),x(" Chat ",-1)])],2),e("button",{onClick:t[1]||(t[1]=a=>N("leads")),class:b([y.value==="leads"?"text-blue-600 dark:text-green-400 border-blue-600 dark:border-green-400 bg-blue-50/50 dark:bg-green-900/10":"text-slate-400 dark:text-slate-500 border-transparent hover:text-slate-600","flex-1 flex items-center justify-center gap-1.5 py-2.5 text-[11px] font-bold uppercase tracking-wider border-b-2 transition-all relative"])},[t[26]||(t[26]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t[27]||(t[27]=x(" Leads ",-1)),g.value.new>0?(i(),n("span",ue,l(g.value.new),1)):v("",!0)],2)]),k(e("div",ce,[...t[28]||(t[28]=[e("div",{class:"flex items-center justify-end gap-2 px-3 pt-3 pb-1 shrink-0"},[e("button",{type:"button",onclick:"openTplManager()",class:"h-9 w-9 flex items-center justify-center rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-[#202c33] text-slate-600 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-white/5 transition",title:"Atur Balas Cepat"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),e("button",{type:"button",onclick:"openSettings()",class:"h-9 w-9 flex items-center justify-center rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-[#202c33] text-slate-600 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-white/5 transition",title:"Jadwal & WA"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3M5 11h14M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])]),e("button",{type:"button",onclick:"openAdminProfile()",class:"h-9 w-9 flex items-center justify-center rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-[#202c33] text-slate-600 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-white/5 transition",title:"Pengaturan Profil"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 21a9 9 0 100-18 9 9 0 000 18z"})])])],-1),e("div",{class:"px-3 pt-3 pb-2 border-b border-slate-200 dark:border-white/10 bg-slate-50/50 dark:bg-transparent shrink-0 space-y-2"},[e("form",{action:"#",onsubmit:"return false;",autocomplete:"off",class:"relative group"},[e("input",{type:"text",id:"search-user",onkeyup:"filterUsers()",placeholder:"Cari pelanggan...",autocomplete:"off",class:"w-full bg-white dark:bg-[#202c33] border border-slate-300 dark:border-transparent text-sm rounded-lg pl-9 pr-3 py-2 focus:outline-none focus:border-blue-500 dark:focus:bg-[#2a3942] dark:text-white transition text-slate-700 shadow-sm placeholder-slate-400 dark:placeholder-slate-500"}),e("svg",{class:"w-4 h-4 absolute left-3 top-2.5 text-slate-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])]),e("div",{id:"filter-container",class:"flex gap-2 overflow-x-auto custom-scrollbar pb-1 min-h-[30px]"},[e("div",{class:"text-[10px] text-slate-400 italic px-2"},"Memuat filter...")])],-1),e("div",{id:"user-list",class:"flex-1 overflow-y-auto custom-scrollbar bg-white dark:bg-darkpanel space-y-0.5"},[e("div",{class:"flex flex-col items-center justify-center h-40 text-slate-400 text-sm animate-pulse"},"Memuat...")],-1)])],512),[[H,y.value==="chat"]]),k(e("div",xe,[e("div",pe,[e("span",ge,l(g.value.total)+" leads",1),e("button",{onClick:t[2]||(t[2]=a=>$()),class:"h-7 w-7 flex items-center justify-center rounded-lg bg-blue-600 dark:bg-green-600 text-white hover:bg-blue-700 dark:hover:bg-green-700 transition shadow-sm",title:"Tambah Lead"},[...t[29]||(t[29]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),e("div",he,[e("button",{onClick:t[3]||(t[3]=a=>{o.value.status="",u()}),class:b([o.value.status?"bg-slate-100 text-slate-500 dark:bg-white/5 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-white/10":"bg-blue-600 text-white dark:bg-green-600","text-[10px] px-2 py-0.5 rounded-full font-semibold whitespace-nowrap transition"])},"Semua "+l(g.value.total),3),e("button",{onClick:t[4]||(t[4]=a=>{o.value.status="NEW",u()}),class:b([o.value.status==="NEW"?"bg-blue-600 text-white":"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30","text-[10px] px-2 py-0.5 rounded-full font-semibold whitespace-nowrap transition"])},"Baru "+l(g.value.new),3),e("button",{onClick:t[5]||(t[5]=a=>{o.value.status="CONTACTED",u()}),class:b([o.value.status==="CONTACTED"?"bg-yellow-500 text-white":"bg-yellow-50 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-300 hover:bg-yellow-100","text-[10px] px-2 py-0.5 rounded-full font-semibold whitespace-nowrap transition"])},"Kontak "+l(g.value.contacted),3),e("button",{onClick:t[6]||(t[6]=a=>{o.value.status="INTERESTED",u()}),class:b([o.value.status==="INTERESTED"?"bg-purple-600 text-white":"bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-300 hover:bg-purple-100","text-[10px] px-2 py-0.5 rounded-full font-semibold whitespace-nowrap transition"])},"Minat "+l(g.value.interested),3),e("button",{onClick:t[7]||(t[7]=a=>{o.value.status="CONVERTED",u()}),class:b([o.value.status==="CONVERTED"?"bg-green-600 text-white":"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-300 hover:bg-green-100","text-[10px] px-2 py-0.5 rounded-full font-semibold whitespace-nowrap transition"])},"Jadi "+l(g.value.converted),3),e("button",{onClick:t[8]||(t[8]=a=>{o.value.status="LOST",u()}),class:b([o.value.status==="LOST"?"bg-slate-600 text-white":"bg-slate-100 text-slate-500 dark:bg-white/5 dark:text-slate-400 hover:bg-slate-200","text-[10px] px-2 py-0.5 rounded-full font-semibold whitespace-nowrap transition"])},"Hilang "+l(g.value.lost),3)]),e("div",ke,[e("div",me,[k(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>o.value.search=a),onKeyup:t[10]||(t[10]=re(a=>u(),["enter"])),type:"text",placeholder:"Cari nama/HP...",class:"w-full bg-white dark:bg-[#202c33] border border-slate-300 dark:border-transparent text-sm rounded-lg pl-9 pr-3 py-2 focus:outline-none focus:border-blue-500 dark:focus:bg-[#2a3942] dark:text-white transition shadow-sm placeholder-slate-400"},null,544),[[w,o.value.search]]),t[30]||(t[30]=e("svg",{class:"w-4 h-4 absolute left-3 top-2.5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",ve,[B.value?(i(),n("div",fe,"Memuat...")):M.value.length?v("",!0):(i(),n("div",we,[...t[31]||(t[31]=[e("svg",{class:"w-8 h-8 opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})],-1),x(" Tidak ada leads ",-1)])])),(i(!0),n(I,null,O(M.value,a=>(i(),n("div",{key:a.id,onClick:c=>Q(a),class:"flex items-center gap-3 px-3 py-2.5 cursor-pointer border-b border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition group"},[e("div",{class:b(["w-9 h-9 rounded-full flex items-center justify-center text-xs font-bold shrink-0",S(a.status)])},l((a.customer_name||"?").charAt(0).toUpperCase()),3),e("div",Ce,[e("div",je,[e("span",ze,l(a.customer_name),1),e("span",Ee,l(P(a.created_at)),1)]),e("div",Me,[e("span",Be,l(a.customer_phone||"-"),1),e("span",{class:b(["text-[9px] px-1.5 py-px rounded-full font-semibold shrink-0",S(a.status)])},l(L.value[a.status]||a.status),3)])])],8,ye))),128))])],512),[[H,y.value==="leads"]])]),t[32]||(t[32]=e("div",{id:"panel-chat",class:"flex-1 flex flex-col h-full bg-[#f0f2f5] dark:bg-darkbg relative mobile-hidden w-full overflow-hidden transition-colors"},[e("div",{id:"empty-state",class:"absolute inset-0 flex flex-col items-center justify-center bg-[#f8fafc] dark:bg-darkbg z-0 overflow-hidden group select-none transition-opacity duration-300"},[e("div",{class:"absolute inset-0 bg-[url('/assets/favicon.svg')] bg-repeat opacity-[0.05] dark:opacity-[0.02] grayscale animate-[pulse_8s_infinite] pointer-events-none"}),e("div",{class:"relative z-10 text-center p-10 animate-in fade-in zoom-in duration-700"},[e("div",{class:"relative inline-block mb-8 group-hover:scale-110 transition-transform duration-500"},[e("div",{class:"absolute inset-0 bg-blue-200 dark:bg-green-900/30 blur-3xl opacity-40 animate-pulse rounded-full"}),e("img",{src:"/assets/favicon.svg",alt:"Empty",class:"w-24 h-24 opacity-90 animate-[bounce_3s_infinite] drop-shadow-xl relative z-10 filter drop-shadow-md"})]),e("h3",{class:"text-3xl font-black text-slate-800 dark:text-slate-200 mb-3 tracking-tight"},[x("Halo, "),e("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-blue-800 dark:from-green-400 dark:to-emerald-600"},[e("span",{id:"adm-first-name"},"Admin")]),x("!")]),e("p",{class:"text-slate-500 dark:text-slate-400 text-sm max-w-xs mx-auto leading-relaxed mb-8"},"Pilih percakapan dari panel kiri."),e("button",{onclick:"openGame()",class:"group relative px-6 py-3 bg-white dark:bg-[#233138] border border-slate-200 dark:border-white/10 rounded-full text-xs font-bold text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-green-400 hover:border-blue-300 dark:hover:border-green-500/50 shadow-sm hover:shadow-md transition-all flex items-center gap-2 mx-auto overflow-hidden"},[e("span",{class:"absolute inset-0 bg-blue-50 dark:bg-green-900/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),e("span",{class:"relative z-10 text-lg"},"ðŸ"),e("span",{class:"relative z-10"},"Gabut? Main Snake")])])]),e("div",{id:"game-interface",class:"hidden absolute inset-0 flex-col bg-[#efeae2] dark:bg-[#0b141a] z-10 transition-colors duration-300"},[e("div",{class:"h-16 border-b border-slate-200 dark:border-white/10 bg-white dark:bg-[#202c33] flex items-center justify-between px-6 shrink-0 shadow-sm relative z-20 transition-colors"},[e("div",{class:"flex items-center gap-4"},[e("div",{class:"p-2 bg-green-100 dark:bg-green-500/10 rounded-lg border border-green-200 dark:border-green-500/20 text-2xl animate-pulse"},"ðŸ"),e("div",null,[e("h3",{class:"font-black text-slate-800 dark:text-white text-lg tracking-wider"},"SNAKE GAME"),e("p",{class:"text-[10px] text-slate-500 dark:text-slate-400 font-mono"},"Keyboard: Arrow Keys / WASD")])]),e("div",{class:"flex items-center gap-4"},[e("div",{class:"hidden sm:block text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider text-right"},[x("High Score"),e("br"),e("span",{id:"high-score-display",class:"text-orange-500 text-sm"},"0")]),e("div",{class:"h-8 w-px bg-slate-200 dark:bg-white/10 mx-1 hidden sm:block"}),e("div",{class:"bg-slate-100 dark:bg-[#111b21] px-4 py-1.5 rounded-full border border-slate-200 dark:border-white/5 text-slate-600 dark:text-slate-300 font-mono text-sm shadow-inner transition-colors"},[x("Score: "),e("span",{id:"game-score",class:"text-blue-600 dark:text-green-400 font-bold text-lg ml-1"},"0")]),e("button",{onclick:"closeGame()",class:"p-2 bg-slate-50 dark:bg-white/5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full text-slate-400 hover:text-red-500 transition border border-slate-200 dark:border-white/5",title:"Tutup Game"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])])]),e("div",{class:"flex-1 flex items-center justify-center relative bg-[#efeae2] dark:bg-[#0b141a] overflow-hidden transition-colors"},[e("div",{class:"absolute inset-0 opacity-[0.4] dark:opacity-[0.05]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"20px 20px"}}),e("canvas",{id:"gameCanvas",width:"600",height:"400",class:"bg-[#efeae2] dark:bg-[#0b141a] border-4 border-white dark:border-[#202c33] rounded-xl shadow-2xl relative z-10 max-w-[95%] max-h-[90%] outline-none transition-all duration-300"}),e("div",{id:"game-over-msg",class:"hidden absolute inset-0 z-20 bg-white/90 dark:bg-black/90 backdrop-blur-sm flex flex-col items-center justify-center text-slate-800 dark:text-white animate-in fade-in zoom-in duration-300 p-6"},[e("div",{class:"mb-6 relative animate-shatter"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128",class:"w-24 h-24"},[e("defs",null,[e("mask",{id:"starHoleRed"},[e("rect",{x:"0",y:"0",width:"128",height:"128",fill:"white"}),e("path",{d:"M64 36 C78 50, 78 50, 92 64 C78 78, 78 78, 64 92 C50 78, 50 78, 36 64 C50 50, 50 50, 64 36 Z",fill:"black"})])]),e("path",{d:"M64 0 C96 32, 96 32, 128 64 C96 96, 96 96, 64 128 C32 96, 32 96, 0 64 C32 32, 32 32, 64 0 Z",fill:"currentColor",mask:"url(#starHoleRed)"})])]),e("h3",{class:"text-2xl font-black mb-1 tracking-widest text-red-500"},"GAME OVER"),e("div",{class:"text-center mb-6"},[e("span",{class:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider"},"Skor Kamu"),e("div",{id:"final-score",class:"font-black text-4xl text-slate-900 dark:text-white"},"0"),e("div",{id:"new-record-msg",class:"hidden mt-1 text-[10px] font-bold text-orange-500 uppercase tracking-widest animate-pulse"},"ðŸ† Rekor Pribadi Baru!")]),e("div",{class:"w-full max-w-[280px] bg-slate-100 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10 p-3 mb-6"},[e("h4",{class:"text-[10px] uppercase font-bold text-slate-400 mb-2 text-center tracking-widest"},"ðŸ‘‘ Top 5 Admin"),e("div",{id:"leaderboard-list",class:"space-y-1.5"},[e("div",{class:"text-center text-[10px] text-slate-400 animate-pulse"},"Memuat ranking...")])]),e("div",{class:"flex gap-3 w-full max-w-[280px]"},[e("button",{onclick:"closeGame()",class:"flex-1 py-3 rounded-xl border border-slate-300 dark:border-white/20 bg-white dark:bg-white/5 hover:bg-slate-100 dark:hover:bg-white/10 text-xs font-bold transition text-slate-600 dark:text-slate-200"},"Keluar"),e("button",{onclick:"startGame()",class:"flex-1 py-3 rounded-xl bg-blue-600 dark:bg-green-600 hover:bg-blue-500 dark:hover:bg-green-500 text-white text-xs font-bold shadow-lg transition transform hover:scale-105 active:scale-95"},"Main Lagi (Spasi)")])])])]),e("div",{id:"chat-interface",class:"hidden w-full h-full bg-[#efeae2] dark:bg-darkbg z-20 relative"},[e("div",{class:"flex-1 flex flex-col min-w-0 h-full relative border-r border-slate-200 dark:border-white/10"},[e("div",{class:"absolute top-0 left-0 right-0 h-16 border-b border-slate-200 dark:border-white/10 bg-white/95 dark:bg-darkpanel/95 backdrop-blur-md flex items-center justify-between px-3 md:px-4 z-50 shadow-sm transition-colors"},[e("div",{class:"flex items-center gap-3 overflow-hidden"},[e("button",{onclick:"closeChatMobile()",class:"md:hidden p-2 -ml-2 text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-white transition"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})])]),e("div",{id:"h-avatar",class:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 dark:from-green-600 dark:to-emerald-700 flex items-center justify-center font-bold text-white shadow-md shrink-0 text-sm border border-white dark:border-white/10"},"U"),e("div",{class:"min-w-0 flex flex-col justify-center"},[e("div",{class:"flex items-center gap-2 cursor-pointer group",onclick:"toggleUserSidebar()",title:"Lihat Detail"},[e("h3",{id:"h-name",class:"info-name font-bold text-slate-800 dark:text-white text-sm truncate leading-none max-w-[150px] md:max-w-[200px] group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"},"User"),e("svg",{class:"w-3 h-3 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity transform group-hover:rotate-90 duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])]),e("div",{class:"flex items-center gap-2 mt-0.5"},[e("div",{id:"h-status",class:"text-[11px] text-slate-500 dark:text-slate-400 truncate"},"Loading..."),e("span",{class:"text-slate-300 dark:text-slate-600 text-[10px]"},"|"),e("span",{id:"h-id",class:"text-[11px] font-mono text-blue-600 dark:text-green-400 bg-blue-50 dark:bg-white/5 px-1 rounded"},"#ID")])])]),e("div",{class:"flex items-center gap-1"},[e("a",{id:"wa-link",href:"#",target:"_blank",class:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-white/10 rounded-lg transition",title:"WhatsApp"},[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.891-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"})])]),e("div",{class:"relative",id:"dropdown-chat-container"},[e("button",{onclick:"toggleMenu()",class:"p-2 text-slate-500 dark:text-slate-400 hover:text-blue-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-white/10 rounded-lg transition"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])]),e("div",{id:"chat-menu",class:"hidden absolute right-0 top-full mt-2 w-56 bg-white dark:bg-[#233138] border border-slate-200 dark:border-white/10 rounded-xl shadow-xl py-1 z-50 animate-zoomIn ring-1 ring-black/5"},[e("a",{href:"#",id:"menu-toggle-session",onclick:"openEndModal()",class:"block px-4 py-2.5 text-sm hover:bg-green-50 dark:hover:bg-white/5 text-green-600 dark:text-green-400 border-b border-slate-100 dark:border-white/10 font-bold"},"Selesaikan Sesi"),e("a",{href:"#",onclick:"toggleUserSidebar()",class:"block px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-white/5 text-slate-700 dark:text-slate-200 border-b border-slate-100 dark:border-white/10"},"Detail Pelanggan"),e("a",{href:"#",onclick:"openEditUser()",class:"block px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-white/5 text-blue-600 dark:text-blue-400"},"Edit Data"),e("a",{href:"#",onclick:"deleteSession()",class:"block px-4 py-2.5 text-sm hover:bg-red-50 dark:hover:bg-white/5 text-red-600 dark:text-red-400 border-t border-slate-100 dark:border-white/10"},"Hapus Chat")])])])]),e("div",{id:"messages",class:"flex-1 overflow-y-auto pt-24 md:pt-28 p-4 md:p-5 custom-scrollbar space-y-3 bg-[#efeae2] dark:bg-[#0b141a] bg-opacity-30 dark:bg-opacity-100 transition-colors",style:{"background-image":"radial-gradient(#d1d5db 1px, transparent 1px)","background-size":"20px 20px"}}),e("div",{class:"flex-none px-3 md:px-4 pt-2 pb-3 md:pt-2.5 md:pb-4 bg-[#f0f2f5] dark:bg-[#202c33] border-t border-slate-200/80 dark:border-white/[0.06] relative z-20 shrink-0 pb-safe transition-colors"},[e("div",{id:"footer-active",class:"flex items-end gap-2 w-full"},[e("div",{class:"relative flex-shrink-0",id:"dropdown-tpl-container"},[e("button",{onclick:"toggleTpl()",class:"h-10 w-10 flex items-center justify-center text-slate-500 dark:text-slate-400 rounded-full hover:bg-black/5 dark:hover:bg-white/5 hover:text-slate-700 dark:hover:text-slate-200 transition-colors mb-0.5",title:"Template (/)"},[e("svg",{class:"w-[22px] h-[22px]",fill:"none",stroke:"currentColor","stroke-width":"1.8",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),e("div",{id:"tpl-popup",class:"hidden absolute bottom-full left-0 mb-3 w-64 bg-white dark:bg-[#233138] border border-slate-200 dark:border-white/10 rounded-xl shadow-2xl overflow-hidden z-50 flex flex-col max-h-60 animate-zoomIn ring-1 ring-black/5"},[e("div",{class:"bg-slate-50 dark:bg-white/5 px-3 py-2 border-b border-slate-200 dark:border-white/10 flex justify-between items-center"},[e("span",{class:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Balas Cepat (/)"),e("button",{onclick:"openTplManager()",class:"text-[10px] text-blue-600 dark:text-blue-400 font-bold"},"ATUR")]),e("div",{id:"tpl-list",class:"overflow-y-auto custom-scrollbar flex-1 dark:text-slate-200"})])]),e("div",{class:"relative flex-1 flex items-end bg-white dark:bg-[#2a3942] rounded-2xl border border-slate-200/70 dark:border-white/[0.06] focus-within:border-blue-400/50 dark:focus-within:border-green-500/40 transition-colors min-h-[44px]"},[e("input",{type:"file",id:"admin-img-input",accept:"image/*",style:{display:"none"},onchange:"sendImageAdmin()"}),e("button",{onclick:"document.getElementById('admin-img-input').click()",class:"flex-shrink-0 p-2 ml-1 mb-1 text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-green-400 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors",title:"Upload gambar"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"1.8",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})])]),e("textarea",{id:"msg-input",class:"flex-1 min-h-[44px] max-h-[120px] bg-transparent text-slate-800 dark:text-white text-[15px] leading-[22px] pl-1 pr-3 py-[11px] border-none ring-0 focus:ring-0 focus:outline-none focus:border-none outline-none shadow-none resize-none custom-scrollbar placeholder-slate-400 dark:placeholder-slate-500",rows:"1",placeholder:"Ketik pesan...",style:{border:"none !important","box-shadow":"none !important"}})]),e("button",{onclick:"sendMessage()",class:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-blue-500 dark:bg-[#00a884] text-white rounded-full hover:bg-blue-600 dark:hover:bg-[#06cf9c] active:scale-95 transition-all mb-0.5 shadow-sm",title:"Kirim"},[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})])])]),e("div",{id:"footer-locked",class:"hidden w-full items-center justify-between bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl p-3 px-4 border-dashed"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-2 h-2 rounded-full bg-green-500"}),e("span",{class:"text-xs text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider"},"Tiket Selesai")]),e("button",{onclick:"reopenSession()",class:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#202c33] hover:bg-slate-50 dark:hover:bg-[#2a3942] text-slate-600 dark:text-white text-xs font-bold rounded-lg transition border border-slate-300 dark:border-white/10 shadow-sm"},"Buka Kembali")])])]),e("div",{id:"user-sidebar-backdrop",onclick:"toggleUserSidebar()",class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[55] hidden lg:hidden transition-opacity"}),e("div",{id:"user-detail-sidebar",class:"fixed inset-y-0 right-0 z-[60] w-80 bg-white dark:bg-darkpanel border-l border-slate-200 dark:border-white/10 transform transition-transform duration-300 translate-x-full lg:translate-x-0 lg:static lg:flex flex-col flex-shrink-0 overflow-y-auto custom-scrollbar shadow-2xl lg:shadow-sm"},[e("div",{class:"flex lg:hidden items-center justify-between p-4 border-b border-slate-100 dark:border-white/10"},[e("h3",{class:"font-bold text-slate-800 dark:text-white"},"Info Pelanggan"),e("button",{onclick:"toggleUserSidebar()",class:"p-2 bg-slate-100 dark:bg-white/10 rounded-full text-slate-500 dark:text-white"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])]),e("div",{class:"p-5 border-b border-slate-100 dark:border-white/10"},[e("div",{class:"flex justify-between items-center mb-4"},[e("h4",{class:"text-[10px] uppercase font-bold text-slate-400 tracking-widest"},"Detail Pelanggan"),e("button",{onclick:"openEditUser()",class:"text-blue-600 dark:text-blue-400 hover:text-blue-800 transition p-1.5 bg-blue-50 dark:bg-white/5 rounded-lg hover:bg-blue-100 text-xs"},[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})])])]),e("div",{class:"bg-slate-50 dark:bg-[#202c33] rounded-xl border border-slate-200 dark:border-white/5 p-4 space-y-5"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"info-name font-bold text-slate-800 dark:text-white text-sm leading-tight"},"-")]),e("div",{class:"space-y-4"},[e("div",null,[e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-1"},"WhatsApp"),e("div",{class:"info-phone text-sm font-mono text-blue-600 dark:text-green-400 select-all border-b border-dashed border-slate-200 dark:border-white/10 pb-1 cursor-pointer"},"-")]),e("div",null,[e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-1"},"Lokasi & IP"),e("div",{class:"info-location text-sm text-slate-600 dark:text-slate-300 leading-snug mb-1"},"-"),e("div",{class:"info-ip text-[10px] font-mono text-slate-500 dark:text-slate-400 bg-white dark:bg-black/20 inline-block px-1.5 py-0.5 rounded border border-slate-200 dark:border-white/10"},"-")]),e("div",null,[e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-1"},"Alamat"),e("div",{class:"info-address text-sm text-slate-600 dark:text-slate-300 leading-relaxed bg-white dark:bg-black/20 p-2 rounded border border-slate-200 dark:border-white/10"},"-")])])])]),e("div",{class:"flex-1 p-5 flex flex-col min-h-[150px]"},[e("div",{class:"flex flex-col h-full bg-slate-50 dark:bg-[#202c33] rounded-xl border border-slate-200 dark:border-white/10 p-1 hover:border-slate-300 dark:hover:border-white/20 transition relative focus-within:border-blue-200 dark:focus-within:border-green-700"},[e("label",{class:"px-3 pt-3 pb-1 text-[10px] uppercase font-bold text-slate-400 tracking-widest flex justify-between items-center"},[x("Catatan Internal "),e("span",{id:"note-status",class:"text-[9px] font-normal text-slate-400 transition-colors opacity-0"},"Saved")]),e("textarea",{id:"customer-note",class:"flex-1 w-full bg-transparent border-0 text-sm text-slate-700 dark:text-white focus:ring-0 p-3 pt-1 resize-none custom-scrollbar placeholder-slate-400 leading-relaxed",placeholder:"Catatan teknis (admin only)..."})])]),e("div",{class:"p-5 border-t border-slate-100 dark:border-white/10 mt-auto bg-white dark:bg-darkpanel"},[e("h4",{class:"text-[10px] uppercase font-bold text-slate-400 mb-3 tracking-widest"},"Aksi Cepat"),e("div",{class:"grid grid-cols-2 gap-3"},[e("button",{id:"btn-end-session",onclick:"openEndModal()",class:"py-3 px-3 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold rounded-xl border border-green-200 dark:border-green-900/50 flex items-center justify-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),x(" Selesai")]),e("button",{id:"btn-reopen-session",onclick:"reopenSession()",class:"hidden py-3 px-3 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 text-blue-700 dark:text-blue-400 text-xs font-bold rounded-xl border border-blue-200 dark:border-blue-900/50 flex items-center justify-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})]),x(" Proses")]),e("button",{onclick:"deleteSession()",class:"py-3 px-3 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-700 dark:text-red-400 text-xs font-bold rounded-xl border border-red-200 dark:border-red-900/50 flex items-center justify-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),x(" Hapus")])])])])])],-1))]),t[34]||(t[34]=e("div",{id:"modal-edit-user",class:"hidden fixed inset-0 z-[70] flex items-center justify-center p-4"},[e("div",{class:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm z-10 transition-opacity",onclick:"document.getElementById('modal-edit-user').classList.add('hidden')"}),e("div",{class:"bg-white dark:bg-[#233138] border border-slate-200 dark:border-white/10 w-full max-w-sm rounded-2xl p-6 shadow-2xl relative z-20 animate-zoomIn"},[e("h3",{class:"font-bold text-slate-800 dark:text-white mb-5 flex items-center gap-2 text-lg"},"âœï¸ Edit Pelanggan"),e("div",{class:"space-y-4"},[e("input",{type:"hidden",id:"edit-visit-id"}),e("div",null,[e("label",{class:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Nama"),e("input",{type:"text",id:"edit-name",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2.5 text-slate-800 dark:text-white outline-none focus:border-blue-500"})]),e("div",null,[e("label",{class:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Nomor HP"),e("input",{type:"text",id:"edit-phone",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2.5 text-slate-800 dark:text-white outline-none focus:border-blue-500"})]),e("div",null,[e("label",{class:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Alamat"),e("textarea",{id:"edit-addr",rows:"3",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2.5 text-slate-800 dark:text-white outline-none resize-none"})])]),e("div",{class:"grid grid-cols-2 gap-3 pt-6"},[e("button",{onclick:"document.getElementById('modal-edit-user').classList.add('hidden')",class:"py-2.5 bg-white dark:bg-transparent text-slate-600 dark:text-slate-300 rounded-xl hover:bg-slate-50 border border-slate-300 dark:border-white/20"},"Batal"),e("button",{onclick:"saveEditUser()",class:"py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 shadow-md"},"Simpan")])])],-1)),t[35]||(t[35]=e("div",{id:"img-viewer",class:"fixed inset-0 z-[100] bg-black/90 hidden flex flex-col justify-center items-center p-2 backdrop-blur-sm transition-opacity duration-300"},[e("div",{class:"absolute top-4 right-4 flex gap-4 z-20"},[e("a",{id:"img-download-btn",href:"#",download:"",class:"text-slate-300 hover:text-white p-3 bg-white/10 rounded-full hover:bg-white/20"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})])]),e("button",{onclick:"closeImageViewer()",class:"text-slate-300 hover:text-red-500 p-3 bg-white/10 rounded-full hover:bg-white/20"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})])])]),e("img",{id:"img-viewer-src",src:"",class:"max-w-full max-h-[90dvh] rounded-lg shadow-2xl object-contain animate-zoomIn border border-white/10"}),e("div",{onclick:"closeImageViewer()",class:"absolute inset-0 -z-10 cursor-zoom-out"})],-1)),t[36]||(t[36]=e("div",{id:"modal-tpl-manager",class:"hidden fixed inset-0 z-[60] flex items-center justify-center p-4"},[e("div",{class:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm z-10",onclick:"document.getElementById('modal-tpl-manager').classList.add('hidden')"}),e("div",{class:"bg-white dark:bg-[#233138] border dark:border-white/10 w-full max-w-md rounded-2xl p-0 shadow-2xl relative flex flex-col max-h-[85vh] z-20"},[e("div",{class:"p-5 border-b border-slate-100 dark:border-white/10 flex justify-between items-center shrink-0"},[e("h3",{class:"font-bold text-slate-800 dark:text-white flex items-center gap-2"},"âš¡ Atur Balas Cepat"),e("button",{onclick:"document.getElementById('modal-tpl-manager').classList.add('hidden')",class:"text-slate-400 hover:text-slate-600"},"âœ•")]),e("div",{id:"manager-list",class:"p-5 overflow-y-auto custom-scrollbar space-y-3 flex-1 dark:text-white"}),e("div",{class:"p-5 border-t border-slate-100 dark:border-white/10 bg-slate-50 dark:bg-white/5 shrink-0"},[e("button",{onclick:"openFormTpl()",class:"w-full py-3 bg-blue-600 text-white font-bold rounded-xl text-sm flex items-center justify-center gap-2"},"Tambah Template Baru")])])],-1)),t[37]||(t[37]=e("div",{id:"modal-form-tpl",class:"hidden fixed inset-0 z-[70] flex items-center justify-center p-4"},[e("div",{class:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm z-10",onclick:"document.getElementById('modal-form-tpl').classList.add('hidden')"}),e("div",{class:"bg-white dark:bg-[#233138] border dark:border-white/10 w-full max-w-sm rounded-2xl p-6 shadow-2xl relative z-20"},[e("h3",{class:"font-bold text-slate-800 dark:text-white mb-4"},"Tambah Template"),e("div",{class:"space-y-4"},[e("div",null,[e("label",{class:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Judul (/Slash)"),e("input",{type:"text",id:"tpl-label",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-slate-800 dark:text-white outline-none"})]),e("div",null,[e("label",{class:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Isi Pesan"),e("textarea",{id:"tpl-msg",rows:"4",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-slate-800 dark:text-white outline-none resize-none"})])]),e("div",{class:"grid grid-cols-2 gap-3 pt-4"},[e("button",{onclick:"document.getElementById('modal-form-tpl').classList.add('hidden'); document.getElementById('modal-tpl-manager').classList.remove('hidden');",class:"py-2.5 bg-white dark:bg-transparent text-slate-600 dark:text-slate-300 rounded-xl border border-slate-300 dark:border-white/20"},"Batal"),e("button",{onclick:"saveTemplate()",class:"py-2.5 bg-green-600 text-white rounded-xl"},"Simpan")])])],-1)),t[38]||(t[38]=e("div",{id:"modal-admin-profile",class:"hidden fixed inset-0 z-[80] flex items-center justify-center p-4"},[e("div",{class:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm z-10",onclick:"document.getElementById('modal-admin-profile').classList.add('hidden')"}),e("div",{class:"bg-white dark:bg-[#233138] border dark:border-white/10 w-full max-w-sm rounded-2xl p-6 shadow-2xl relative z-20"},[e("h3",{class:"font-bold text-slate-800 dark:text-white mb-5"},"Pengaturan Profil"),e("div",{class:"space-y-4"},[e("div",null,[e("label",{class:"text-xs text-slate-500 uppercase font-bold mb-1 block"},"Nama"),e("input",{type:"text",id:"adm-name",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2.5 text-slate-800 dark:text-white outline-none"})]),e("div",null,[e("label",{class:"text-xs text-slate-500 uppercase font-bold mb-1 block"},"Username"),e("input",{type:"text",id:"adm-username",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2.5 text-slate-800 dark:text-white outline-none"})]),e("div",null,[e("label",{class:"text-xs text-yellow-600 uppercase font-bold mb-1 block"},"Password Baru"),e("input",{type:"password",id:"adm-password",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2.5 text-slate-800 dark:text-white outline-none"})])]),e("div",{class:"grid grid-cols-2 gap-3 pt-6"},[e("button",{onclick:"document.getElementById('modal-admin-profile').classList.add('hidden')",class:"py-2.5 bg-white dark:bg-transparent text-slate-600 dark:text-slate-300 rounded-xl border border-slate-300 dark:border-white/20"},"Batal"),e("button",{onclick:"saveAdminProfile()",class:"py-2.5 bg-blue-600 text-white rounded-xl"},"Simpan")])])],-1)),t[39]||(t[39]=e("div",{id:"modal-settings",class:"modal-overlay"},[e("div",{class:"modal-box dark:bg-[#233138] dark:text-white"},[e("button",{class:"btn-close-modal",onclick:"document.getElementById('modal-settings').style.display='none'"},"Ã—"),e("h3",{style:{"margin-top":"0","margin-bottom":"20px",color:"#0f172a"},class:"dark:text-white"},"Pengaturan Chat & WA"),e("div",{class:"form-group"},[e("label",{class:"form-label dark:text-slate-300"},"Mode Operasional:"),e("select",{id:"set-mode",class:"form-input dark:bg-white/5 dark:border-white/10 dark:text-white",onchange:"toggleScheduleInput()"},[e("option",{value:"manual_on"},"ðŸŸ¢ Selalu ONLINE (Chat Lokal)"),e("option",{value:"manual_off"},"ðŸ”´ Selalu OFFLINE (Redirect WA)"),e("option",{value:"scheduled"},"ðŸ•’ Jadwal Otomatis (Jam Kerja)")])]),e("div",{id:"box-schedule",style:{display:"none",background:"#f8fafc",padding:"15px","border-radius":"8px",border:"1px dashed #94a3b8","margin-bottom":"15px"},class:"dark:bg-white/5 dark:border-white/20"},[e("div",{style:{display:"flex",gap:"10px"}},[e("div",{style:{flex:"1"}},[e("label",{class:"form-label dark:text-slate-300",style:{"font-size":"0.8rem"}},"Buka:"),e("input",{type:"time",id:"set-start",class:"form-input dark:bg-black/20 dark:border-white/10 dark:text-white"})]),e("div",{style:{flex:"1"}},[e("label",{class:"form-label dark:text-slate-300",style:{"font-size":"0.8rem"}},"Tutup:"),e("input",{type:"time",id:"set-end",class:"form-input dark:bg-black/20 dark:border-white/10 dark:text-white"})])]),e("p",{style:{"font-size":"0.75rem",color:"#64748b",margin:"8px 0 0"},class:"dark:text-slate-400"},"Di luar jam ini, pelanggan diarahkan ke WA.")]),e("div",{class:"form-group"},[e("label",{class:"form-label dark:text-slate-300"},"Nomor WhatsApp Admin:"),e("input",{type:"text",id:"set-wa",class:"form-input dark:bg-white/5 dark:border-white/10 dark:text-white",placeholder:"Contoh: 08123456789"})]),e("div",{class:"form-group"},[e("label",{class:"form-label dark:text-slate-300"},"Pesan Otomatis WA:"),e("textarea",{id:"set-msg",rows:"3",class:"form-input dark:bg-white/5 dark:border-white/10 dark:text-white",placeholder:"Halo Admin..."})]),e("button",{onclick:"saveSettings()",class:"btn-save hover:bg-blue-700"},"Simpan Perubahan")])],-1))]),m.value&&s.value?(i(),n("div",Le,[e("div",{class:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:t[11]||(t[11]=a=>m.value=!1)}),e("div",Se,[e("div",Ae,[e("div",_e,[e("div",{class:b(["w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",S(s.value.status)])},l((s.value.customer_name||"?").charAt(0).toUpperCase()),3),e("div",null,[e("h3",Te,l(s.value.customer_name),1),e("span",{class:b(["text-[10px] px-1.5 py-px rounded-full font-semibold",S(s.value.status)])},l(L.value[s.value.status]||s.value.status),3)])]),e("button",{onClick:t[12]||(t[12]=a=>m.value=!1),class:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-white rounded-lg hover:bg-slate-100 dark:hover:bg-white/10 transition"},[...t[40]||(t[40]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ie,[e("div",null,[t[41]||(t[41]=e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-0.5"},"WhatsApp",-1)),e("a",{href:"https://wa.me/"+s.value.customer_phone,target:"_blank",class:"text-sm text-green-600 dark:text-green-400 font-mono hover:underline"},l(s.value.customer_phone||"-"),9,Ne)]),s.value.customer_address?(i(),n("div",$e,[t[42]||(t[42]=e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-0.5"},"Alamat",-1)),e("div",Pe,l(s.value.customer_address),1)])):v("",!0),e("div",De,[s.value.source?(i(),n("div",Ue,[t[43]||(t[43]=e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-0.5"},"Sumber",-1)),e("div",Ve,l(s.value.source),1)])):v("",!0),e("div",null,[t[44]||(t[44]=e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-0.5"},"Ditambahkan",-1)),e("div",He,l(P(s.value.created_at)),1)])]),s.value.notes?(i(),n("div",Oe,[t[45]||(t[45]=e("div",{class:"text-[10px] text-slate-400 font-bold uppercase mb-0.5"},"Catatan",-1)),e("div",Re,l(s.value.notes),1)])):v("",!0)]),e("div",We,[e("button",{onClick:t[13]||(t[13]=a=>$(s.value)),class:"py-2 text-xs font-bold rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 border border-blue-200 dark:border-blue-900/50 transition"},"Edit"),s.value.status!=="CONVERTED"?(i(),n("button",{key:0,onClick:t[14]||(t[14]=a=>q(s.value)),class:"py-2 text-xs font-bold rounded-lg bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30 border border-green-200 dark:border-green-900/50 transition"},"Konversi")):v("",!0),e("button",{onClick:t[15]||(t[15]=a=>Z(s.value)),class:"py-2 text-xs font-bold rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 border border-red-200 dark:border-red-900/50 transition"},"Hapus")])])])):v("",!0),C.value?(i(),n("div",Ke,[e("div",{class:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:t[16]||(t[16]=a=>C.value=!1)}),e("div",Fe,[e("h3",Ge,l(j.value?"Edit Lead":"Tambah Lead Baru"),1),e("div",Je,[e("div",null,[t[46]||(t[46]=e("label",{class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Nama *",-1)),k(e("input",{"onUpdate:modelValue":t[17]||(t[17]=a=>d.value.customer_name=a),type:"text",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-sm text-slate-800 dark:text-white outline-none focus:border-blue-500"},null,512),[[w,d.value.customer_name]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"No. HP *",-1)),k(e("input",{"onUpdate:modelValue":t[18]||(t[18]=a=>d.value.customer_phone=a),type:"text",placeholder:"08xx...",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-sm text-slate-800 dark:text-white outline-none focus:border-blue-500"},null,512),[[w,d.value.customer_phone]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Alamat",-1)),k(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=a=>d.value.customer_address=a),rows:"2",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-sm text-slate-800 dark:text-white outline-none resize-none focus:border-blue-500"},null,512),[[w,d.value.customer_address]])]),e("div",Ze,[e("div",null,[t[49]||(t[49]=e("label",{class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Status",-1)),k(e("select",{"onUpdate:modelValue":t[20]||(t[20]=a=>d.value.status=a),class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-sm text-slate-800 dark:text-white outline-none"},[(i(!0),n(I,null,O(L.value,(a,c)=>(i(),n("option",{key:c,value:c},l(a),9,qe))),128))],512),[[se,d.value.status]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Sumber",-1)),k(e("input",{"onUpdate:modelValue":t[21]||(t[21]=a=>d.value.source=a),type:"text",placeholder:"WA, Chat...",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-sm text-slate-800 dark:text-white outline-none"},null,512),[[w,d.value.source]])])]),e("div",null,[t[51]||(t[51]=e("label",{class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold mb-1 block"},"Catatan",-1)),k(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=a=>d.value.notes=a),rows:"2",class:"w-full bg-slate-50 dark:bg-white/5 border border-slate-300 dark:border-white/10 rounded-lg px-3 py-2 text-sm text-slate-800 dark:text-white outline-none resize-none"},null,512),[[w,d.value.notes]])])]),e("div",Qe,[e("button",{onClick:t[23]||(t[23]=a=>C.value=!1),class:"py-2 bg-white dark:bg-transparent text-slate-600 dark:text-slate-300 rounded-xl border border-slate-300 dark:border-white/20 text-sm font-semibold hover:bg-slate-50"},"Batal"),e("button",{onClick:J,class:"py-2 bg-blue-600 dark:bg-green-600 text-white rounded-xl text-sm font-semibold hover:bg-blue-700 dark:hover:bg-green-700 shadow-md"},"Simpan")])])])):v("",!0)]),_:1})],64))}};export{tt as default};
