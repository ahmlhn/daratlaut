import{C as ka,E as Ot,o as fa,G as _a,D as wa,c as o,a as $t,u as ha,h as Ca,m as Na,b as t,t as i,f as x,x as M,j as r,e as c,d as N,i as dt,n as F,F as E,s as $,w as te,v as _,r as y,y as ne,z as Pa}from"./app-CnOYw52P.js";import{_ as Ta}from"./AdminLayout-ChBTLBzj.js";const Sa={class:"space-y-4 animate-fade-in"},Ea={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 bg-white dark:bg-dark-800 p-5 rounded-xl shadow-card border border-gray-100 dark:border-dark-700"},Oa={class:"flex flex-wrap items-center gap-2"},$a={class:"px-3 py-2 rounded-lg bg-gray-50 dark:bg-dark-700 border border-gray-200 dark:border-dark-600 text-xs"},La={class:"font-semibold text-gray-900 dark:text-white"},Ua={class:"px-3 py-2 rounded-lg bg-gray-50 dark:bg-dark-700 border border-gray-200 dark:border-dark-600 text-xs"},Ma={class:"font-semibold text-gray-900 dark:text-white"},Ia={class:"px-3 py-2 rounded-lg bg-red-50/60 dark:bg-red-900/10 border border-red-200/60 dark:border-red-900/30 text-xs"},Fa={class:"font-semibold text-red-700 dark:text-red-300"},Va={class:"hidden lg:flex items-center gap-2 ml-2"},Aa=["disabled"],Ga={key:0,class:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 text-amber-800 dark:text-amber-200 rounded-xl p-4 text-sm"},ja={key:1,class:"bg-white dark:bg-dark-800 border border-gray-100 dark:border-dark-700 rounded-xl p-6"},Ra={key:2,class:"grid grid-cols-1 lg:grid-cols-12 gap-4"},Da={class:"lg:col-span-8 bg-white dark:bg-dark-800 rounded-xl shadow-card border border-gray-100 dark:border-dark-700 overflow-hidden"},Ba={class:"flex flex-wrap items-center gap-2 p-3 border-b border-gray-100 dark:border-dark-700"},Ka={class:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-300"},Ha={class:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-300"},Ja={class:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-300"},za={class:"ml-auto flex items-center gap-2 lg:hidden"},Wa=["disabled"],Xa={class:"relative"},Za={key:0,class:"absolute inset-0 z-10 flex items-center justify-center p-6 bg-white/85 dark:bg-dark-900/70 backdrop-blur"},Ya={class:"max-w-md text-center"},qa={class:"mt-1 text-xs text-gray-600 dark:text-gray-300"},Qa={key:1,class:"absolute bottom-3 left-3 right-3 lg:right-auto lg:max-w-md bg-white/90 dark:bg-dark-900/80 backdrop-blur border border-gray-200 dark:border-white/10 rounded-xl p-3 text-xs text-gray-700 dark:text-gray-200 shadow-lg"},el={class:"font-semibold"},tl={class:"uppercase"},al={class:"mt-2 flex items-center gap-2"},ll={class:"lg:col-span-4 bg-white dark:bg-dark-800 rounded-xl shadow-card border border-gray-100 dark:border-dark-700 overflow-hidden"},sl={class:"flex items-center gap-1 border-b border-gray-100 dark:border-dark-700 overflow-x-auto"},ol={class:"p-4"},rl={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},nl={key:1,class:"text-sm text-red-600 dark:text-red-300"},il={key:2,class:"space-y-3"},dl={class:"flex items-center justify-between"},ul={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},pl={key:1,class:"space-y-2 max-h-[420px] lg:max-h-[calc(100vh-18rem)] overflow-auto pr-1"},vl=["onClick"],cl={class:"flex items-start justify-between gap-2"},bl={class:"text-sm font-semibold text-gray-900 dark:text-white"},gl={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},yl={key:0},ml={key:1,class:"ml-2"},xl={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},kl={class:"font-medium text-gray-700 dark:text-gray-200"},fl={class:"font-medium text-gray-700 dark:text-gray-200"},_l={class:"flex items-center gap-1 shrink-0"},wl=["onClick"],hl=["onClick"],Cl={key:3,class:"space-y-3"},Nl={class:"flex items-center justify-between"},Pl={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Tl={key:1,class:"space-y-2 max-h-[420px] lg:max-h-[calc(100vh-18rem)] overflow-auto pr-1"},Sl=["onClick"],El={class:"flex items-start justify-between gap-2"},Ol={class:"text-sm font-semibold text-gray-900 dark:text-white"},$l={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Ll={key:0},Ul={key:1,class:"ml-2"},Ml={class:"flex items-center gap-1 shrink-0"},Il=["onClick"],Fl=["onClick"],Vl={key:4,class:"space-y-3"},Al={class:"flex items-center justify-between"},Gl={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},jl={key:1,class:"space-y-2 max-h-[420px] lg:max-h-[calc(100vh-18rem)] overflow-auto pr-1"},Rl={class:"flex items-start justify-between gap-2"},Dl={class:"text-xs font-bold text-indigo-700 dark:text-indigo-300"},Bl={class:"text-sm font-semibold text-gray-900 dark:text-white mt-1"},Kl={class:"text-xs text-gray-500 dark:text-gray-400 mt-1 space-y-0.5"},Hl={class:"font-medium text-gray-700 dark:text-gray-200"},Jl={key:0},zl={class:"font-medium text-gray-700 dark:text-gray-200"},Wl={class:"ml-1"},Xl={class:"flex items-center gap-1 shrink-0"},Zl=["onClick"],Yl=["onClick"],ql={key:5,class:"space-y-3"},Ql={class:"flex items-center justify-between"},es={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ts={key:1,class:"space-y-2 max-h-[420px] lg:max-h-[calc(100vh-18rem)] overflow-auto pr-1"},as={class:"flex items-start justify-between gap-2"},ls={class:"min-w-0"},ss={class:"text-xs font-bold text-amber-700 dark:text-amber-300"},os={key:0,class:"ml-1"},rs={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},ns={class:"font-medium text-gray-700 dark:text-gray-200"},is={class:"text-sm font-semibold text-gray-900 dark:text-white mt-1 truncate"},ds={key:0,class:"text-gray-700 dark:text-gray-200"},us={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"},ps={key:0},vs={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},cs={class:"font-medium text-gray-700 dark:text-gray-200"},bs={class:"flex items-center gap-1 shrink-0"},gs=["onClick"],ys=["onClick"],ms={key:6,class:"space-y-3"},xs={class:"flex items-center justify-between"},ks=["disabled"],fs={class:"space-y-2"},_s=["value"],ws={class:"flex items-center gap-2"},hs=["disabled"],Cs=["disabled"],Ns={key:0,class:"text-xs text-red-600 dark:text-red-300"},Ps={key:0,class:"space-y-3"},Ts={class:"text-xs text-gray-500 dark:text-gray-400"},Ss={class:"font-semibold text-gray-800 dark:text-gray-200"},Es={class:"font-semibold text-gray-800 dark:text-gray-200"},Os={key:0,class:"ml-2 text-amber-700 dark:text-amber-300"},$s={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ls={key:1,class:"space-y-2 max-h-[260px] overflow-auto pr-1"},Us=["onClick"],Ms={class:"text-sm font-semibold text-gray-900 dark:text-white"},Is={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Fs={class:"font-medium text-gray-700 dark:text-gray-200"},Vs={key:2,class:"rounded-xl border border-gray-100 dark:border-dark-700 p-3 bg-gray-50/40 dark:bg-dark-900/30"},As={class:"mt-2 space-y-1 max-h-[220px] overflow-auto pr-1"},Gs={class:"font-medium text-gray-900 dark:text-white"},js={class:"text-gray-600 dark:text-gray-300"},Rs={key:7,class:"space-y-3"},Ds={class:"flex items-center justify-between"},Bs={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ks={key:1,class:"space-y-2 max-h-[420px] lg:max-h-[calc(100vh-18rem)] overflow-auto pr-1"},Hs=["onClick"],Js={class:"flex items-start justify-between gap-2"},zs={class:"text-xs font-bold"},Ws={class:"text-sm font-semibold text-gray-900 dark:text-white mt-1"},Xs={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Zs={key:0,class:"ml-2"},Ys={key:0,class:"text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2"},qs={class:"flex items-center gap-1 shrink-0"},Qs=["onClick"],eo=["onClick"],to={class:"relative pointer-events-auto w-full max-w-2xl bg-white dark:bg-dark-800 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-700 overflow-hidden"},ao={class:"p-4 border-b border-gray-100 dark:border-dark-700 flex items-center justify-between"},lo={class:"font-semibold text-gray-900 dark:text-white"},so={class:"p-4 space-y-3"},oo={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ro={key:0,class:"text-xs text-red-600 mt-1"},no={key:0,class:"text-xs text-red-600 mt-1"},io={key:0,class:"text-xs text-red-600 mt-1"},uo={key:0,class:"text-xs text-red-600 mt-1"},po=["value"],vo=["value"],co={class:"md:col-span-2"},bo={class:"flex items-center gap-2"},go={class:"md:col-span-2"},yo={class:"rounded-xl border border-gray-100 dark:border-dark-700 p-3"},mo={class:"flex items-center justify-between gap-2"},xo={class:"text-xs text-gray-500 dark:text-gray-400"},ko={class:"p-4 border-t border-gray-100 dark:border-dark-700 flex items-center justify-end gap-2"},fo=["disabled"],_o={class:"relative pointer-events-auto w-full max-w-xl bg-white dark:bg-dark-800 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-700 overflow-hidden"},wo={class:"p-4 border-b border-gray-100 dark:border-dark-700 flex items-center justify-between"},ho={class:"font-semibold text-gray-900 dark:text-white"},Co={class:"p-4 space-y-3"},No={key:0,class:"text-xs text-red-600 mt-1"},Po={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},To={key:0,class:"text-xs text-red-600 mt-1"},So={key:0,class:"text-xs text-red-600 mt-1"},Eo={class:"flex items-center gap-2"},Oo={class:"p-4 border-t border-gray-100 dark:border-dark-700 flex items-center justify-end gap-2"},$o=["disabled"],Lo={class:"relative pointer-events-auto w-full max-w-xl bg-white dark:bg-dark-800 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-700 overflow-hidden"},Uo={class:"p-4 border-b border-gray-100 dark:border-dark-700 flex items-center justify-between"},Mo={class:"font-semibold text-gray-900 dark:text-white"},Io={class:"p-4 space-y-3"},Fo=["value"],Vo=["value"],Ao={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Go={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},jo=["disabled"],Ro={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Do={key:0,class:"text-xs text-red-600 mt-1"},Bo={key:0,class:"text-xs text-red-600 mt-1"},Ko={class:"flex items-center gap-2"},Ho={class:"p-4 border-t border-gray-100 dark:border-dark-700 flex items-center justify-end gap-2"},Jo=["disabled"],zo={key:3,class:"fixed inset-0 z-[10000] flex items-center justify-center p-4"},Wo={class:"relative w-full max-w-xl bg-white dark:bg-dark-800 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-700 overflow-hidden"},Xo={class:"p-4 border-b border-gray-100 dark:border-dark-700 flex items-center justify-between"},Zo={class:"font-semibold text-gray-900 dark:text-white"},Yo={class:"p-4 space-y-3"},qo=["value"],Qo={key:0,class:"text-xs text-red-600 mt-1"},er={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},tr={key:0,class:"text-xs text-red-600 mt-1"},ar={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},lr=["value"],sr={class:"p-4 border-t border-gray-100 dark:border-dark-700 flex items-center justify-end gap-2"},or=["disabled"],rr={key:4,class:"fixed inset-0 z-[10000] flex items-center justify-center p-4"},nr={class:"relative w-full max-w-2xl bg-white dark:bg-dark-800 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-700 overflow-hidden"},ir={class:"p-4 border-b border-gray-100 dark:border-dark-700 flex items-center justify-between"},dr={class:"font-semibold text-gray-900 dark:text-white"},ur={class:"p-4 space-y-3"},pr=["value"],vr={key:0,class:"text-xs text-red-600 mt-1"},cr={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},br={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},gr=["value"],yr={key:0,class:"text-xs text-red-600 mt-1"},mr={key:0,class:"text-xs text-red-600 mt-1"},xr={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},kr=["value"],fr={key:1,class:"space-y-3 rounded-xl border border-gray-100 dark:border-dark-700 p-3"},_r={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},wr={class:"flex items-center gap-2"},hr={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Cr={key:1,class:"space-y-2 max-h-[260px] overflow-auto pr-1"},Nr={class:"col-span-7"},Pr=["onUpdate:modelValue"],Tr=["value"],Sr={class:"col-span-3"},Er=["onUpdate:modelValue"],Or={class:"col-span-2 flex items-center justify-end"},$r=["onClick"],Lr={class:"p-4 border-t border-gray-100 dark:border-dark-700 flex items-center justify-end gap-2"},Ur=["disabled"],Vr={__name:"Index",props:{tenantId:{type:Number,default:0},warning:{type:String,default:null},googleMapsApiKey:{type:String,default:""}},setup(Lt){const v=ka("toast"),et=Lt,ut=Pa(),pt=ne(()=>{var l,e;return((e=(l=ut.props.auth)==null?void 0:l.user)==null?void 0:e.permissions)||[]}),Ut=ne(()=>{var l,e;return(((e=(l=ut.props.auth)==null?void 0:l.user)==null?void 0:e.role)||"").toString().toLowerCase().trim()});function Mt(l){const e=(l||"").toString().toLowerCase().trim();return e==="svp lapangan"?"svp_lapangan":e}function je(l){const e=Mt(Ut.value);return["admin","owner"].includes(e)||pt.value.includes("manage fiber")?!0:pt.value.includes(l)}const vt=ne(()=>je("view fiber")),X=ne(()=>je("create fiber")),Z=ne(()=>je("edit fiber")),Y=ne(()=>je("delete fiber")),ke=y(!1),Re=y(""),fe=y({cables:0,points:0,breaks_total:0,breaks_open:0}),R=y([]),D=y([]),_e=y([]),Pe=y([]),De=y([]),O=y("cables"),Te=y(!0),Se=y(!0),Ee=y(!0),q=y(null),A=y(null),Q=y(null),ae=y(null),Be=y([]),ct=ne(()=>{const l=new Set;return(Be.value||[]).forEach(e=>{const n=Number(e);Number.isFinite(n)&&n>0&&l.add(n)}),l});async function j(l,e={}){const n=await fetch(l,{credentials:"same-origin",headers:{Accept:"application/json",...e.headers||{}},...e}),s=await n.text();let d=null;try{d=s?JSON.parse(s):null}catch{d=null}return{ok:n.ok,status:n.status,data:d,text:s}}async function I(){var l,e,n,s,d,p,b,u,w,V,me,re;if(vt.value){ke.value=!0,Re.value="";try{const[L,xe]=await Promise.all([j("/api/v1/fiber/map-data"),j("/api/v1/fiber/summary")]);if(!L.ok){const U=((l=L.data)==null?void 0:l.message)||`Gagal memuat data fiber (HTTP ${L.status}).`;throw new Error(U)}xe.ok?fe.value=((e=xe.data)==null?void 0:e.data)||fe.value:fe.value={cables:0,points:0,breaks_total:0,breaks_open:0},R.value=((s=(n=L.data)==null?void 0:n.data)==null?void 0:s.cables)||[],D.value=((p=(d=L.data)==null?void 0:d.data)==null?void 0:p.points)||[],_e.value=((u=(b=L.data)==null?void 0:b.data)==null?void 0:u.breaks)||[],Pe.value=((V=(w=L.data)==null?void 0:w.data)==null?void 0:V.ports)||[],De.value=((re=(me=L.data)==null?void 0:me.data)==null?void 0:re.links)||[],mt(),Dt()}catch(L){console.error("Fiber: loadAll failed",L),Re.value=L&&L.message?L.message:"Gagal memuat data fiber."}finally{ke.value=!1}}}const tt=y(null);let h=null,B=null,at=new Map,lt=new Map,st=new Map,we={markers:[],polyline:null},bt=!1;const pe=y(""),le=y("roadmap"),Oe={roadmap:{label:"Roadmap",mapTypeId:"roadmap"},satellite:{label:"Satelit",mapTypeId:"satellite"},hybrid:{label:"Hybrid",mapTypeId:"hybrid"}};function It(l){var n;const e=(l||"").toString().trim();return e?(n=window.google)!=null&&n.maps?Promise.resolve():(window.__fiberGoogleMapsPromise||(window.__fiberGoogleMapsPromise=new Promise((s,d)=>{const p=document.createElement("script"),b=new URLSearchParams({key:e,v:"weekly"});p.src=`https://maps.googleapis.com/maps/api/js?${b.toString()}`,p.async=!0,p.defer=!0,p.onload=()=>s(),p.onerror=()=>d(new Error("Gagal memuat Google Maps. Cek API key/koneksi.")),document.head.appendChild(p)})),window.__fiberGoogleMapsPromise):Promise.reject(new Error("Google Maps API key belum di-set."))}function Ft(){var e;if(!h||!((e=window.google)!=null&&e.maps))return;const l=Oe[le.value]||Oe.roadmap;try{h.setMapTypeId(l.mapTypeId)}catch{}}function gt(){var l;try{(we.markers||[]).forEach(e=>{try{e.setMap(null)}catch{}})}catch{}we.markers=[];try{(l=we.polyline)==null||l.setMap(null)}catch{}we.polyline=null}function he(l){try{Array.from(l.values()).forEach(e=>{try{e.setMap(null)}catch{}})}catch{}try{l.clear()}catch{}}function Vt(){var e;if(!((e=window.google)!=null&&e.maps)||!tt.value)return;const l=Oe[le.value]||Oe.roadmap;h=new window.google.maps.Map(tt.value,{center:{lat:-2.5489,lng:118.0149},zoom:5,mapTypeId:l.mapTypeId,clickableIcons:!1,fullscreenControl:!1,streetViewControl:!1,mapTypeControl:!1}),B=new window.google.maps.InfoWindow,h.addListener("click",Gt)}function At(){var l;if(!((l=window.google)!=null&&l.maps)){h=null,B=null;return}try{window.google.maps.event.clearInstanceListeners(h)}catch{}try{B==null||B.close()}catch{}gt(),he(at),he(lt),he(st),h=null,B=null}const T=y(null),K=y(null);function yt(l){const e=Number(l);return Number.isFinite(e)?Math.round(e*1e7)/1e7:null}function Gt(l){if(!(l!=null&&l.latLng))return;const e=yt(l.latLng.lat()),n=yt(l.latLng.lng());if(T.value==="pickPoint"){f.value.latitude=e,f.value.longitude=n,v&&v.success("Lokasi titik dipilih dari peta."),S();return}if(T.value==="pickBreak"){k.value.latitude=e,k.value.longitude=n,v&&v.success("Lokasi putus dipilih dari peta."),S();return}if(T.value==="drawCable"){const s=Array.isArray(m.value.path)?m.value.path:[];s.push({lat:e,lng:n}),m.value.path=s,de()}}function S(l={}){const e=(l==null?void 0:l.reopen)!==!1,n=e?K.value:null;T.value=null,K.value=null,e&&n&&(n==="cable"&&(H.value=!0),n==="point"&&(z.value=!0),n==="break"&&(W.value=!0)),de()}function jt(l){const e=document.createElement("div");return e.className="text-sm",(l||[]).forEach(n=>{const s=document.createElement("div");s.textContent=String(n??""),e.appendChild(s)}),e}function ot(l,e,n=null){if(!h||!B)return;const s=(e||[]).filter(Boolean);if(!(s.length<1)){try{B.close()}catch{}B.setContent(jt(s));try{if(n){B.open({map:h,anchor:n});return}l&&B.setPosition(l),B.open({map:h})}catch{}}}function ee(l){const e=Number(l||0);if(!e)return null;const n=(D.value||[]).find(s=>Number(s==null?void 0:s.id)===e);return n?String(n.name||""):null}function ie(l){const e=Number(l||0);if(!e)return null;const n=(R.value||[]).find(s=>Number(s==null?void 0:s.id)===e);return n?String(n.name||""):null}function Rt(l){const e=String(l||"").toUpperCase();return e==="OPEN"?{stroke:"#dc2626",fill:"#ef4444"}:e==="IN_PROGRESS"?{stroke:"#b45309",fill:"#f59e0b"}:e==="FIXED"?{stroke:"#047857",fill:"#10b981"}:{stroke:"#64748b",fill:"#94a3b8"}}function mt(){var l;!h||!((l=window.google)!=null&&l.maps)||($e(),rt(),nt(),de())}function $e(){var l;!h||!((l=window.google)!=null&&l.maps)||(he(at),Te.value&&(R.value||[]).forEach(e=>{const n=Array.isArray(e==null?void 0:e.path)?e.path:null;if(!n||n.length<2)return;const s=n.map(U=>({lat:Number(U==null?void 0:U.lat),lng:Number(U==null?void 0:U.lng)})).filter(U=>Number.isFinite(U.lat)&&Number.isFinite(U.lng));if(s.length<2)return;const d=Number(e==null?void 0:e.id)===Number(q.value||0),p=ct.value.size>0,b=ct.value.has(Number(e==null?void 0:e.id)),u=((e==null?void 0:e.map_color)||"#2563eb").toString(),w=d?6:4,V=b?Math.max(w,6):w,me=p?b?1:.25:.9,re=new window.google.maps.Polyline({path:s,strokeColor:u,strokeWeight:V,strokeOpacity:me,clickable:!0});re.setMap(h),at.set(Number(e==null?void 0:e.id)||0,re);const L=ee(e==null?void 0:e.from_point_id)||"-",xe=ee(e==null?void 0:e.to_point_id)||"-";re.addListener("click",U=>{q.value=e.id,A.value=null,Q.value=null,O.value="cables",$e(),ot((U==null?void 0:U.latLng)||null,[`Kabel: ${(e==null?void 0:e.name)||"-"}`,e!=null&&e.code?`Kode: ${e.code}`:null,e!=null&&e.cable_type?`Tipe: ${e.cable_type}`:null,e!=null&&e.core_count?`Core: ${e.core_count}`:null,`Dari: ${L}`,`Ke: ${xe}`])})}))}function rt(){var l;!h||!((l=window.google)!=null&&l.maps)||(he(lt),Se.value&&(D.value||[]).forEach(e=>{const n=Number(e==null?void 0:e.latitude),s=Number(e==null?void 0:e.longitude);if(!Number.isFinite(n)||!Number.isFinite(s))return;const d=Number(e==null?void 0:e.id)===Number(A.value||0),p=new window.google.maps.Marker({position:{lat:n,lng:s},map:h,title:((e==null?void 0:e.name)||"").toString(),clickable:!0,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:d?7:6,fillColor:"#14b8a6",fillOpacity:.9,strokeColor:"#0f766e",strokeWeight:2}});lt.set(Number(e==null?void 0:e.id)||0,p),p.addListener("click",()=>{A.value=e.id,q.value=null,Q.value=null,O.value="points",rt(),ot(p.getPosition(),[`Titik: ${(e==null?void 0:e.name)||"-"}`,e!=null&&e.point_type?`Tipe: ${e.point_type}`:null,`Koordinat: ${n}, ${s}`],p)})}))}function nt(){var l;!h||!((l=window.google)!=null&&l.maps)||(he(st),Ee.value&&(_e.value||[]).forEach(e=>{const n=Number(e==null?void 0:e.latitude),s=Number(e==null?void 0:e.longitude);if(!Number.isFinite(n)||!Number.isFinite(s))return;const d=Rt(e==null?void 0:e.status),p=Number(e==null?void 0:e.id)===Number(Q.value||0),b=new window.google.maps.Marker({position:{lat:n,lng:s},map:h,title:`PUTUS: ${String((e==null?void 0:e.status)||"OPEN").toUpperCase()}`,clickable:!0,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:p?8:7,fillColor:d.fill,fillOpacity:.9,strokeColor:d.stroke,strokeWeight:2}});st.set(Number(e==null?void 0:e.id)||0,b),b.addListener("click",()=>{Q.value=e.id,q.value=null,A.value=null,O.value="breaks",nt();const u=ie(e==null?void 0:e.cable_id)||(e!=null&&e.cable_id?`#${e.cable_id}`:"-"),w=ee(e==null?void 0:e.point_id)||(e!=null&&e.point_id?`#${e.point_id}`:"-");ot(b.getPosition(),[`PUTUS: ${String((e==null?void 0:e.status)||"OPEN").toUpperCase()}`,`Kabel: ${u}`,`Titik: ${w}`,e!=null&&e.severity?`Severity: ${e.severity}`:null],b)})}))}function de(){var e;if(!h||!((e=window.google)!=null&&e.maps))return;gt();const l=(n,s,d={})=>{if(!Number.isFinite(n)||!Number.isFinite(s))return;const p=new window.google.maps.Marker({position:{lat:n,lng:s},map:h,clickable:!1,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:Number(d.scale??6),fillColor:(d.fillColor||"#38bdf8").toString(),fillOpacity:Number(d.fillOpacity??.9),strokeColor:(d.strokeColor||"#0ea5e9").toString(),strokeWeight:Number(d.strokeWeight??2)}});we.markers.push(p)};if((z.value||T.value==="pickPoint")&&f.value.latitude!==null&&f.value.longitude!==null){const n=Number(f.value.latitude),s=Number(f.value.longitude);Number.isFinite(n)&&Number.isFinite(s)&&l(n,s,{scale:7,strokeColor:"#0ea5e9",fillColor:"#38bdf8",fillOpacity:.85})}if((W.value||T.value==="pickBreak")&&k.value.latitude!==null&&k.value.longitude!==null){const n=Number(k.value.latitude),s=Number(k.value.longitude);Number.isFinite(n)&&Number.isFinite(s)&&l(n,s,{scale:8,strokeColor:"#f97316",fillColor:"#fb923c",fillOpacity:.85})}if((H.value||T.value==="drawCable")&&Array.isArray(m.value.path)&&m.value.path.length>0){const n=m.value.path.map(s=>({lat:Number(s==null?void 0:s.lat),lng:Number(s==null?void 0:s.lng)})).filter(s=>Number.isFinite(s.lat)&&Number.isFinite(s.lng));if(n.forEach(s=>{l(s.lat,s.lng,{scale:3,strokeColor:"#1d4ed8",fillColor:"#60a5fa",fillOpacity:.95})}),n.length>=2){const s={path:"M 0,-1 0,1",strokeOpacity:1,strokeColor:"#1d4ed8",scale:3};we.polyline=new window.google.maps.Polyline({path:n,strokeOpacity:0,icons:[{icon:s,offset:"0",repeat:"12px"}],clickable:!1,map:h})}}}function Dt(){var n;if(!h||bt||!((n=window.google)!=null&&n.maps))return;const l=new window.google.maps.LatLngBounds;let e=!1;try{Te.value&&(R.value||[]).forEach(s=>{const d=Array.isArray(s==null?void 0:s.path)?s.path:null;!d||d.length<1||d.forEach(p=>{const b=Number(p==null?void 0:p.lat),u=Number(p==null?void 0:p.lng);!Number.isFinite(b)||!Number.isFinite(u)||(l.extend({lat:b,lng:u}),e=!0)})})}catch{}try{Se.value&&(D.value||[]).forEach(s=>{const d=Number(s==null?void 0:s.latitude),p=Number(s==null?void 0:s.longitude);!Number.isFinite(d)||!Number.isFinite(p)||(l.extend({lat:d,lng:p}),e=!0)})}catch{}try{Ee.value&&(_e.value||[]).forEach(s=>{const d=Number(s==null?void 0:s.latitude),p=Number(s==null?void 0:s.longitude);!Number.isFinite(d)||!Number.isFinite(p)||(l.extend({lat:d,lng:p}),e=!0)})}catch{}if(e)try{h.fitBounds(l),bt=!0}catch{}}function Bt(l){const e=String(l||"OPEN").toUpperCase();return e==="IN_PROGRESS"?"IN PROGRESS":e}function xt(l){if(!l)return"";const e=new Date(l);if(!Number.isFinite(e.getTime()))return"";const n=s=>String(s).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}T${n(e.getHours())}:${n(e.getMinutes())}`}function ve(l,e,n=17){var s;if(!(!h||!((s=window.google)!=null&&s.maps)||!Number.isFinite(l)||!Number.isFinite(e))){try{h.panTo({lat:l,lng:e})}catch{}if(Number.isFinite(Number(n)))try{h.setZoom(Number(n))}catch{}}}function it(){var l;return pe.value?(v&&v.error(pe.value),!1):!h||!((l=window.google)!=null&&l.maps)?(v&&v.error("Peta belum siap."),!1):!0}const H=y(!1),Ke=y("create"),He=y(!1),J=y({}),m=y({id:null,name:"",code:"",cable_type:"",core_count:"",map_color:"#2563eb",from_point_id:"",to_point_id:"",path:[],notes:""});function kt(){m.value={id:null,name:"",code:"",cable_type:"",core_count:"",map_color:"#2563eb",from_point_id:"",to_point_id:"",path:[],notes:""},J.value={}}function Kt(){X.value&&(kt(),Ke.value="create",H.value=!0,K.value=null,S({reopen:!1}))}function Ht(l){if(!Z.value)return;kt(),Ke.value="edit",m.value={id:l.id,name:l.name||"",code:l.code||"",cable_type:l.cable_type||"",core_count:l.core_count??"",map_color:l.map_color||"#2563eb",from_point_id:l.from_point_id??"",to_point_id:l.to_point_id??"",path:Array.isArray(l.path)?l.path.slice():[],notes:l.notes||""},H.value=!0,K.value=null,S({reopen:!1});const e=(m.value.path||[])[0];e&&Number.isFinite(Number(e.lat))&&Number.isFinite(Number(e.lng))&&ve(Number(e.lat),Number(e.lng),16)}async function Jt(){var d,p,b;He.value=!0,J.value={};const l={name:m.value.name,code:m.value.code||null,cable_type:m.value.cable_type||null,core_count:m.value.core_count!==""?Number(m.value.core_count):null,map_color:m.value.map_color||null,from_point_id:m.value.from_point_id!==""?Number(m.value.from_point_id):null,to_point_id:m.value.to_point_id!==""?Number(m.value.to_point_id):null,path:Array.isArray(m.value.path)&&m.value.path.length>=2?m.value.path:null,notes:m.value.notes||null},e=Ke.value==="edit"&&m.value.id,n=e?`/api/v1/fiber/cables/${m.value.id}`:"/api/v1/fiber/cables",s=e?"PUT":"POST";try{const u=await j(n,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok)throw u.status===422&&((d=u.data)!=null&&d.errors)?(J.value=u.data.errors,new Error(((p=u.data)==null?void 0:p.message)||"Validasi gagal.")):new Error(((b=u.data)==null?void 0:b.message)||`Gagal menyimpan kabel (HTTP ${u.status}).`);H.value=!1,S(),await I(),v&&v.success("Kabel tersimpan.")}catch(u){console.error("Fiber: saveCable failed",u),v&&v.error((u==null?void 0:u.message)||"Gagal menyimpan kabel.")}finally{He.value=!1}}async function zt(l){var n;if(!(!Y.value||!confirm(`Hapus kabel "${(l==null?void 0:l.name)||""}"?`)))try{const s=await j(`/api/v1/fiber/cables/${l.id}`,{method:"DELETE"});if(!s.ok)throw new Error(((n=s.data)==null?void 0:n.message)||`Gagal hapus kabel (HTTP ${s.status}).`);v&&v.success("Kabel dihapus."),Number(q.value)===Number(l.id)&&(q.value=null),await I()}catch(s){console.error("Fiber: deleteCable failed",s),v&&v.error((s==null?void 0:s.message)||"Gagal hapus kabel.")}}function Wt(){H.value&&it()&&(K.value="cable",H.value=!1,T.value="drawCable",de(),v&&v.info("Mode gambar jalur aktif: klik peta untuk menambah titik, lalu klik Selesai untuk kembali."))}function ft(){const l=Array.isArray(m.value.path)?m.value.path:[];l.length!==0&&(l.pop(),m.value.path=l,de())}function _t(){m.value.path=[],de()}const z=y(!1),Je=y("create"),ze=y(!1),se=y({}),f=y({id:null,name:"",point_type:"",latitude:null,longitude:null,address:"",notes:""});function wt(){f.value={id:null,name:"",point_type:"",latitude:null,longitude:null,address:"",notes:""},se.value={}}function Xt(){X.value&&(wt(),Je.value="create",z.value=!0,K.value=null,S({reopen:!1}))}function Zt(l){if(!Z.value)return;wt(),Je.value="edit",f.value={id:l.id,name:l.name||"",point_type:l.point_type||"",latitude:l.latitude??null,longitude:l.longitude??null,address:l.address||"",notes:l.notes||""},z.value=!0,K.value=null,S({reopen:!1});const e=Number(f.value.latitude),n=Number(f.value.longitude);Number.isFinite(e)&&Number.isFinite(n)&&ve(e,n,17)}function Yt(){z.value&&it()&&(K.value="point",z.value=!1,T.value="pickPoint",de(),v&&v.info("Klik peta untuk memilih lokasi titik."))}async function qt(){var d,p,b;ze.value=!0,se.value={};const l={name:f.value.name,point_type:f.value.point_type||null,latitude:f.value.latitude,longitude:f.value.longitude,address:f.value.address||null,notes:f.value.notes||null},e=Je.value==="edit"&&f.value.id,n=e?`/api/v1/fiber/points/${f.value.id}`:"/api/v1/fiber/points",s=e?"PUT":"POST";try{const u=await j(n,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok)throw u.status===422&&((d=u.data)!=null&&d.errors)?(se.value=u.data.errors,new Error(((p=u.data)==null?void 0:p.message)||"Validasi gagal.")):new Error(((b=u.data)==null?void 0:b.message)||`Gagal menyimpan titik (HTTP ${u.status}).`);z.value=!1,S(),await I(),v&&v.success("Titik tersimpan.")}catch(u){console.error("Fiber: savePoint failed",u),v&&v.error((u==null?void 0:u.message)||"Gagal menyimpan titik.")}finally{ze.value=!1}}async function Qt(l){var n;if(!(!Y.value||!confirm(`Hapus titik "${(l==null?void 0:l.name)||""}"?`)))try{const s=await j(`/api/v1/fiber/points/${l.id}`,{method:"DELETE"});if(!s.ok)throw new Error(((n=s.data)==null?void 0:n.message)||`Gagal hapus titik (HTTP ${s.status}).`);v&&v.success("Titik dihapus."),Number(A.value)===Number(l.id)&&(A.value=null),await I()}catch(s){console.error("Fiber: deletePoint failed",s),v&&v.error((s==null?void 0:s.message)||"Gagal hapus titik.")}}const W=y(!1),We=y("create"),Xe=y(!1),ce=y({}),k=y({id:null,cable_id:"",point_id:"",status:"OPEN",severity:"",reported_at:"",fixed_at:"",latitude:null,longitude:null,description:""});function ht(){k.value={id:null,cable_id:"",point_id:"",status:"OPEN",severity:"",reported_at:"",fixed_at:"",latitude:null,longitude:null,description:""},ce.value={}}function ea(){X.value&&(ht(),We.value="create",W.value=!0,K.value=null,S({reopen:!1}))}function ta(l){if(!Z.value)return;ht(),We.value="edit",k.value={id:l.id,cable_id:l.cable_id??"",point_id:l.point_id??"",status:(l.status||"OPEN").toString().toUpperCase(),severity:l.severity||"",reported_at:xt(l.reported_at),fixed_at:xt(l.fixed_at),latitude:l.latitude??null,longitude:l.longitude??null,description:l.description||""},W.value=!0,K.value=null,S({reopen:!1});const e=Number(k.value.latitude),n=Number(k.value.longitude);Number.isFinite(e)&&Number.isFinite(n)&&ve(e,n,17)}function aa(){W.value&&it()&&(K.value="break",W.value=!1,T.value="pickBreak",de(),v&&v.info("Klik peta untuk memilih lokasi putus."))}async function la(){var d,p,b;Xe.value=!0,ce.value={};const l={cable_id:k.value.cable_id!==""?Number(k.value.cable_id):null,point_id:k.value.point_id!==""?Number(k.value.point_id):null,status:(k.value.status||"OPEN").toString().toUpperCase(),severity:k.value.severity||null,reported_at:k.value.reported_at||null,fixed_at:k.value.fixed_at||null,latitude:k.value.latitude,longitude:k.value.longitude,description:k.value.description||null},e=We.value==="edit"&&k.value.id,n=e?`/api/v1/fiber/breaks/${k.value.id}`:"/api/v1/fiber/breaks",s=e?"PUT":"POST";try{const u=await j(n,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok)throw u.status===422&&((d=u.data)!=null&&d.errors)?(ce.value=u.data.errors,new Error(((p=u.data)==null?void 0:p.message)||"Validasi gagal.")):new Error(((b=u.data)==null?void 0:b.message)||`Gagal menyimpan data putus (HTTP ${u.status}).`);W.value=!1,S(),await I(),v&&v.success("Data putus tersimpan.")}catch(u){console.error("Fiber: saveBreak failed",u),v&&v.error((u==null?void 0:u.message)||"Gagal menyimpan data putus.")}finally{Xe.value=!1}}async function sa(l){var n;if(!(!Y.value||!confirm("Hapus data putus ini?")))try{const s=await j(`/api/v1/fiber/breaks/${l.id}`,{method:"DELETE"});if(!s.ok)throw new Error(((n=s.data)==null?void 0:n.message)||`Gagal hapus data putus (HTTP ${s.status}).`);v&&v.success("Data putus dihapus."),Number(Q.value)===Number(l.id)&&(Q.value=null),await I()}catch(s){console.error("Fiber: deleteBreak failed",s),v&&v.error((s==null?void 0:s.message)||"Gagal hapus data putus.")}}const be=y(!1),Ze=y("create"),Ye=y(!1),ge=y({}),C=y({id:null,point_id:"",port_type:"OLT_PON",port_label:"",cable_id:"",core_no:"",notes:""});function Ct(){C.value={id:null,point_id:"",port_type:"OLT_PON",port_label:"",cable_id:"",core_no:"",notes:""},ge.value={}}function oa(){X.value&&(Ct(),A.value&&(C.value.point_id=String(A.value)),Ze.value="create",be.value=!0)}function ra(l){Z.value&&(Ct(),Ze.value="edit",C.value={id:l.id,point_id:l.point_id??"",port_type:l.port_type||"OLT_PON",port_label:l.port_label||"",cable_id:l.cable_id??"",core_no:l.core_no??"",notes:l.notes||""},be.value=!0)}async function na(){var d,p,b;Ye.value=!0,ge.value={};const l={point_id:C.value.point_id!==""?Number(C.value.point_id):null,port_type:(C.value.port_type||"OLT_PON").toString().toUpperCase(),port_label:C.value.port_label||"",cable_id:C.value.cable_id!==""?Number(C.value.cable_id):null,core_no:C.value.core_no!==""?Number(C.value.core_no):null,notes:C.value.notes||null},e=Ze.value==="edit"&&C.value.id,n=e?`/api/v1/fiber/ports/${C.value.id}`:"/api/v1/fiber/ports",s=e?"PUT":"POST";try{const u=await j(n,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok)throw u.status===422&&((d=u.data)!=null&&d.errors)?(ge.value=u.data.errors,new Error(((p=u.data)==null?void 0:p.message)||"Validasi gagal.")):new Error(((b=u.data)==null?void 0:b.message)||`Gagal menyimpan port (HTTP ${u.status}).`);be.value=!1,await I(),v&&v.success("Port tersimpan.")}catch(u){console.error("Fiber: savePort failed",u),v&&v.error((u==null?void 0:u.message)||"Gagal menyimpan port.")}finally{Ye.value=!1}}async function ia(l){var n;if(!(!Y.value||!confirm(`Hapus port "${(l==null?void 0:l.port_label)||""}"?`)))try{const s=await j(`/api/v1/fiber/ports/${l.id}`,{method:"DELETE"});if(!s.ok)throw new Error(((n=s.data)==null?void 0:n.message)||`Gagal hapus port (HTTP ${s.status}).`);v&&v.success("Port dihapus."),await I()}catch(s){console.error("Fiber: deletePort failed",s),v&&v.error((s==null?void 0:s.message)||"Gagal hapus port.")}}const ue=y(!1),qe=y("create"),Qe=y(!1),oe=y({}),Le=y(8),g=y({id:null,point_id:"",link_type:"SPLICE",from_cable_id:"",from_core_no:"",to_cable_id:"",to_core_no:"",split_group:"",outputs:[],loss_db:"",notes:""}),Nt=ne(()=>{const l=Array.isArray(De.value)?De.value:[],e=[],n={};return l.forEach(s=>{const d=((s==null?void 0:s.link_type)||"").toString().toUpperCase(),p=((s==null?void 0:s.split_group)||"").toString();if(d==="SPLIT"&&p){const b=`${Number(s.point_id)||0}|${p}`;n[b]||(n[b]={kind:"SPLIT_GROUP",id:s.id,point_id:s.point_id,link_type:"SPLIT",split_group:p,from_cable_id:s.from_cable_id,from_core_no:s.from_core_no,loss_db:s.loss_db??null,notes:s.notes||"",outputs:[],link_ids:[]}),n[b].outputs.push({to_cable_id:s.to_cable_id,to_core_no:s.to_core_no}),n[b].link_ids.push(s.id);return}e.push({kind:"LINK",...s||{}})}),Object.values(n).forEach(s=>{s.outputs=(s.outputs||[]).filter(d=>(d==null?void 0:d.to_cable_id)&&(d==null?void 0:d.to_core_no)),e.push(s)}),e.sort((s,d)=>{const p=Number((s==null?void 0:s.point_id)||0),b=Number((d==null?void 0:d.point_id)||0);if(p!==b)return p-b;const u=((s==null?void 0:s.link_type)||"").toString(),w=((d==null?void 0:d.link_type)||"").toString();return u.localeCompare(w)}),e});function Pt(){g.value={id:null,point_id:"",link_type:"SPLICE",from_cable_id:"",from_core_no:"",to_cable_id:"",to_core_no:"",split_group:"",outputs:[],loss_db:"",notes:""},oe.value={},Le.value=8}function da(l){const e=Math.max(1,Math.min(64,Number(l)||1));g.value.outputs=Array.from({length:e}).map(()=>({to_cable_id:"",to_core_no:""}))}function ua(){const l=Array.isArray(g.value.outputs)?g.value.outputs:[];l.push({to_cable_id:"",to_core_no:""}),g.value.outputs=l}function pa(l){const e=Array.isArray(g.value.outputs)?g.value.outputs:[];l<0||l>=e.length||(e.splice(l,1),g.value.outputs=e)}function va(){X.value&&(Pt(),A.value&&(g.value.point_id=String(A.value)),qe.value="create",ue.value=!0)}function ca(l){if(Z.value){if(Pt(),qe.value="edit",(l==null?void 0:l.kind)==="SPLIT_GROUP"){g.value={id:l.id,point_id:l.point_id??"",link_type:"SPLIT",from_cable_id:l.from_cable_id??"",from_core_no:l.from_core_no??"",to_cable_id:"",to_core_no:"",split_group:l.split_group||"",outputs:(l.outputs||[]).map(e=>({to_cable_id:e.to_cable_id??"",to_core_no:e.to_core_no??""})),loss_db:l.loss_db??"",notes:l.notes||""},Le.value=(g.value.outputs||[]).length||8,ue.value=!0;return}g.value={id:l.id,point_id:l.point_id??"",link_type:(l.link_type||"SPLICE").toString().toUpperCase(),from_cable_id:l.from_cable_id??"",from_core_no:l.from_core_no??"",to_cable_id:l.to_cable_id??"",to_core_no:l.to_core_no??"",split_group:l.split_group||"",outputs:[],loss_db:l.loss_db??"",notes:l.notes||""},ue.value=!0}}async function ba(){var p,b,u;Qe.value=!0,oe.value={};const l=(g.value.link_type||"SPLICE").toString().toUpperCase(),e={point_id:g.value.point_id!==""?Number(g.value.point_id):null,link_type:l,from_cable_id:g.value.from_cable_id!==""?Number(g.value.from_cable_id):null,from_core_no:g.value.from_core_no!==""?Number(g.value.from_core_no):null,split_group:g.value.split_group||null,loss_db:g.value.loss_db!==""?Number(g.value.loss_db):null,notes:g.value.notes||null};if(l==="SPLIT"){const w=Array.isArray(g.value.outputs)?g.value.outputs:[];e.outputs=w.map(V=>({to_cable_id:V.to_cable_id!==""?Number(V.to_cable_id):null,to_core_no:V.to_core_no!==""?Number(V.to_core_no):null})).filter(V=>V.to_cable_id&&V.to_core_no)}else e.to_cable_id=g.value.to_cable_id!==""?Number(g.value.to_cable_id):null,e.to_core_no=g.value.to_core_no!==""?Number(g.value.to_core_no):null;const n=qe.value==="edit"&&g.value.id,s=n?`/api/v1/fiber/links/${g.value.id}`:"/api/v1/fiber/links",d=n?"PUT":"POST";try{const w=await j(s,{method:d,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!w.ok)throw w.status===422&&((p=w.data)!=null&&p.errors)?(oe.value=w.data.errors,new Error(((b=w.data)==null?void 0:b.message)||"Validasi gagal.")):new Error(((u=w.data)==null?void 0:u.message)||`Gagal menyimpan sambungan (HTTP ${w.status}).`);ue.value=!1,await I(),v&&v.success("Sambungan tersimpan.")}catch(w){console.error("Fiber: saveLink failed",w),v&&v.error((w==null?void 0:w.message)||"Gagal menyimpan sambungan.")}finally{Qe.value=!1}}async function ga(l){var s;if(!Y.value)return;const e=(l==null?void 0:l.kind)==="SPLIT_GROUP"?`splitter "${(l==null?void 0:l.split_group)||""}"`:"sambungan ini";if(confirm(`Hapus ${e}?`))try{const d=await j(`/api/v1/fiber/links/${l.id}`,{method:"DELETE"});if(!d.ok)throw new Error(((s=d.data)==null?void 0:s.message)||`Gagal hapus sambungan (HTTP ${d.status}).`);v&&v.success("Sambungan dihapus."),await I()}catch(d){console.error("Fiber: deleteLink failed",d),v&&v.error((d==null?void 0:d.message)||"Gagal hapus sambungan.")}}const Ue=y(""),Ce=y(!1),Ne=y(""),ye=y(null),ya=ne(()=>(Pe.value||[]).filter(l=>((l==null?void 0:l.port_type)||"").toString().toUpperCase()==="OLT_PON"));function ma(){ae.value=null,Ne.value="",ye.value=null,Be.value=[],$e()}async function xa(){var l,e,n,s,d,p;if(Ue.value){Ce.value=!0,Ne.value="",ae.value=null,ye.value=null,Be.value=[];try{const b=await j(`/api/v1/fiber/trace/${Number(Ue.value)}?stop_at_odp_out=1`);if(!b.ok)throw new Error(((l=b.data)==null?void 0:l.message)||`Gagal trace (HTTP ${b.status}).`);ae.value=((e=b.data)==null?void 0:e.data)||null,Be.value=((s=(n=b.data)==null?void 0:n.data)==null?void 0:s.used_cable_ids)||[],$e();const u=((p=(d=b.data)==null?void 0:d.data)==null?void 0:p.endpoints)||[];u.length>0&&(ye.value=u[0]),v&&v.success("Trace selesai.")}catch(b){console.error("Fiber: runTrace failed",b),Ne.value=(b==null?void 0:b.message)||"Gagal trace.",v&&v.error(Ne.value)}finally{Ce.value=!1}}}return Ot([Te,Se,Ee],()=>{mt()}),Ot(le,()=>{try{localStorage.setItem("fiber_map_style",le.value)}catch{}Ft()}),fa(()=>{try{const e=localStorage.getItem("fiber_map_style");e&&Oe[e]&&(le.value=e)}catch{}pe.value="";const l=(et.googleMapsApiKey||"").toString().trim();if(!l){pe.value="Google Maps API key belum di-set. Buka Pengaturan -> System -> Google Maps.",I();return}It(l).then(()=>{_a(()=>{Vt(),I()})}).catch(e=>{console.error("Fiber: Google Maps load failed",e),pe.value=(e==null?void 0:e.message)||"Gagal memuat Google Maps.",I()})}),wa(()=>{At()}),(l,e)=>(r(),o(E,null,[$t(ha(Ca),{title:"Kabel FO"}),$t(Ta,null,{default:Na(()=>{var n,s,d,p,b,u,w,V,me,re,L,xe,U,Tt,St;return[t("div",Sa,[t("div",Ea,[e[74]||(e[74]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Manajemen Kabel FO"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Pemetaan jalur kabel, titik sambungan, dan data putus.")],-1)),t("div",Oa,[t("div",$a,[t("span",La,i(fe.value.cables),1),e[70]||(e[70]=t("span",{class:"text-gray-500 dark:text-gray-400 ml-1"},"kabel",-1))]),t("div",Ua,[t("span",Ma,i(fe.value.points),1),e[71]||(e[71]=t("span",{class:"text-gray-500 dark:text-gray-400 ml-1"},"titik",-1))]),t("div",Ia,[t("span",Fa,i(fe.value.breaks_open),1),e[72]||(e[72]=t("span",{class:"text-red-600/70 dark:text-red-300/70 ml-1"},"putus aktif",-1))]),t("div",Va,[x(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>le.value=a),class:"input !py-2 !text-xs"},[...e[73]||(e[73]=[t("option",{value:"roadmap"},"Roadmap",-1),t("option",{value:"hybrid"},"Hybrid",-1),t("option",{value:"satellite"},"Satelit",-1)])],512),[[M,le.value]]),t("button",{onClick:I,class:"btn btn-secondary !py-2 !text-xs",disabled:ke.value},"Refresh",8,Aa)])])]),et.warning?(r(),o("div",Ga,i(et.warning),1)):c("",!0),vt.value?(r(),o("div",Ra,[t("div",Da,[t("div",Ba,[t("label",Ka,[x(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=a=>Te.value=a)},null,512),[[dt,Te.value]]),e[76]||(e[76]=N(" Kabel ",-1))]),t("label",Ha,[x(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>Se.value=a)},null,512),[[dt,Se.value]]),e[77]||(e[77]=N(" Titik ",-1))]),t("label",Ja,[x(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>Ee.value=a)},null,512),[[dt,Ee.value]]),e[78]||(e[78]=N(" Putus ",-1))]),t("div",za,[x(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>le.value=a),class:"input !py-2 !text-xs"},[...e[79]||(e[79]=[t("option",{value:"roadmap"},"Roadmap",-1),t("option",{value:"hybrid"},"Hybrid",-1),t("option",{value:"satellite"},"Satelit",-1)])],512),[[M,le.value]]),t("button",{onClick:I,class:"btn btn-secondary !py-2 !text-xs",disabled:ke.value},"Refresh",8,Wa)])]),t("div",Xa,[t("div",{ref_key:"mapContainer",ref:tt,class:"w-full h-[420px] lg:h-[calc(100vh-13rem)] bg-slate-100 dark:bg-slate-900"},null,512),pe.value?(r(),o("div",Za,[t("div",Ya,[e[80]||(e[80]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Peta tidak dapat dimuat",-1)),t("div",qa,i(pe.value),1)])])):c("",!0),T.value?(r(),o("div",Qa,[t("div",el,[e[81]||(e[81]=N(" Mode peta aktif: ",-1)),t("span",tl,i(T.value==="drawCable"?"gambar kabel":T.value==="pickPoint"?"pilih titik":"pilih putus"),1)]),e[82]||(e[82]=t("div",{class:"text-gray-600 dark:text-gray-300 mt-1"},"Klik peta untuk input. Tekan tombol untuk berhenti.",-1)),t("div",al,[t("button",{class:"btn btn-secondary !py-1 !text-xs",onClick:S},"Selesai"),T.value==="drawCable"?(r(),o("button",{key:0,class:"btn btn-secondary !py-1 !text-xs",onClick:ft},"Undo")):c("",!0),T.value==="drawCable"?(r(),o("button",{key:1,class:"btn btn-secondary !py-1 !text-xs",onClick:_t},"Clear")):c("",!0)])])):c("",!0)])]),t("div",ll,[t("div",sl,[t("button",{onClick:e[5]||(e[5]=a=>O.value="cables"),class:F(["px-3 py-3 text-xs font-semibold whitespace-nowrap",O.value==="cables"?"text-blue-700 dark:text-blue-300 bg-blue-50/60 dark:bg-blue-900/10":"text-gray-600 dark:text-gray-300"])}," Kabel ("+i(R.value.length)+") ",3),t("button",{onClick:e[6]||(e[6]=a=>O.value="points"),class:F(["px-3 py-3 text-xs font-semibold whitespace-nowrap",O.value==="points"?"text-teal-700 dark:text-teal-300 bg-teal-50/60 dark:bg-teal-900/10":"text-gray-600 dark:text-gray-300"])}," Titik ("+i(D.value.length)+") ",3),t("button",{onClick:e[7]||(e[7]=a=>O.value="ports"),class:F(["px-3 py-3 text-xs font-semibold whitespace-nowrap",O.value==="ports"?"text-indigo-700 dark:text-indigo-300 bg-indigo-50/60 dark:bg-indigo-900/10":"text-gray-600 dark:text-gray-300"])}," Port ("+i(Pe.value.length)+") ",3),t("button",{onClick:e[8]||(e[8]=a=>O.value="links"),class:F(["px-3 py-3 text-xs font-semibold whitespace-nowrap",O.value==="links"?"text-amber-700 dark:text-amber-300 bg-amber-50/60 dark:bg-amber-900/10":"text-gray-600 dark:text-gray-300"])}," Sambungan ("+i(De.value.length)+") ",3),t("button",{onClick:e[9]||(e[9]=a=>O.value="trace"),class:F(["px-3 py-3 text-xs font-semibold whitespace-nowrap",O.value==="trace"?"text-slate-700 dark:text-slate-200 bg-slate-50/60 dark:bg-slate-700/30":"text-gray-600 dark:text-gray-300"])}," Trace ",2),t("button",{onClick:e[10]||(e[10]=a=>O.value="breaks"),class:F(["px-3 py-3 text-xs font-semibold whitespace-nowrap",O.value==="breaks"?"text-red-700 dark:text-red-300 bg-red-50/60 dark:bg-red-900/10":"text-gray-600 dark:text-gray-300"])}," Putus ("+i(_e.value.length)+") ",3)]),t("div",ol,[ke.value?(r(),o("div",rl,"Memuat...")):Re.value?(r(),o("div",nl,i(Re.value),1)):O.value==="cables"?(r(),o("div",il,[t("div",dl,[e[83]||(e[83]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Daftar Kabel",-1)),X.value?(r(),o("button",{key:0,class:"btn btn-primary !py-2 !text-xs",onClick:Kt},"Tambah")):c("",!0)]),R.value.length===0?(r(),o("div",ul,"Belum ada data kabel.")):(r(),o("div",pl,[(r(!0),o(E,null,$(R.value,a=>(r(),o("div",{key:a.id,class:F(["p-3 rounded-xl border border-gray-100 dark:border-dark-700 hover:border-blue-200 dark:hover:border-blue-900/40 cursor-pointer",Number(q.value)===Number(a.id)?"bg-blue-50/60 dark:bg-blue-900/10":"bg-white dark:bg-dark-800"]),onClick:P=>{q.value=a.id,A.value=null,Q.value=null,$e()}},[t("div",cl,[t("div",null,[t("div",bl,i(a.name),1),t("div",gl,[a.cable_type?(r(),o("span",yl,i(a.cable_type),1)):c("",!0),a.core_count?(r(),o("span",ml,"• "+i(a.core_count)+" core",1)):c("",!0)]),a.from_point_id||a.to_point_id?(r(),o("div",xl,[t("div",null,[e[84]||(e[84]=N("Dari: ",-1)),t("span",kl,i(ee(a.from_point_id)||"-"),1)]),t("div",null,[e[85]||(e[85]=N("Ke: ",-1)),t("span",fl,i(ee(a.to_point_id)||"-"),1)])])):c("",!0)]),t("div",_l,[Z.value?(r(),o("button",{key:0,class:"btn btn-secondary !py-1 !px-2 !text-xs",onClick:te(P=>Ht(a),["stop"])},"Edit",8,wl)):c("",!0),Y.value?(r(),o("button",{key:1,class:"btn btn-danger !py-1 !px-2 !text-xs",onClick:te(P=>zt(a),["stop"])},"Hapus",8,hl)):c("",!0)])])],10,vl))),128))]))])):O.value==="points"?(r(),o("div",Cl,[t("div",Nl,[e[86]||(e[86]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Titik Sambungan",-1)),X.value?(r(),o("button",{key:0,class:"btn btn-primary !py-2 !text-xs",onClick:Xt},"Tambah")):c("",!0)]),D.value.length===0?(r(),o("div",Pl,"Belum ada data titik.")):(r(),o("div",Tl,[(r(!0),o(E,null,$(D.value,a=>(r(),o("div",{key:a.id,class:F(["p-3 rounded-xl border border-gray-100 dark:border-dark-700 hover:border-teal-200 dark:hover:border-teal-900/40 cursor-pointer",Number(A.value)===Number(a.id)?"bg-teal-50/60 dark:bg-teal-900/10":"bg-white dark:bg-dark-800"]),onClick:P=>{A.value=a.id,q.value=null,Q.value=null,rt(),ve(Number(a.latitude),Number(a.longitude),17)}},[t("div",El,[t("div",null,[t("div",Ol,i(a.name),1),t("div",$l,[a.point_type?(r(),o("span",Ll,i(a.point_type),1)):c("",!0),a.latitude&&a.longitude?(r(),o("span",Ul,"• "+i(a.latitude)+", "+i(a.longitude),1)):c("",!0)])]),t("div",Ml,[Z.value?(r(),o("button",{key:0,class:"btn btn-secondary !py-1 !px-2 !text-xs",onClick:te(P=>Zt(a),["stop"])},"Edit",8,Il)):c("",!0),Y.value?(r(),o("button",{key:1,class:"btn btn-danger !py-1 !px-2 !text-xs",onClick:te(P=>Qt(a),["stop"])},"Hapus",8,Fl)):c("",!0)])])],10,Sl))),128))]))])):O.value==="ports"?(r(),o("div",Vl,[t("div",Al,[e[87]||(e[87]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Port (OLT/ODP)",-1)),X.value?(r(),o("button",{key:0,class:"btn btn-primary !py-2 !text-xs",onClick:oa},"Tambah")):c("",!0)]),Pe.value.length===0?(r(),o("div",Gl,"Belum ada data port.")):(r(),o("div",jl,[(r(!0),o(E,null,$(Pe.value,a=>(r(),o("div",{key:a.id,class:"p-3 rounded-xl border border-gray-100 dark:border-dark-700 hover:border-indigo-200 dark:hover:border-indigo-900/40 bg-white dark:bg-dark-800"},[t("div",Rl,[t("div",null,[t("div",Dl,i(String(a.port_type||"").toUpperCase()),1),t("div",Bl,i(a.port_label||"#"+a.id),1),t("div",Kl,[t("div",null,[e[88]||(e[88]=N(" Titik: ",-1)),t("span",Hl,i(ee(a.point_id)||"#"+a.point_id),1)]),a.cable_id&&a.core_no?(r(),o("div",Jl,[e[89]||(e[89]=N(" Kabel: ",-1)),t("span",zl,i(ie(a.cable_id)||"Kabel #"+a.cable_id),1),t("span",Wl,"- core "+i(a.core_no),1)])):c("",!0)])]),t("div",Xl,[Z.value?(r(),o("button",{key:0,class:"btn btn-secondary !py-1 !px-2 !text-xs",onClick:te(P=>ra(a),["stop"])},"Edit",8,Zl)):c("",!0),Y.value?(r(),o("button",{key:1,class:"btn btn-danger !py-1 !px-2 !text-xs",onClick:te(P=>ia(a),["stop"])},"Hapus",8,Yl)):c("",!0)])])]))),128))]))])):O.value==="links"?(r(),o("div",ql,[t("div",Ql,[e[90]||(e[90]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Sambungan (Splice/Split)",-1)),X.value?(r(),o("button",{key:0,class:"btn btn-primary !py-2 !text-xs",onClick:va},"Tambah")):c("",!0)]),Nt.value.length===0?(r(),o("div",es,"Belum ada data sambungan.")):(r(),o("div",ts,[(r(!0),o(E,null,$(Nt.value,a=>(r(),o("div",{key:a.kind==="SPLIT_GROUP"?"g:"+a.split_group+":"+a.point_id:"l:"+a.id,class:"p-3 rounded-xl border border-gray-100 dark:border-dark-700 hover:border-amber-200 dark:hover:border-amber-900/40 bg-white dark:bg-dark-800"},[t("div",as,[t("div",ls,[t("div",ss,[N(i(a.kind==="SPLIT_GROUP"?"SPLIT":String(a.link_type||"").toUpperCase())+" ",1),a.kind==="SPLIT_GROUP"?(r(),o("span",os,"- "+i((a.outputs||[]).length)+" output",1)):c("",!0)]),t("div",rs,[e[91]||(e[91]=N(" Titik: ",-1)),t("span",ns,i(ee(a.point_id)||"#"+a.point_id),1)]),t("div",is,[N(i(ie(a.from_cable_id)||"Kabel #"+a.from_cable_id)+" - core "+i(a.from_core_no)+" ",1),e[92]||(e[92]=t("span",{class:"mx-1 text-gray-400"},"->",-1)),a.kind==="SPLIT_GROUP"?(r(),o("span",ds,"splitter")):(r(),o(E,{key:1},[N(i(ie(a.to_cable_id)||"Kabel #"+a.to_cable_id)+" - core "+i(a.to_core_no),1)],64))]),a.kind==="SPLIT_GROUP"&&(a.outputs||[]).length?(r(),o("div",us,[N(" Output: "+i((a.outputs||[]).slice(0,4).map(P=>`${ie(P.to_cable_id)||"#"+P.to_cable_id}:${P.to_core_no}`).join(", ")),1),(a.outputs||[]).length>4?(r(),o("span",ps,", ...")):c("",!0)])):c("",!0),a.loss_db!==null&&a.loss_db!==void 0&&a.loss_db!==""?(r(),o("div",vs,[e[93]||(e[93]=N(" Loss: ",-1)),t("span",cs,i(a.loss_db)+" dB",1)])):c("",!0)]),t("div",bs,[Z.value?(r(),o("button",{key:0,class:"btn btn-secondary !py-1 !px-2 !text-xs",onClick:te(P=>ca(a),["stop"])},"Edit",8,gs)):c("",!0),Y.value?(r(),o("button",{key:1,class:"btn btn-danger !py-1 !px-2 !text-xs",onClick:te(P=>ga(a),["stop"])},"Hapus",8,ys)):c("",!0)])])]))),128))]))])):O.value==="trace"?(r(),o("div",ms,[t("div",xs,[e[94]||(e[94]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Tracing End-to-End",-1)),t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:ma,disabled:Ce.value},"Clear",8,ks)]),t("div",fs,[t("div",null,[e[96]||(e[96]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Start Port (OLT_PON)",-1)),x(t("select",{"onUpdate:modelValue":e[11]||(e[11]=a=>Ue.value=a),class:"input w-full"},[e[95]||(e[95]=t("option",{value:""},"(pilih port)",-1)),(r(!0),o(E,null,$(ya.value,a=>(r(),o("option",{key:a.id,value:a.id},i(ee(a.point_id)||"#"+a.point_id)+" | "+i(a.port_label)+" | "+i(ie(a.cable_id)||"Kabel #"+a.cable_id)+":"+i(a.core_no),9,_s))),128))],512),[[M,Ue.value]])]),t("div",ws,[t("button",{class:"btn btn-primary !py-2 !text-xs",onClick:xa,disabled:Ce.value||!Ue.value},i(Ce.value?"Tracing...":"Trace"),9,hs),t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:I,disabled:ke.value||Ce.value},"Refresh Data",8,Cs)]),Ne.value?(r(),o("div",Ns,i(Ne.value),1)):c("",!0)]),ae.value?(r(),o("div",Ps,[t("div",Ts,[e[97]||(e[97]=N(" Endpoint: ",-1)),t("span",Ss,i((ae.value.endpoints||[]).length),1),e[98]||(e[98]=t("span",{class:"mx-2"},"|",-1)),e[99]||(e[99]=N(" Visited: ",-1)),t("span",Es,i(ae.value.visited_nodes||0),1),ae.value.truncated?(r(),o("span",Os,"(truncated)")):c("",!0)]),(ae.value.endpoints||[]).length===0?(r(),o("div",$s,[...e[100]||(e[100]=[N(" Tidak ada endpoint ",-1),t("span",{class:"font-mono"},"ODP_OUT",-1),N(" terjangkau dari port ini. ",-1)])])):(r(),o("div",Ls,[(r(!0),o(E,null,$(ae.value.endpoints||[],(a,P)=>{var G,Me,Ie,Fe,Ve,Ae,Ge,Et;return r(),o("div",{key:((G=a.port)==null?void 0:G.id)||P,class:F(["p-3 rounded-xl border border-gray-100 dark:border-dark-700 hover:border-slate-200 dark:hover:border-slate-700 cursor-pointer",ye.value===a?"bg-slate-50/60 dark:bg-slate-700/30":"bg-white dark:bg-dark-800"]),onClick:Mr=>ye.value=a},[t("div",Ms,i(((Me=a.point)==null?void 0:Me.name)||ee((Ie=a.port)==null?void 0:Ie.point_id)||"-"),1),t("div",Is,[e[101]||(e[101]=N(" Port: ",-1)),t("span",Fs,i(((Fe=a.port)==null?void 0:Fe.port_label)||"#"+((Ve=a.port)==null?void 0:Ve.id)),1),e[102]||(e[102]=t("span",{class:"mx-2"},"|",-1)),N(" "+i(ie((Ae=a.port)==null?void 0:Ae.cable_id)||"Kabel #"+((Ge=a.port)==null?void 0:Ge.cable_id))+":"+i((Et=a.port)==null?void 0:Et.core_no),1)])],10,Us)}),128))])),(n=ye.value)!=null&&n.path?(r(),o("div",Vs,[e[104]||(e[104]=t("div",{class:"text-xs font-semibold text-gray-900 dark:text-white"},"Path (ringkas)",-1)),t("div",As,[(r(!0),o(E,null,$(ye.value.path,(a,P)=>{var G,Me,Ie,Fe,Ve,Ae,Ge;return r(),o("div",{key:P,class:"text-xs"},[t("div",Gs,[N(i(P===0?"START":((G=a.edge)==null?void 0:G.type)==="CABLE"?"KABEL":"LINK "+(((Me=a.edge)==null?void 0:Me.link_type)||""))+" ",1),e[103]||(e[103]=t("span",{class:"mx-1 text-gray-400"},"|",-1)),N(" "+i(((Ie=a.point)==null?void 0:Ie.name)||"Titik #"+((Fe=a.node)==null?void 0:Fe.point_id)),1)]),t("div",js,i(((Ve=a.cable)==null?void 0:Ve.name)||"Kabel #"+((Ae=a.node)==null?void 0:Ae.cable_id))+" - core "+i((Ge=a.node)==null?void 0:Ge.core_no),1)])}),128))])])):c("",!0)])):c("",!0)])):(r(),o("div",Rs,[t("div",Ds,[e[105]||(e[105]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Data Putus",-1)),X.value?(r(),o("button",{key:0,class:"btn btn-primary !py-2 !text-xs",onClick:ea},"Tambah")):c("",!0)]),_e.value.length===0?(r(),o("div",Bs,"Belum ada data putus.")):(r(),o("div",Ks,[(r(!0),o(E,null,$(_e.value,a=>(r(),o("div",{key:a.id,class:F(["p-3 rounded-xl border border-gray-100 dark:border-dark-700 hover:border-red-200 dark:hover:border-red-900/40 cursor-pointer",Number(Q.value)===Number(a.id)?"bg-red-50/60 dark:bg-red-900/10":"bg-white dark:bg-dark-800"]),onClick:P=>{Q.value=a.id,q.value=null,A.value=null,nt(),ve(Number(a.latitude),Number(a.longitude),17)}},[t("div",Js,[t("div",null,[t("div",zs,i(Bt(a.status)),1),t("div",Ws,i(ie(a.cable_id)||(a.cable_id?"Kabel #"+a.cable_id:"Tanpa kabel")),1),t("div",Xs,[t("span",null,"Titik: "+i(ee(a.point_id)||"-"),1),a.severity?(r(),o("span",Zs,"• "+i(a.severity),1)):c("",!0)]),a.description?(r(),o("div",Ys,i(a.description),1)):c("",!0)]),t("div",qs,[Z.value?(r(),o("button",{key:0,class:"btn btn-secondary !py-1 !px-2 !text-xs",onClick:te(P=>ta(a),["stop"])},"Edit",8,Qs)):c("",!0),Y.value?(r(),o("button",{key:1,class:"btn btn-danger !py-1 !px-2 !text-xs",onClick:te(P=>sa(a),["stop"])},"Hapus",8,eo)):c("",!0)])])],10,Hs))),128))]))]))])])])):(r(),o("div",ja,[...e[75]||(e[75]=[t("div",{class:"text-gray-900 dark:text-white font-semibold"},"Tidak punya akses",-1),t("div",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},[N(" Butuh permission "),t("code",{class:"px-1 py-0.5 bg-gray-100 dark:bg-dark-700 rounded"},"view fiber"),N(". ")],-1)])]))]),H.value?(r(),o("div",{key:0,class:F(["fixed inset-0 z-[10000] flex items-center justify-center p-4",T.value?"pointer-events-none":""])},[t("div",{class:F(["absolute inset-0 bg-black/40",T.value?"pointer-events-none opacity-20":""]),onClick:e[12]||(e[12]=a=>{H.value=!1,S()})},null,2),t("div",to,[t("div",ao,[t("div",lo,i(Ke.value==="edit"?"Edit Kabel":"Tambah Kabel"),1),t("button",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white",onClick:e[13]||(e[13]=a=>{H.value=!1,S()})},"Tutup")]),t("div",so,[t("div",oo,[t("div",null,[e[106]||(e[106]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Nama",-1)),x(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>m.value.name=a),class:"input w-full",placeholder:"Feeder ODC-POP A"},null,512),[[_,m.value.name]]),J.value.name?(r(),o("div",ro,i((s=J.value.name)==null?void 0:s[0]),1)):c("",!0)]),t("div",null,[e[107]||(e[107]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Kode (opsional)",-1)),x(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>m.value.code=a),class:"input w-full",placeholder:"FO-001"},null,512),[[_,m.value.code]]),J.value.code?(r(),o("div",no,i((d=J.value.code)==null?void 0:d[0]),1)):c("",!0)]),t("div",null,[e[108]||(e[108]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Tipe",-1)),x(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>m.value.cable_type=a),class:"input w-full",placeholder:"FEEDER / DISTRIBUTION / DROP"},null,512),[[_,m.value.cable_type]]),J.value.cable_type?(r(),o("div",io,i((p=J.value.cable_type)==null?void 0:p[0]),1)):c("",!0)]),t("div",null,[e[109]||(e[109]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Core",-1)),x(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>m.value.core_count=a),type:"number",min:"1",class:"input w-full",placeholder:"12"},null,512),[[_,m.value.core_count]]),J.value.core_count?(r(),o("div",uo,i((b=J.value.core_count)==null?void 0:b[0]),1)):c("",!0)]),t("div",null,[e[111]||(e[111]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Dari Titik",-1)),x(t("select",{"onUpdate:modelValue":e[18]||(e[18]=a=>m.value.from_point_id=a),class:"input w-full"},[e[110]||(e[110]=t("option",{value:""},"(kosong)",-1)),(r(!0),o(E,null,$(D.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,po))),128))],512),[[M,m.value.from_point_id]])]),t("div",null,[e[113]||(e[113]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Ke Titik",-1)),x(t("select",{"onUpdate:modelValue":e[19]||(e[19]=a=>m.value.to_point_id=a),class:"input w-full"},[e[112]||(e[112]=t("option",{value:""},"(kosong)",-1)),(r(!0),o(E,null,$(D.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,vo))),128))],512),[[M,m.value.to_point_id]])]),t("div",co,[e[114]||(e[114]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Warna Jalur",-1)),t("div",bo,[x(t("input",{"onUpdate:modelValue":e[20]||(e[20]=a=>m.value.map_color=a),type:"color",class:"h-10 w-14 rounded border border-gray-200 dark:border-dark-700 bg-transparent"},null,512),[[_,m.value.map_color]]),x(t("input",{"onUpdate:modelValue":e[21]||(e[21]=a=>m.value.map_color=a),class:"input flex-1",placeholder:"#2563eb"},null,512),[[_,m.value.map_color]])])]),t("div",go,[e[115]||(e[115]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Catatan",-1)),x(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=a=>m.value.notes=a),class:"input w-full min-h-[80px]",placeholder:"Keterangan kabel..."},null,512),[[_,m.value.notes]])])]),t("div",yo,[t("div",mo,[t("div",null,[e[116]||(e[116]=t("div",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Jalur di Peta",-1)),t("div",xo,"Titik: "+i(Array.isArray(m.value.path)?m.value.path.length:0),1)]),t("div",{class:"flex flex-wrap items-center gap-2"},[t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:Wt},"Gambar"),t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:ft},"Undo"),t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:_t},"Clear")])])])]),t("div",ko,[t("button",{class:"btn btn-secondary",onClick:e[23]||(e[23]=a=>{H.value=!1,S()})},"Batal"),t("button",{class:"btn btn-primary",disabled:He.value,onClick:Jt},i(He.value?"Menyimpan...":"Simpan"),9,fo)])])],2)):c("",!0),z.value?(r(),o("div",{key:1,class:F(["fixed inset-0 z-[10000] flex items-center justify-center p-4",T.value?"pointer-events-none":""])},[t("div",{class:F(["absolute inset-0 bg-black/40",T.value?"pointer-events-none opacity-20":""]),onClick:e[24]||(e[24]=a=>{z.value=!1,S()})},null,2),t("div",_o,[t("div",wo,[t("div",ho,i(Je.value==="edit"?"Edit Titik":"Tambah Titik"),1),t("button",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white",onClick:e[25]||(e[25]=a=>{z.value=!1,S()})},"Tutup")]),t("div",Co,[t("div",null,[e[117]||(e[117]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Nama",-1)),x(t("input",{"onUpdate:modelValue":e[26]||(e[26]=a=>f.value.name=a),class:"input w-full",placeholder:"ODP-01 / Joint A"},null,512),[[_,f.value.name]]),se.value.name?(r(),o("div",No,i((u=se.value.name)==null?void 0:u[0]),1)):c("",!0)]),t("div",null,[e[118]||(e[118]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Tipe",-1)),x(t("input",{"onUpdate:modelValue":e[27]||(e[27]=a=>f.value.point_type=a),class:"input w-full",placeholder:"ODP / ODC / JOINT / HANDHOLE"},null,512),[[_,f.value.point_type]])]),t("div",Po,[t("div",null,[e[119]||(e[119]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Latitude",-1)),x(t("input",{"onUpdate:modelValue":e[28]||(e[28]=a=>f.value.latitude=a),class:"input w-full",placeholder:"-6.2"},null,512),[[_,f.value.latitude]]),se.value.latitude?(r(),o("div",To,i((w=se.value.latitude)==null?void 0:w[0]),1)):c("",!0)]),t("div",null,[e[120]||(e[120]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Longitude",-1)),x(t("input",{"onUpdate:modelValue":e[29]||(e[29]=a=>f.value.longitude=a),class:"input w-full",placeholder:"106.8"},null,512),[[_,f.value.longitude]]),se.value.longitude?(r(),o("div",So,i((V=se.value.longitude)==null?void 0:V[0]),1)):c("",!0)])]),t("div",Eo,[t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:Yt},"Pilih dari peta"),f.value.latitude&&f.value.longitude?(r(),o("button",{key:0,class:"btn btn-secondary !py-2 !text-xs",onClick:e[30]||(e[30]=a=>ve(Number(f.value.latitude),Number(f.value.longitude),18))},"Zoom")):c("",!0)]),t("div",null,[e[121]||(e[121]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Alamat",-1)),x(t("input",{"onUpdate:modelValue":e[31]||(e[31]=a=>f.value.address=a),class:"input w-full",placeholder:"(opsional)"},null,512),[[_,f.value.address]])]),t("div",null,[e[122]||(e[122]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Catatan",-1)),x(t("textarea",{"onUpdate:modelValue":e[32]||(e[32]=a=>f.value.notes=a),class:"input w-full min-h-[80px]",placeholder:"(opsional)"},null,512),[[_,f.value.notes]])])]),t("div",Oo,[t("button",{class:"btn btn-secondary",onClick:e[33]||(e[33]=a=>{z.value=!1,S()})},"Batal"),t("button",{class:"btn btn-primary",disabled:ze.value,onClick:qt},i(ze.value?"Menyimpan...":"Simpan"),9,$o)])])],2)):c("",!0),W.value?(r(),o("div",{key:2,class:F(["fixed inset-0 z-[10000] flex items-center justify-center p-4",T.value?"pointer-events-none":""])},[t("div",{class:F(["absolute inset-0 bg-black/40",T.value?"pointer-events-none opacity-20":""]),onClick:e[34]||(e[34]=a=>{W.value=!1,S()})},null,2),t("div",Lo,[t("div",Uo,[t("div",Mo,i(We.value==="edit"?"Edit Data Putus":"Tambah Data Putus"),1),t("button",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white",onClick:e[35]||(e[35]=a=>{W.value=!1,S()})},"Tutup")]),t("div",Io,[t("div",null,[e[124]||(e[124]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Kabel",-1)),x(t("select",{"onUpdate:modelValue":e[36]||(e[36]=a=>k.value.cable_id=a),class:"input w-full"},[e[123]||(e[123]=t("option",{value:""},"(kosong)",-1)),(r(!0),o(E,null,$(R.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,Fo))),128))],512),[[M,k.value.cable_id]])]),t("div",null,[e[126]||(e[126]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Titik (opsional)",-1)),x(t("select",{"onUpdate:modelValue":e[37]||(e[37]=a=>k.value.point_id=a),class:"input w-full"},[e[125]||(e[125]=t("option",{value:""},"(kosong)",-1)),(r(!0),o(E,null,$(D.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,Vo))),128))],512),[[M,k.value.point_id]])]),t("div",Ao,[t("div",null,[e[128]||(e[128]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Status",-1)),x(t("select",{"onUpdate:modelValue":e[38]||(e[38]=a=>k.value.status=a),class:"input w-full"},[...e[127]||(e[127]=[t("option",{value:"OPEN"},"OPEN",-1),t("option",{value:"IN_PROGRESS"},"IN_PROGRESS",-1),t("option",{value:"FIXED"},"FIXED",-1),t("option",{value:"CANCELLED"},"CANCELLED",-1)])],512),[[M,k.value.status]])]),t("div",null,[e[130]||(e[130]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Severity",-1)),x(t("select",{"onUpdate:modelValue":e[39]||(e[39]=a=>k.value.severity=a),class:"input w-full"},[...e[129]||(e[129]=[t("option",{value:""},"(kosong)",-1),t("option",{value:"MINOR"},"MINOR",-1),t("option",{value:"MAJOR"},"MAJOR",-1),t("option",{value:"CRITICAL"},"CRITICAL",-1)])],512),[[M,k.value.severity]])])]),t("div",Go,[t("div",null,[e[131]||(e[131]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Dilaporkan",-1)),x(t("input",{"onUpdate:modelValue":e[40]||(e[40]=a=>k.value.reported_at=a),type:"datetime-local",class:"input w-full"},null,512),[[_,k.value.reported_at]])]),t("div",null,[e[132]||(e[132]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Fixed At",-1)),x(t("input",{"onUpdate:modelValue":e[41]||(e[41]=a=>k.value.fixed_at=a),type:"datetime-local",class:"input w-full",disabled:String(k.value.status).toUpperCase()!=="FIXED"},null,8,jo),[[_,k.value.fixed_at]])])]),t("div",Ro,[t("div",null,[e[133]||(e[133]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Latitude",-1)),x(t("input",{"onUpdate:modelValue":e[42]||(e[42]=a=>k.value.latitude=a),class:"input w-full",placeholder:"-6.2"},null,512),[[_,k.value.latitude]]),ce.value.latitude?(r(),o("div",Do,i((me=ce.value.latitude)==null?void 0:me[0]),1)):c("",!0)]),t("div",null,[e[134]||(e[134]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Longitude",-1)),x(t("input",{"onUpdate:modelValue":e[43]||(e[43]=a=>k.value.longitude=a),class:"input w-full",placeholder:"106.8"},null,512),[[_,k.value.longitude]]),ce.value.longitude?(r(),o("div",Bo,i((re=ce.value.longitude)==null?void 0:re[0]),1)):c("",!0)])]),t("div",Ko,[t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:aa},"Pilih dari peta"),k.value.latitude&&k.value.longitude?(r(),o("button",{key:0,class:"btn btn-secondary !py-2 !text-xs",onClick:e[44]||(e[44]=a=>ve(Number(k.value.latitude),Number(k.value.longitude),18))},"Zoom")):c("",!0)]),t("div",null,[e[135]||(e[135]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Catatan",-1)),x(t("textarea",{"onUpdate:modelValue":e[45]||(e[45]=a=>k.value.description=a),class:"input w-full min-h-[90px]",placeholder:"Keterangan kejadian putus..."},null,512),[[_,k.value.description]])])]),t("div",Ho,[t("button",{class:"btn btn-secondary",onClick:e[46]||(e[46]=a=>{W.value=!1,S()})},"Batal"),t("button",{class:"btn btn-primary",disabled:Xe.value,onClick:la},i(Xe.value?"Menyimpan...":"Simpan"),9,Jo)])])],2)):c("",!0),be.value?(r(),o("div",zo,[t("div",{class:"absolute inset-0 bg-black/40",onClick:e[47]||(e[47]=a=>be.value=!1)}),t("div",Wo,[t("div",Xo,[t("div",Zo,i(Ze.value==="edit"?"Edit Port":"Tambah Port"),1),t("button",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white",onClick:e[48]||(e[48]=a=>be.value=!1)},"Tutup")]),t("div",Yo,[t("div",null,[e[137]||(e[137]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Titik",-1)),x(t("select",{"onUpdate:modelValue":e[49]||(e[49]=a=>C.value.point_id=a),class:"input w-full"},[e[136]||(e[136]=t("option",{value:""},"(pilih titik)",-1)),(r(!0),o(E,null,$(D.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,qo))),128))],512),[[M,C.value.point_id]]),ge.value.point_id?(r(),o("div",Qo,i((L=ge.value.point_id)==null?void 0:L[0]),1)):c("",!0)]),t("div",er,[t("div",null,[e[139]||(e[139]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Tipe",-1)),x(t("select",{"onUpdate:modelValue":e[50]||(e[50]=a=>C.value.port_type=a),class:"input w-full"},[...e[138]||(e[138]=[t("option",{value:"OLT_PON"},"OLT_PON",-1),t("option",{value:"ODP_OUT"},"ODP_OUT",-1)])],512),[[M,C.value.port_type]])]),t("div",null,[e[140]||(e[140]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Label",-1)),x(t("input",{"onUpdate:modelValue":e[51]||(e[51]=a=>C.value.port_label=a),class:"input w-full",placeholder:"PON 1/1/1 / OUT 1"},null,512),[[_,C.value.port_label]]),ge.value.port_label?(r(),o("div",tr,i((xe=ge.value.port_label)==null?void 0:xe[0]),1)):c("",!0)])]),t("div",ar,[t("div",null,[e[142]||(e[142]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Kabel",-1)),x(t("select",{"onUpdate:modelValue":e[52]||(e[52]=a=>C.value.cable_id=a),class:"input w-full"},[e[141]||(e[141]=t("option",{value:""},"(pilih kabel)",-1)),(r(!0),o(E,null,$(R.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,lr))),128))],512),[[M,C.value.cable_id]])]),t("div",null,[e[143]||(e[143]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Core",-1)),x(t("input",{"onUpdate:modelValue":e[53]||(e[53]=a=>C.value.core_no=a),type:"number",min:"1",class:"input w-full",placeholder:"1"},null,512),[[_,C.value.core_no]])])]),t("div",null,[e[144]||(e[144]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Catatan",-1)),x(t("textarea",{"onUpdate:modelValue":e[54]||(e[54]=a=>C.value.notes=a),class:"input w-full min-h-[90px]",placeholder:"(opsional)"},null,512),[[_,C.value.notes]])])]),t("div",sr,[t("button",{class:"btn btn-secondary",onClick:e[55]||(e[55]=a=>be.value=!1)},"Batal"),t("button",{class:"btn btn-primary",disabled:Ye.value,onClick:na},i(Ye.value?"Menyimpan...":"Simpan"),9,or)])])])):c("",!0),ue.value?(r(),o("div",rr,[t("div",{class:"absolute inset-0 bg-black/40",onClick:e[56]||(e[56]=a=>ue.value=!1)}),t("div",nr,[t("div",ir,[t("div",dr,i(qe.value==="edit"?"Edit Sambungan":"Tambah Sambungan"),1),t("button",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white",onClick:e[57]||(e[57]=a=>ue.value=!1)},"Tutup")]),t("div",ur,[t("div",null,[e[146]||(e[146]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Titik",-1)),x(t("select",{"onUpdate:modelValue":e[58]||(e[58]=a=>g.value.point_id=a),class:"input w-full"},[e[145]||(e[145]=t("option",{value:""},"(pilih titik)",-1)),(r(!0),o(E,null,$(D.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,pr))),128))],512),[[M,g.value.point_id]]),oe.value.point_id?(r(),o("div",vr,i((U=oe.value.point_id)==null?void 0:U[0]),1)):c("",!0)]),t("div",cr,[t("div",null,[e[148]||(e[148]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Tipe",-1)),x(t("select",{"onUpdate:modelValue":e[59]||(e[59]=a=>g.value.link_type=a),class:"input w-full"},[...e[147]||(e[147]=[t("option",{value:"SPLICE"},"SPLICE",-1),t("option",{value:"PATCH"},"PATCH",-1),t("option",{value:"SPLIT"},"SPLIT",-1)])],512),[[M,g.value.link_type]])]),t("div",null,[e[149]||(e[149]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Loss (dB)",-1)),x(t("input",{"onUpdate:modelValue":e[60]||(e[60]=a=>g.value.loss_db=a),class:"input w-full",placeholder:"0.20"},null,512),[[_,g.value.loss_db]])])]),t("div",br,[t("div",null,[e[151]||(e[151]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"From Cable",-1)),x(t("select",{"onUpdate:modelValue":e[61]||(e[61]=a=>g.value.from_cable_id=a),class:"input w-full"},[e[150]||(e[150]=t("option",{value:""},"(pilih kabel)",-1)),(r(!0),o(E,null,$(R.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,gr))),128))],512),[[M,g.value.from_cable_id]]),oe.value.from_cable_id?(r(),o("div",yr,i((Tt=oe.value.from_cable_id)==null?void 0:Tt[0]),1)):c("",!0)]),t("div",null,[e[152]||(e[152]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"From Core",-1)),x(t("input",{"onUpdate:modelValue":e[62]||(e[62]=a=>g.value.from_core_no=a),type:"number",min:"1",class:"input w-full",placeholder:"1"},null,512),[[_,g.value.from_core_no]]),oe.value.from_core_no?(r(),o("div",mr,i((St=oe.value.from_core_no)==null?void 0:St[0]),1)):c("",!0)])]),String(g.value.link_type).toUpperCase()!=="SPLIT"?(r(),o("div",xr,[t("div",null,[e[154]||(e[154]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"To Cable",-1)),x(t("select",{"onUpdate:modelValue":e[63]||(e[63]=a=>g.value.to_cable_id=a),class:"input w-full"},[e[153]||(e[153]=t("option",{value:""},"(pilih kabel)",-1)),(r(!0),o(E,null,$(R.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,kr))),128))],512),[[M,g.value.to_cable_id]])]),t("div",null,[e[155]||(e[155]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"To Core",-1)),x(t("input",{"onUpdate:modelValue":e[64]||(e[64]=a=>g.value.to_core_no=a),type:"number",min:"1",class:"input w-full",placeholder:"1"},null,512),[[_,g.value.to_core_no]])])])):(r(),o("div",fr,[t("div",_r,[t("div",null,[e[156]||(e[156]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Splitter Group (opsional)",-1)),x(t("input",{"onUpdate:modelValue":e[65]||(e[65]=a=>g.value.split_group=a),class:"input w-full",placeholder:"ODP-01 1:8"},null,512),[[_,g.value.split_group]])]),t("div",null,[e[157]||(e[157]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Jumlah Output",-1)),t("div",wr,[x(t("input",{"onUpdate:modelValue":e[66]||(e[66]=a=>Le.value=a),type:"number",min:"1",max:"64",class:"input w-full"},null,512),[[_,Le.value]]),t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:e[67]||(e[67]=a=>da(Le.value))},"Buat"),t("button",{class:"btn btn-secondary !py-2 !text-xs",onClick:ua},"Tambah")])])]),(g.value.outputs||[]).length===0?(r(),o("div",hr,[...e[158]||(e[158]=[N(" Output masih kosong. Klik ",-1),t("span",{class:"font-semibold"},"Buat",-1),N(" untuk generate baris output. ",-1)])])):(r(),o("div",Cr,[(r(!0),o(E,null,$(g.value.outputs,(a,P)=>(r(),o("div",{key:P,class:"grid grid-cols-12 gap-2 items-center"},[t("div",Nr,[x(t("select",{"onUpdate:modelValue":G=>a.to_cable_id=G,class:"input w-full"},[e[159]||(e[159]=t("option",{value:""},"(kabel output)",-1)),(r(!0),o(E,null,$(R.value,G=>(r(),o("option",{key:G.id,value:G.id},i(G.name),9,Tr))),128))],8,Pr),[[M,a.to_cable_id]])]),t("div",Sr,[x(t("input",{"onUpdate:modelValue":G=>a.to_core_no=G,type:"number",min:"1",class:"input w-full",placeholder:"core"},null,8,Er),[[_,a.to_core_no]])]),t("div",Or,[t("button",{class:"btn btn-danger !py-1 !px-2 !text-xs",onClick:G=>pa(P)},"Hapus",8,$r)])]))),128))]))])),t("div",null,[e[160]||(e[160]=t("label",{class:"text-xs text-gray-600 dark:text-gray-300"},"Catatan",-1)),x(t("textarea",{"onUpdate:modelValue":e[68]||(e[68]=a=>g.value.notes=a),class:"input w-full min-h-[90px]",placeholder:"(opsional)"},null,512),[[_,g.value.notes]])])]),t("div",Lr,[t("button",{class:"btn btn-secondary",onClick:e[69]||(e[69]=a=>ue.value=!1)},"Batal"),t("button",{class:"btn btn-primary",disabled:Qe.value,onClick:ba},i(Qe.value?"Menyimpan...":"Simpan"),9,Ur)])])])):c("",!0)]}),_:1})],64))}};export{Vr as default};
