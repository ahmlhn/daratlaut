import{o as Gt,c as r,a as V,u as Lt,h as Dt,m as It,b as t,j as l,d as j,t as o,e as x,F as h,s as S,n as R,f as d,v as p,i as ut,x as et,w as Rt,r as b,y as gt,G as A}from"./app-CWeBSbTe.js";import{_ as Mt}from"./AdminLayout-BiTLP0Fh.js";import Bt from"./SystemUpdatePanel-pZnQGigA.js";import M from"./SettingsNavIcon-CJ49KQmj.js";import"./LoadingSpinner-B9HNe0AP.js";const Et={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-10 pb-16"},Wt={class:"relative overflow-hidden rounded-3xl border border-gray-200/60 dark:border-white/10 bg-white dark:bg-dark-900 shadow-sm"},Ft={class:"relative p-7 sm:p-10"},Kt={class:"flex flex-col gap-5 sm:flex-row sm:items-start sm:justify-between"},Jt={class:"min-w-0"},Ht={key:0,class:"mt-3 text-xs text-gray-500 dark:text-gray-500"},zt={class:"font-semibold"},qt={class:"flex items-center gap-2 shrink-0"},Qt=["disabled"],Zt={key:0,class:"card p-0 overflow-hidden rounded-2xl"},Xt={key:1,class:"grid grid-cols-1 lg:grid-cols-[260px_1fr] xl:grid-cols-[300px_1fr] gap-6 lg:gap-8"},Yt={class:"space-y-4"},te={class:"lg:hidden"},ee={class:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar"},ae=["onClick"],se={class:"whitespace-nowrap"},re={class:"hidden lg:block"},le={class:"card p-0 overflow-hidden rounded-2xl sticky top-24"},oe={class:"p-4 border-b border-gray-200/70 dark:border-white/10 bg-white/70 dark:bg-dark-900/50 backdrop-blur-xl"},de={class:"mt-3"},ne={class:"p-2"},ie={class:"px-3 pt-3 pb-1 text-[10px] font-bold tracking-widest uppercase text-gray-400 dark:text-gray-500"},pe=["onClick"],ue={class:"flex-1"},ge={key:0,class:"p-6 text-sm text-gray-500 dark:text-gray-400"},xe={class:"min-w-0 space-y-6 lg:space-y-8"},ce={key:0,class:"card p-0 overflow-hidden rounded-2xl"},be={class:"px-6 py-6 sm:px-8"},me={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5"},ye={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},ke={class:"flex items-center justify-between gap-3"},fe={class:"flex items-center gap-3 min-w-0"},ve={class:"h-10 w-10 rounded-2xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center shrink-0"},we={class:"min-w-0"},_e={class:"mt-0.5 text-xs text-gray-500 dark:text-gray-400 truncate"},he={class:"font-semibold"},Ce={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},Te={class:"flex items-center justify-between gap-3"},Pe={class:"flex items-center gap-3 min-w-0"},Se={class:"h-10 w-10 rounded-2xl bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center shrink-0"},Ue={class:"min-w-0"},Ve={class:"mt-0.5 text-xs text-gray-500 dark:text-gray-400 truncate"},Ae={class:"font-semibold"},Oe={key:1,class:"card p-0 overflow-hidden rounded-2xl"},$e={class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},Ne={class:"flex items-center gap-2 cursor-pointer select-none"},je={class:"text-xs font-semibold text-gray-500 dark:text-gray-400"},Ge={class:"px-6 py-6 sm:px-8 space-y-6"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},De={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden bg-gray-50/60 dark:bg-dark-900/30"},Ie={class:"p-5 space-y-4 bg-white dark:bg-dark-950 border-t border-gray-200/70 dark:border-white/10"},Re={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},Me=["disabled"],Be=["disabled"],Ee=["disabled"],We={key:2,class:"card p-0 overflow-hidden rounded-2xl"},Fe={class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},Ke={class:"flex items-center gap-2 cursor-pointer select-none"},Je={class:"text-xs font-semibold text-gray-500 dark:text-gray-400"},He={class:"px-6 py-6 sm:px-8 space-y-6"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},qe={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},Qe=["disabled"],Ze=["disabled"],Xe=["disabled"],Ye={key:3,class:"card p-0 overflow-hidden rounded-2xl"},ta={class:"px-6 py-6 sm:px-8 space-y-6"},ea={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},aa={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},sa=["disabled"],ra=["disabled"],la={key:4,class:"card p-0 overflow-hidden rounded-2xl"},oa={class:"px-6 py-6 sm:px-8 space-y-4"},da={class:"flex items-start justify-between gap-3"},na={class:"min-w-0"},ia={class:"font-bold text-gray-900 dark:text-white"},pa={class:"mt-2 text-sm text-gray-600 dark:text-gray-400 whitespace-pre-line"},ua={class:"mt-4 flex gap-3"},ga=["onClick"],xa=["onClick"],ca={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},ba={key:5,class:"card p-0 overflow-hidden rounded-2xl"},ma={class:"px-6 py-6 sm:px-8 space-y-6"},ya={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},ka={class:"flex flex-col lg:flex-row gap-4 items-end"},fa={class:"flex-1 w-full"},va={class:"w-full lg:w-1/4"},wa={class:"w-full lg:w-1/3"},_a={class:"flex gap-2"},ha={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden"},Ca={class:"max-h-72 overflow-y-auto"},Ta={class:"w-full text-left"},Pa={class:"text-sm divide-y divide-gray-200 dark:divide-white/10 bg-white dark:bg-dark-950"},Sa={class:"px-4 py-3 text-gray-900 dark:text-white"},Ua={class:"px-4 py-3 text-gray-500 dark:text-gray-400"},Va={class:"px-4 py-3 text-gray-500 dark:text-gray-400 font-mono text-xs"},Aa={class:"px-4 py-3 text-right space-x-3"},Oa=["onClick"],$a=["onClick"],Na={key:0},ja={key:6,class:"card p-0 overflow-hidden rounded-2xl"},Ga={class:"px-6 py-6 sm:px-8 space-y-6"},La={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},Da={class:"flex flex-col lg:flex-row gap-4 items-end"},Ia={class:"flex-1 w-full"},Ra={class:"flex-1 w-full"},Ma={class:"flex gap-2"},Ba={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden"},Ea={class:"max-h-72 overflow-y-auto"},Wa={class:"w-full text-left"},Fa={class:"text-sm divide-y divide-gray-200 dark:divide-white/10 bg-white dark:bg-dark-950"},Ka={class:"px-4 py-3 text-gray-900 dark:text-white"},Ja={class:"px-4 py-3 text-gray-500 dark:text-gray-400 font-mono text-xs"},Ha={class:"px-4 py-3 text-right space-x-3"},za=["onClick"],qa=["onClick"],Qa={key:0},Za={key:7,class:"card p-0 overflow-hidden rounded-2xl"},Xa={class:"px-6 py-6 sm:px-8 space-y-6"},Ya={class:"grid grid-cols-1 lg:grid-cols-2 gap-5"},ts={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},es={key:0,class:"space-y-2"},as=["onUpdate:modelValue","placeholder"],ss=["onClick"],rs={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},ls={class:"pt-2"},os=["disabled"],ds={key:8,class:"card p-0 overflow-hidden rounded-2xl"},ns={class:"px-6 py-6 sm:px-8 space-y-4"},is={class:"flex flex-col sm:flex-row gap-2"},ps=["value"],us={key:9,class:"space-y-6"},gs={class:"card p-0 overflow-hidden rounded-2xl"},xs={class:"px-6 py-6 sm:px-8 space-y-6"},cs={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},bs={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},ms={class:"text-3xl font-black text-gray-900 dark:text-white"},ys={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},ks={class:"text-3xl font-black text-emerald-600 dark:text-emerald-300"},fs={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},vs={class:"text-3xl font-black text-red-600 dark:text-red-300"},ws={class:"flex flex-col sm:flex-row sm:items-end gap-3"},_s={class:"flex flex-wrap gap-2"},hs={class:"card p-0 overflow-hidden rounded-2xl"},Cs={class:"px-6 py-4 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-gray-50/80 dark:bg-dark-900/40 backdrop-blur flex items-center justify-between gap-4"},Ts={class:"text-xs text-gray-500 dark:text-gray-400"},Ps={class:"overflow-x-auto max-h-96"},Ss={class:"min-w-full divide-y divide-gray-200 dark:divide-white/10"},Us={class:"bg-white dark:bg-dark-950 divide-y divide-gray-200 dark:divide-white/10"},Vs={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap"},As={class:"px-4 py-3 text-xs text-gray-900 dark:text-gray-200"},Os={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400"},$s={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 max-w-[260px] truncate"},Ns={class:"px-4 py-3"},js={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 max-w-[260px] truncate"},Gs={key:0},Ls={key:10,class:"card p-0 overflow-hidden rounded-2xl"},Ds={class:"px-6 py-6 sm:px-8"},Is={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Rs={class:"flex items-center justify-center min-h-screen pt-4 px-4"},Ms={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},Bs={class:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center"},Es={class:"text-lg font-medium text-gray-900 dark:text-white"},Ws=["disabled"],Fs={key:0,class:"bg-blue-50 dark:bg-gray-900 p-3 rounded-lg border dark:border-gray-700"},Ks={class:"flex flex-wrap gap-1"},Js=["onClick"],Hs={class:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700"},zs="/api/v1/settings",er={__name:"Index",setup(qs){const H=b(!0),B=b(!1),y=b(!1),k=b(""),z=b(null),q=b(""),O=b({wa:{},tg:{}}),i=A({base_url:"",group_url:"",token:"",sender_number:"",target_number:"",group_id:"",recap_group_id:"",is_active:0,failover_mode:"manual"}),u=A({base_url:"",token:"",sender_number:"",target_number:"",group_id:"",footer:"",is_active:0}),U=A({bot_token:"",chat_id:""}),G=b([]),C=A({code:"",message:""}),E=b(null),$=b(!1),Q=b([]),L=b([]),T=A({id:0,pop_name:"",wa_number:"",group_id:""}),W=b(!1),D=b([]),N=A({id:0,name:"",group_id:""}),F=b(!1),v=A({teknisi_fee_install:0,sales_fee_install:0,expense_categories:[]}),Z=b(""),K=b([]),J=b({total:0,sent:0,failed:0}),w=A({search:"",status:"",range:""}),m=b("status"),at=[{id:"status",name:"Gateway Status",icon:"wifi"},{id:"wa",name:"WhatsApp",icon:"chat"},{id:"mpwa",name:"WA Backup (MPWA)",icon:"bolt"},{id:"tg",name:"Telegram",icon:"paper-airplane"},{id:"templates",name:"Template Pesan",icon:"document-text"},{id:"pops",name:"Manajemen POP",icon:"map-pin"},{id:"recap_groups",name:"Group Rekap",icon:"user-group"},{id:"fee",name:"Fee Teknisi",icon:"cash"},{id:"public_url",name:"Link Isolir",icon:"link"},{id:"logs",name:"Log Notifikasi",icon:"clock"},{id:"system_update",name:"Update Sistem",icon:"refresh"}],xt=[{title:"Gateway",items:["status","wa","mpwa","tg"]},{title:"Pesan & Notifikasi",items:["templates","logs"]},{title:"Operasional",items:["pops","recap_groups","fee"]},{title:"System",items:["public_url","system_update"]}],ct=gt(()=>Object.fromEntries(at.map(s=>[s.id,s]))),st=gt(()=>{const s=q.value.trim().toLowerCase(),e=ct.value;return xt.map(_=>{const n=_.items.map(f=>e[f]).filter(Boolean).filter(f=>!s||f.name.toLowerCase().includes(s));return{..._,items:n}}).filter(_=>_.items.length>0)});async function g(s,e={}){return(await fetch(`${zs}${s}`,{headers:{Accept:"application/json","Content-Type":"application/json",...e.headers},...e})).json()}async function rt(s={}){var _;const e=!!s.refresh;e?B.value=!0:H.value=!0;try{const n=await g("");if(n.gateway_status&&(O.value=n.gateway_status),n.wa_config&&Object.assign(i,{base_url:n.wa_config.base_url||"",group_url:n.wa_config.group_url||"",token:n.wa_config.token||"",sender_number:n.wa_config.sender_number||"",target_number:n.wa_config.target_number||"",group_id:n.wa_config.group_id||"",recap_group_id:n.wa_config.recap_group_id||"",is_active:n.wa_config.is_active?1:0}),n.wa_failover_mode&&(i.failover_mode=n.wa_failover_mode),(_=n.wa_gateways)!=null&&_.backup){const f=n.wa_gateways.backup,I=f.extra||{};Object.assign(u,{base_url:f.base_url||"",token:f.token||"",sender_number:f.sender_number||"",target_number:I.target_number||"",group_id:f.group_id||"",footer:I.footer||"",is_active:f.is_active?1:0})}n.tg_config&&(U.bot_token=n.tg_config.bot_token||"",U.chat_id=n.tg_config.chat_id||""),G.value=n.templates||[],L.value=n.pops||[],D.value=n.recap_groups||[],n.fee_settings&&Object.assign(v,n.fee_settings),Z.value=n.public_url||""}catch(n){console.error("Load settings error:",n)}finally{e?B.value=!1:H.value=!1,z.value=new Date}P(),bt()}async function P(){const s=new URLSearchParams;w.search&&s.set("search",w.search),w.status&&s.set("status",w.status),w.range&&s.set("range",w.range);const e=await g(`/notif-logs?${s}`);K.value=e.data||[],e.stats&&(J.value=e.stats)}async function bt(){const s=await g("/install-variables");Q.value=s.data||[]}async function mt(){y.value=!0;try{await g("/wa",{method:"POST",body:JSON.stringify(i)}),alert("WhatsApp config tersimpan!")}catch{alert("Gagal menyimpan")}finally{y.value=!1}}async function yt(){y.value=!0;try{await g("/wa-backup",{method:"POST",body:JSON.stringify({...u,failover_mode:i.failover_mode})}),alert("MPWA config tersimpan!")}catch{alert("Gagal menyimpan")}finally{y.value=!1}}async function kt(){y.value=!0;try{await g("/tg",{method:"POST",body:JSON.stringify(U)}),alert("Telegram config tersimpan!")}catch{alert("Gagal menyimpan")}finally{y.value=!1}}async function lt(s=!1){k.value=s?"wa_group":"wa_personal";try{const e=await g("/test-wa",{method:"POST",body:JSON.stringify({url:i.base_url,token:i.token,sender:i.sender_number,target:s?i.group_id:i.target_number,is_group:s})});alert(e.status==="success"?"Berhasil!":`Gagal: ${e.message}`),P()}catch(e){alert("Error: "+e.message)}finally{k.value=""}}async function ot(s=!1){k.value=s?"mpwa_group":"mpwa_personal";try{const e=await g("/test-mpwa",{method:"POST",body:JSON.stringify({url:u.base_url,token:u.token,sender:u.sender_number,target:s?u.group_id:u.target_number,footer:u.footer,is_group:s})});alert(e.status==="success"?"Berhasil!":`Gagal: ${e.message}`),P()}catch(e){alert("Error: "+e.message)}finally{k.value=""}}async function ft(){k.value="tg";try{const s=await g("/test-tg",{method:"POST",body:JSON.stringify(U)});alert(s.status==="success"?"Berhasil!":`Gagal: ${s.message}`),P()}catch(s){alert("Error: "+s.message)}finally{k.value=""}}function vt(s){C.code=s.code,C.message=s.message,E.value=s.code,$.value=!0}function wt(){C.code="",C.message="",E.value=null,$.value=!0}async function _t(){await g("/templates",{method:"POST",body:JSON.stringify(C)}),$.value=!1;const s=await g("/templates");G.value=s.data||[]}async function ht(s){if(!confirm(`Hapus template "${s.code}"?`))return;await g(`/templates/${s.id}`,{method:"DELETE"});const e=await g("/templates");G.value=e.data||[]}function Ct(s){C.message+=`{${s}}`}function Tt(s){Object.assign(T,{id:s.id,pop_name:s.pop_name,wa_number:s.wa_number||"",group_id:s.group_id||""}),W.value=!0}function dt(){Object.assign(T,{id:0,pop_name:"",wa_number:"",group_id:""}),W.value=!1}async function Pt(){const s=await g("/pops",{method:"POST",body:JSON.stringify(T)});if(s.status==="error"){alert(s.message);return}dt();const e=await g("/pops");L.value=e.data||[]}async function St(s){if(!confirm(`Hapus POP "${s.pop_name}"?`))return;await g(`/pops/${s.id}`,{method:"DELETE"});const e=await g("/pops");L.value=e.data||[]}function Ut(s){Object.assign(N,{id:s.id,name:s.name,group_id:s.group_id}),F.value=!0}function nt(){Object.assign(N,{id:0,name:"",group_id:""}),F.value=!1}async function Vt(){const s=await g("/recap-groups",{method:"POST",body:JSON.stringify(N)});if(s.status==="error"){alert(s.message);return}nt();const e=await g("/recap-groups");D.value=e.data||[]}async function At(s){if(!confirm(`Hapus group "${s.name}"?`))return;await g(`/recap-groups/${s.id}`,{method:"DELETE"});const e=await g("/recap-groups");D.value=e.data||[]}function Ot(){v.expense_categories.push("")}function $t(s){v.expense_categories.splice(s,1)}async function Nt(){y.value=!0;try{await g("/fee-settings",{method:"POST",body:JSON.stringify(v)}),alert("Fee settings tersimpan!")}catch{alert("Gagal")}finally{y.value=!1}}function jt(){navigator.clipboard.writeText(Z.value),alert("URL disalin!")}function X(s){return s?new Date(s).toLocaleString("id-ID"):"-"}function Y(s){return s=(s||"").toLowerCase(),["success","sent","ok"].includes(s)?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-400":["failed","error","fail"].includes(s)?"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-300"}return Gt(rt),(s,e)=>(l(),r(h,null,[V(Lt(Dt),{title:"Pengaturan"}),V(Mt,null,{default:It(()=>{var _,n,f,I,it,pt;return[t("div",Et,[t("div",Wt,[e[42]||(e[42]=t("div",{class:"pointer-events-none absolute inset-0"},[t("div",{class:"absolute -top-24 -right-24 h-72 w-72 rounded-full bg-gradient-to-br from-primary-500/25 to-primary-700/10 blur-3xl"}),t("div",{class:"absolute -bottom-24 -left-24 h-72 w-72 rounded-full bg-gradient-to-br from-emerald-500/10 to-cyan-500/10 blur-3xl"})],-1)),t("div",Ft,[t("div",Kt,[t("div",Jt,[e[40]||(e[40]=t("h1",{class:"text-3xl sm:text-4xl font-black tracking-tight text-gray-900 dark:text-white"},"Pengaturan",-1)),e[41]||(e[41]=t("p",{class:"mt-2 text-sm sm:text-base text-gray-600 dark:text-gray-400 max-w-2xl"}," Konfigurasi gateway, notifikasi, template, POP, dan fee teknisi. ",-1)),z.value?(l(),r("p",Ht,[e[39]||(e[39]=j(" Terakhir refresh: ",-1)),t("span",zt,o(z.value.toLocaleString("id-ID")),1)])):x("",!0)]),t("div",qt,[t("button",{onClick:e[0]||(e[0]=a=>rt({refresh:!0})),disabled:B.value,class:"btn btn-secondary btn-press gap-2"},[V(M,{name:"refresh",className:"h-4 w-4"}),t("span",null,o(B.value?"Refreshing...":"Refresh"),1)],8,Qt)])])])]),H.value?(l(),r("div",Zt,[...e[43]||(e[43]=[t("div",{class:"p-10 flex items-center justify-center gap-3"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t("span",{class:"text-gray-600 dark:text-gray-300 text-sm"},"Memuat data...")],-1)])])):(l(),r("div",Xt,[t("div",Yt,[t("div",te,[t("div",ee,[(l(),r(h,null,S(at,a=>t("button",{key:a.id,onClick:c=>m.value=a.id,class:R(["shrink-0 inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-semibold transition border",m.value===a.id?"bg-primary-600 text-white border-primary-600 shadow-sm shadow-primary-500/20":"bg-white dark:bg-dark-900 text-gray-700 dark:text-gray-200 border-gray-200/70 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/5"])},[V(M,{name:a.icon,className:m.value===a.id?"h-4 w-4 text-white":"h-4 w-4 text-gray-400 dark:text-gray-500"},null,8,["name","className"]),t("span",se,o(a.name),1)],10,ae)),64))])]),t("div",re,[t("div",le,[t("div",oe,[e[44]||(e[44]=t("p",{class:"text-[11px] font-black tracking-widest text-gray-400 dark:text-gray-500 uppercase"},"Navigasi",-1)),t("div",de,[d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>q.value=a),type:"text",class:"input !rounded-xl",placeholder:"Cari pengaturan..."},null,512),[[p,q.value]])])]),t("div",ne,[(l(!0),r(h,null,S(st.value,a=>(l(),r(h,{key:a.title},[t("p",ie,o(a.title),1),(l(!0),r(h,null,S(a.items,c=>(l(),r("button",{key:c.id,onClick:tt=>m.value=c.id,class:R(["group w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-semibold transition-all text-left",m.value===c.id?"bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-lg shadow-primary-500/20 ring-1 ring-primary-500/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/5"])},[V(M,{name:c.icon,className:m.value===c.id?"h-4 w-4 text-white":"h-4 w-4 text-gray-400 group-hover:text-gray-700 dark:text-gray-500 dark:group-hover:text-gray-200"},null,8,["name","className"]),t("span",ue,o(c.name),1)],10,pe))),128))],64))),128)),st.value.length===0?(l(),r("div",ge," Menu tidak ditemukan. ")):x("",!0)])])])]),t("div",xe,[m.value==="status"?(l(),r("div",ce,[e[49]||(e[49]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Gateway Status"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Ringkasan kondisi & aktivitas terakhir")],-1)),t("div",be,[t("div",me,[t("div",ye,[t("div",ke,[t("div",fe,[t("div",ve,[V(M,{name:"chat",className:"h-5 w-5 text-emerald-700 dark:text-emerald-300"})]),t("div",we,[e[46]||(e[46]=t("div",{class:"text-sm font-bold text-gray-900 dark:text-white"},"WhatsApp",-1)),t("div",_e,[e[45]||(e[45]=j(" Last Log: ",-1)),t("span",he,o(X((_=O.value.wa)==null?void 0:_.last_time)),1)])])]),t("span",{class:R([Y((n=O.value.wa)==null?void 0:n.last_status),"px-2 py-0.5 rounded-md text-xs font-bold uppercase whitespace-nowrap"])},o(((f=O.value.wa)==null?void 0:f.last_status)||"-"),3)])]),t("div",Ce,[t("div",Te,[t("div",Pe,[t("div",Se,[V(M,{name:"paper-airplane",className:"h-5 w-5 text-blue-700 dark:text-blue-300"})]),t("div",Ue,[e[48]||(e[48]=t("div",{class:"text-sm font-bold text-gray-900 dark:text-white"},"Telegram",-1)),t("div",Ve,[e[47]||(e[47]=j(" Last Log: ",-1)),t("span",Ae,o(X((I=O.value.tg)==null?void 0:I.last_time)),1)])])]),t("span",{class:R([Y((it=O.value.tg)==null?void 0:it.last_status),"px-2 py-0.5 rounded-md text-xs font-bold uppercase whitespace-nowrap"])},o(((pt=O.value.tg)==null?void 0:pt.last_status)||"-"),3)])])])])])):x("",!0),m.value==="wa"?(l(),r("div",Oe,[t("div",$e,[e[50]||(e[50]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"WhatsApp (Gateway Utama)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Gateway utama untuk notifikasi personal dan group.")],-1)),t("label",Ne,[t("span",je,o(i.is_active?"Aktif":"Non-aktif"),1),d(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>i.is_active=a),"true-value":1,"false-value":0,class:"h-5 w-5 rounded-md text-primary-600 dark:bg-gray-700"},null,512),[[ut,i.is_active]])])]),t("div",Ge,[t("div",Le,[t("div",null,[e[51]||(e[51]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL Pesan Personal",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.base_url=a),type:"url",class:"input w-full",placeholder:"https://api.balesotomatis.id/v1/send-message"},null,512),[[p,i.base_url]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"API Token",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.token=a),type:"text",class:"input w-full",placeholder:"Token..."},null,512),[[p,i.token]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Device Key (Sender)",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>i.sender_number=a),type:"text",class:"input w-full",placeholder:"Device Key..."},null,512),[[p,i.sender_number]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Target Tes",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.target_number=a),type:"text",class:"input w-full",placeholder:"08xxx"},null,512),[[p,i.target_number]])]),t("div",null,[e[56]||(e[56]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Mode Failover",-1)),d(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>i.failover_mode=a),class:"input w-full"},[...e[55]||(e[55]=[t("option",{value:"manual"},"Manual (tetap gateway aktif)",-1),t("option",{value:"auto"},"Auto (pindah ke backup jika gagal)",-1)])],512),[[et,i.failover_mode]]),e[57]||(e[57]=t("p",{class:"text-xs text-gray-400 mt-1"},"Manual: aktifkan hanya gateway yang ingin dipakai. Auto: gunakan backup bila primary gagal.",-1))])]),t("details",De,[e[62]||(e[62]=t("summary",{class:"px-5 py-4 cursor-pointer text-sm font-bold text-gray-700 dark:text-gray-200 hover:bg-gray-100/80 dark:hover:bg-white/5"}," Pengaturan Group (Advanced) ",-1)),t("div",Ie,[t("div",null,[e[58]||(e[58]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL Pesan Group",-1)),d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>i.group_url=a),type:"url",class:"input w-full",placeholder:"https://api.balesotomatis.id/v1/send-group-message"},null,512),[[p,i.group_url]])]),t("div",null,[e[59]||(e[59]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Default Group ID",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>i.group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[p,i.group_id]])]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group Laporan Rekap",-1)),d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>i.recap_group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[p,i.recap_group_id]]),e[61]||(e[61]=t("p",{class:"text-xs text-gray-400 mt-1"},"Grup khusus untuk laporan harian teknisi. Jika kosong, gunakan Default Group ID.",-1))])])]),t("div",Re,[t("button",{onClick:e[11]||(e[11]=a=>lt(!1)),disabled:k.value==="wa_personal",class:"btn btn-secondary"},o(k.value==="wa_personal"?"Sending...":"Tes Personal"),9,Me),t("button",{onClick:e[12]||(e[12]=a=>lt(!0)),disabled:k.value==="wa_group",class:"btn btn-secondary"},o(k.value==="wa_group"?"Sending...":"Tes Group"),9,Be),t("button",{onClick:mt,disabled:y.value,class:"btn btn-primary ml-auto"},o(y.value?"Menyimpan...":"Simpan"),9,Ee)])])])):x("",!0),m.value==="mpwa"?(l(),r("div",We,[t("div",Fe,[e[63]||(e[63]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"WhatsApp Backup (MPWA)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Gateway cadangan untuk failover atau penggunaan manual.")],-1)),t("label",Ke,[t("span",Je,o(u.is_active?"Aktif":"Non-aktif"),1),d(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=a=>u.is_active=a),"true-value":1,"false-value":0,class:"h-5 w-5 rounded-md text-orange-600 dark:bg-gray-700"},null,512),[[ut,u.is_active]])])]),t("div",He,[t("div",ze,[t("div",null,[e[64]||(e[64]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL API",-1)),d(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>u.base_url=a),type:"url",class:"input w-full",placeholder:"https://app.mpwa.net/send-message"},null,512),[[p,u.base_url]])]),t("div",null,[e[65]||(e[65]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"API Key",-1)),d(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>u.token=a),type:"text",class:"input w-full"},null,512),[[p,u.token]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Sender",-1)),d(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>u.sender_number=a),type:"text",class:"input w-full",placeholder:"62888xxxx"},null,512),[[p,u.sender_number]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Target Tes",-1)),d(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>u.target_number=a),type:"text",class:"input w-full",placeholder:"62888xxxx atau xxx@g.us"},null,512),[[p,u.target_number]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Default Group ID",-1)),d(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>u.group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[p,u.group_id]])]),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Footer (Opsional)",-1)),d(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>u.footer=a),type:"text",class:"input w-full",placeholder:"Sent via mpwa"},null,512),[[p,u.footer]])])]),t("div",qe,[t("button",{onClick:e[20]||(e[20]=a=>ot(!1)),disabled:k.value==="mpwa_personal",class:"btn btn-secondary"},o(k.value==="mpwa_personal"?"Sending...":"Tes Personal"),9,Qe),t("button",{onClick:e[21]||(e[21]=a=>ot(!0)),disabled:k.value==="mpwa_group",class:"btn btn-secondary"},o(k.value==="mpwa_group"?"Sending...":"Tes Group"),9,Ze),t("button",{onClick:yt,disabled:y.value,class:"btn btn-primary ml-auto"},o(y.value?"Menyimpan...":"Simpan"),9,Xe)])])])):x("",!0),m.value==="tg"?(l(),r("div",Ye,[e[72]||(e[72]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Telegram Backup"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Backup notifikasi jika WhatsApp bermasalah.")],-1)),t("div",ta,[t("div",ea,[t("div",null,[e[70]||(e[70]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Bot Token",-1)),d(t("input",{"onUpdate:modelValue":e[22]||(e[22]=a=>U.bot_token=a),type:"text",class:"input w-full",placeholder:"123:ABC..."},null,512),[[p,U.bot_token]])]),t("div",null,[e[71]||(e[71]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Chat ID",-1)),d(t("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>U.chat_id=a),type:"text",class:"input w-full",placeholder:"-100xxx"},null,512),[[p,U.chat_id]])])]),t("div",aa,[t("button",{onClick:ft,disabled:k.value==="tg",class:"btn btn-secondary"},o(k.value==="tg"?"Sending...":"Tes Kirim"),9,sa),t("button",{onClick:kt,disabled:y.value,class:"btn btn-primary ml-auto"},o(y.value?"Menyimpan...":"Simpan"),9,ra)])])])):x("",!0),m.value==="templates"?(l(),r("div",la,[t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},[e[73]||(e[73]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Template Pesan"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Kelola template notifikasi (WA/Telegram) yang dipakai sistem.")],-1)),t("button",{onClick:wt,class:"btn btn-primary shrink-0"},"+ Tambah")]),t("div",oa,[(l(!0),r(h,null,S(G.value,a=>(l(),r("div",{key:a.id||a.code,class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},[t("div",da,[t("div",na,[t("h3",ia,o(a.code),1),t("p",pa,o(a.message),1)])]),t("div",ua,[t("button",{onClick:c=>vt(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,ga),t("button",{onClick:c=>ht(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,xa)])]))),128)),G.value.length===0?(l(),r("div",ca,"Belum ada template")):x("",!0)])])):x("",!0),m.value==="pops"?(l(),r("div",ba,[e[79]||(e[79]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Manajemen Data POP"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Pengaturan area & group notifikasi spesifik.")],-1)),t("div",ma,[t("div",ya,[t("div",ka,[t("div",fa,[e[74]||(e[74]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Nama POP / Area",-1)),d(t("input",{"onUpdate:modelValue":e[24]||(e[24]=a=>T.pop_name=a),type:"text",class:"input w-full",placeholder:"Contoh: Krui Selatan..."},null,512),[[p,T.pop_name]])]),t("div",va,[e[75]||(e[75]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"WA Admin (PIC)",-1)),d(t("input",{"onUpdate:modelValue":e[25]||(e[25]=a=>T.wa_number=a),type:"text",class:"input w-full",placeholder:"08xxx..."},null,512),[[p,T.wa_number]])]),t("div",wa,[e[76]||(e[76]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group ID (Notif)",-1)),d(t("input",{"onUpdate:modelValue":e[26]||(e[26]=a=>T.group_id=a),type:"text",class:"input w-full",placeholder:"xxxx@g.us"},null,512),[[p,T.group_id]])]),t("div",_a,[W.value?(l(),r("button",{key:0,onClick:dt,class:"btn btn-secondary"},"Batal")):x("",!0),t("button",{onClick:Pt,class:"btn btn-primary whitespace-nowrap"},o(W.value?"Update":"+ Tambah"),1)])])]),t("div",ha,[t("div",Ca,[t("table",Ta,[e[78]||(e[78]=t("thead",{class:"bg-gray-50/80 dark:bg-dark-900/60 text-[11px] uppercase font-black tracking-widest text-gray-500 sticky top-0"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Nama Area"),t("th",{class:"px-4 py-3"},"PIC WA"),t("th",{class:"px-4 py-3"},"Group ID"),t("th",{class:"px-4 py-3 text-right"},"Aksi")])],-1)),t("tbody",Pa,[(l(!0),r(h,null,S(L.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",Sa,o(a.pop_name),1),t("td",Ua,o(a.wa_number||"-"),1),t("td",Va,o(a.group_id||"-"),1),t("td",Aa,[t("button",{onClick:c=>Tt(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,Oa),t("button",{onClick:c=>St(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,$a)])]))),128)),L.value.length===0?(l(),r("tr",Na,[...e[77]||(e[77]=[t("td",{colspan:"4",class:"px-4 py-10 text-center text-gray-500 dark:text-gray-400"},"Belum ada POP",-1)])])):x("",!0)])])])])])])):x("",!0),m.value==="recap_groups"?(l(),r("div",ja,[e[84]||(e[84]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Manajemen Group Rekap"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Kelola grup WhatsApp untuk laporan teknisi.")],-1)),t("div",Ga,[t("div",La,[t("div",Da,[t("div",Ia,[e[80]||(e[80]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Nama Group Rekap",-1)),d(t("input",{"onUpdate:modelValue":e[27]||(e[27]=a=>N.name=a),type:"text",class:"input w-full",placeholder:"Contoh: Rekap Jakarta..."},null,512),[[p,N.name]])]),t("div",Ra,[e[81]||(e[81]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group ID WhatsApp",-1)),d(t("input",{"onUpdate:modelValue":e[28]||(e[28]=a=>N.group_id=a),type:"text",class:"input w-full",placeholder:"xxxx@g.us"},null,512),[[p,N.group_id]])]),t("div",Ma,[F.value?(l(),r("button",{key:0,onClick:nt,class:"btn btn-secondary"},"Batal")):x("",!0),t("button",{onClick:Vt,class:"btn btn-primary whitespace-nowrap"},o(F.value?"Update":"+ Tambah"),1)])])]),t("div",Ba,[t("div",Ea,[t("table",Wa,[e[83]||(e[83]=t("thead",{class:"bg-gray-50/80 dark:bg-dark-900/60 text-[11px] uppercase font-black tracking-widest text-gray-500 sticky top-0"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Nama Group"),t("th",{class:"px-4 py-3"},"Group ID"),t("th",{class:"px-4 py-3 text-right"},"Aksi")])],-1)),t("tbody",Fa,[(l(!0),r(h,null,S(D.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",Ka,o(a.name),1),t("td",Ja,o(a.group_id),1),t("td",Ha,[t("button",{onClick:c=>Ut(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,za),t("button",{onClick:c=>At(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,qa)])]))),128)),D.value.length===0?(l(),r("tr",Qa,[...e[82]||(e[82]=[t("td",{colspan:"3",class:"px-4 py-10 text-center text-gray-500 dark:text-gray-400"},"Belum ada group",-1)])])):x("",!0)])])])])])])):x("",!0),m.value==="fee"?(l(),r("div",Za,[e[91]||(e[91]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Konfigurasi Fee Teknisi"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Atur fee instalasi dan kategori pengeluaran.")],-1)),t("div",Xa,[t("div",Ya,[t("div",null,[e[85]||(e[85]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Fee Instalasi - Teknisi (Rp)",-1)),d(t("input",{"onUpdate:modelValue":e[29]||(e[29]=a=>v.teknisi_fee_install=a),type:"number",min:"0",class:"input w-full",placeholder:"0"},null,512),[[p,v.teknisi_fee_install,void 0,{number:!0}]]),e[86]||(e[86]=t("p",{class:"text-xs text-gray-400 mt-1"},"Fee default untuk setiap teknisi per instalasi",-1))]),t("div",null,[e[87]||(e[87]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Fee Instalasi - Sales (Rp)",-1)),d(t("input",{"onUpdate:modelValue":e[30]||(e[30]=a=>v.sales_fee_install=a),type:"number",min:"0",class:"input w-full",placeholder:"0"},null,512),[[p,v.sales_fee_install,void 0,{number:!0}]]),e[88]||(e[88]=t("p",{class:"text-xs text-gray-400 mt-1"},"Fee default untuk setiap sales per instalasi",-1))])]),t("div",ts,[t("div",{class:"flex items-center justify-between gap-3 mb-4"},[e[89]||(e[89]=t("div",null,[t("h5",{class:"text-sm font-black tracking-tight text-gray-900 dark:text-white"},"Kategori Pengeluaran"),t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Dipakai untuk input pengeluaran teknisi.")],-1)),t("button",{onClick:Ot,class:"btn btn-secondary shrink-0"},"+ Tambah")]),v.expense_categories.length>0?(l(),r("div",es,[(l(!0),r(h,null,S(v.expense_categories,(a,c)=>(l(),r("div",{key:c,class:"flex items-center gap-2"},[d(t("input",{"onUpdate:modelValue":tt=>v.expense_categories[c]=tt,type:"text",class:"input flex-1",placeholder:`Kategori ${c+1}`},null,8,as),[[p,v.expense_categories[c]]]),t("button",{onClick:tt=>$t(c),class:"h-10 w-10 rounded-xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-900 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition",title:"Hapus"}," ✕ ",8,ss)]))),128))])):(l(),r("div",rs,[...e[90]||(e[90]=[j(" Belum ada kategori. Klik ",-1),t("span",{class:"font-semibold"},"Tambah",-1),j(" untuk membuat. ",-1)])]))]),t("div",ls,[t("button",{onClick:Nt,disabled:y.value,class:"btn btn-primary"},o(y.value?"Menyimpan...":"Simpan Konfigurasi"),9,os)])])])):x("",!0),m.value==="public_url"?(l(),r("div",ds,[e[93]||(e[93]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Link Isolir (URL Publik)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Link tenant untuk halaman isolir/direct/chat.")],-1)),t("div",ns,[t("div",is,[t("input",{value:Z.value,readonly:"",class:"input flex-1 font-mono text-sm bg-gray-50 dark:bg-gray-800",placeholder:"Belum tersedia"},null,8,ps),t("button",{onClick:jt,class:"btn btn-primary shrink-0"},"Copy")]),e[92]||(e[92]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bagikan link ini ke pelanggan agar masuk ke halaman isolir/chat.",-1))])])):x("",!0),m.value==="logs"?(l(),r("div",us,[t("div",gs,[e[99]||(e[99]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Log Notifikasi"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Monitoring status pengiriman notifikasi (WA/Telegram).")],-1)),t("div",xs,[t("div",cs,[t("div",bs,[t("div",ms,o(J.value.total),1),e[94]||(e[94]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Total",-1))]),t("div",ys,[t("div",ks,o(J.value.sent),1),e[95]||(e[95]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Terkirim",-1))]),t("div",fs,[t("div",vs,o(J.value.failed),1),e[96]||(e[96]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Gagal",-1))])]),t("div",ws,[t("div",_s,[d(t("select",{"onUpdate:modelValue":e[31]||(e[31]=a=>w.range=a),onChange:P,class:"input text-sm !rounded-xl"},[...e[97]||(e[97]=[t("option",{value:""},"All Time",-1),t("option",{value:"24h"},"24 Jam",-1),t("option",{value:"7d"},"7 Hari",-1),t("option",{value:"30d"},"30 Hari",-1)])],544),[[et,w.range]]),d(t("select",{"onUpdate:modelValue":e[32]||(e[32]=a=>w.status=a),onChange:P,class:"input text-sm !rounded-xl"},[...e[98]||(e[98]=[t("option",{value:""},"All Status",-1),t("option",{value:"success"},"Success",-1),t("option",{value:"failed"},"Failed",-1)])],544),[[et,w.status]]),d(t("input",{"onUpdate:modelValue":e[33]||(e[33]=a=>w.search=a),onInput:P,type:"text",class:"input text-sm w-56 !rounded-xl",placeholder:"Cari..."},null,544),[[p,w.search]])]),t("button",{onClick:P,class:"btn btn-secondary sm:ml-auto"},"Refresh")])])]),t("div",hs,[t("div",Cs,[t("div",null,[e[100]||(e[100]=t("h3",{class:"text-sm font-black tracking-tight text-gray-900 dark:text-white"},"Daftar Log",-1)),t("p",Ts,"Menampilkan "+o(K.value.length)+" baris",1)]),t("button",{onClick:P,class:"btn btn-secondary shrink-0"},"Refresh")]),t("div",Ps,[t("table",Ss,[e[102]||(e[102]=t("thead",{class:"bg-white/70 dark:bg-dark-950/60 sticky top-0"},[t("tr",{class:"text-[11px] uppercase font-black tracking-widest text-gray-500 dark:text-gray-400"},[t("th",{class:"px-4 py-3 text-left"},"Waktu"),t("th",{class:"px-4 py-3 text-left"},"Platform"),t("th",{class:"px-4 py-3 text-left"},"Target"),t("th",{class:"px-4 py-3 text-left"},"Pesan"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-left"},"Response")])],-1)),t("tbody",Us,[(l(!0),r(h,null,S(K.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",Vs,o(X(a.timestamp)),1),t("td",As,o(a.platform),1),t("td",Os,o(a.target),1),t("td",$s,o(a.message),1),t("td",Ns,[t("span",{class:R([Y(a.normalized_status||a.status),"px-2 py-1 text-xs rounded-full font-bold uppercase"])},o(a.normalized_status||a.status),3)]),t("td",js,o(a.response_log||"-"),1)]))),128)),K.value.length===0?(l(),r("tr",Gs,[...e[101]||(e[101]=[t("td",{colspan:"6",class:"px-4 py-12 text-center text-gray-500 dark:text-gray-400"},"Tidak ada log",-1)])])):x("",!0)])])])])])):x("",!0),m.value==="system_update"?(l(),r("div",Ls,[e[103]||(e[103]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Update Sistem"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Update panel via ZIP atau paket build dari GitHub.")],-1)),t("div",Ds,[V(Bt,{embedded:""})])])):x("",!0)])]))]),$.value?(l(),r("div",Is,[t("div",Rs,[t("div",{class:"fixed inset-0 bg-gray-500/75 dark:bg-gray-900/80",onClick:e[34]||(e[34]=a=>$.value=!1)}),t("div",Ms,[t("div",Bs,[t("h3",Es,o(E.value?"Edit Template":"Tambah Template"),1),t("button",{onClick:e[35]||(e[35]=a=>$.value=!1),class:"text-gray-400 hover:text-gray-500"},"✕")]),t("form",{onSubmit:Rt(_t,["prevent"]),class:"p-6 space-y-4"},[t("div",null,[e[104]||(e[104]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kode Template *",-1)),d(t("input",{"onUpdate:modelValue":e[36]||(e[36]=a=>C.code=a),type:"text",required:"",class:"input w-full",disabled:!!E.value,placeholder:"web_welcome"},null,8,Ws),[[p,C.code]])]),t("div",null,[e[105]||(e[105]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Konten *",-1)),d(t("textarea",{"onUpdate:modelValue":e[37]||(e[37]=a=>C.message=a),rows:"5",required:"",class:"input w-full",placeholder:"Tulis template..."},null,512),[[p,C.message]])]),Q.value.length>0?(l(),r("div",Fs,[e[108]||(e[108]=t("p",{class:"text-xs text-gray-500 font-bold uppercase mb-2"},"Klik untuk insert variable:",-1)),t("div",Ks,[(l(!0),r(h,null,S(Q.value,a=>(l(),r("button",{key:a,type:"button",onClick:c=>Ct(a),class:"px-2 py-1 text-xs bg-white dark:bg-gray-800 border dark:border-gray-600 rounded hover:bg-blue-100 dark:hover:bg-blue-900 transition"},[e[106]||(e[106]=j(" {",-1)),t("span",null,o(a),1),e[107]||(e[107]=j("} ",-1))],8,Js))),128))])])):x("",!0),t("div",Hs,[t("button",{type:"button",onClick:e[38]||(e[38]=a=>$.value=!1),class:"btn btn-secondary"},"Batal"),e[109]||(e[109]=t("button",{type:"submit",class:"btn btn-primary"},"Simpan",-1))])],32)])])])):x("",!0)]}),_:1})],64))}};export{er as default};
