import{E as Ft,o as Wt,c as r,a as O,u as Jt,h as Ht,m as zt,b as t,j as l,d as U,t as o,e as x,F as C,s as A,n as F,f as d,v as p,i as ft,x as dt,g as qt,w as Qt,y as Y,r as c,H as T}from"./app-7gE5Lya0.js";import{_ as Zt}from"./AdminLayout-1ZLzoPA1.js";import Xt from"./SystemUpdatePanel-C_h5HwiD.js";import W from"./SettingsNavIcon-CkYwNoWk.js";import"./LoadingSpinner-CtFD0pNu.js";const Yt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-10 pb-16"},te={class:"relative overflow-hidden rounded-3xl border border-gray-200/60 dark:border-white/10 bg-white dark:bg-dark-900 shadow-sm"},ee={class:"relative p-7 sm:p-10"},ae={class:"flex flex-col gap-5 sm:flex-row sm:items-start sm:justify-between"},se={class:"min-w-0"},re={key:0,class:"mt-3 text-xs text-gray-500 dark:text-gray-500"},le={class:"font-semibold"},oe={class:"flex items-center gap-2 shrink-0"},ne=["disabled"],de={key:0,class:"card p-0 overflow-hidden rounded-2xl"},ie={key:1,class:"space-y-6 lg:space-y-8"},pe={class:"card p-0 overflow-hidden rounded-2xl"},ue={class:"px-5 py-4 sm:px-7 sm:py-5 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},ge={class:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between"},xe={class:"flex gap-2 overflow-x-auto custom-scrollbar"},ce={class:"shrink-0 inline-flex gap-1 p-1 rounded-2xl bg-gray-100/70 dark:bg-white/5 border border-gray-200/70 dark:border-white/10"},be=["onClick"],me={class:"relative w-full lg:w-[340px]"},ye={key:0,class:"absolute z-30 mt-2 w-full rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 shadow-xl overflow-hidden"},ke={key:0,class:"p-4 text-sm text-gray-500 dark:text-gray-400"},fe={key:1,class:"max-h-72 overflow-auto custom-scrollbar p-2"},ve=["onClick"],we={class:"flex-1"},_e={class:"text-[10px] font-black tracking-widest text-gray-400 dark:text-gray-500 uppercase"},he={class:"mt-3 flex flex-wrap gap-2"},Ce=["onClick"],Te={class:"whitespace-nowrap"},Se={class:"min-w-0 space-y-6 lg:space-y-8"},Pe={key:0,class:"card p-0 overflow-hidden rounded-2xl"},Ue={class:"px-6 py-6 sm:px-8"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5"},Ve={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},Oe={class:"flex items-center justify-between gap-3"},$e={class:"flex items-center gap-3 min-w-0"},Ge={class:"h-10 w-10 rounded-2xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center shrink-0"},je={class:"min-w-0"},Me={class:"mt-0.5 text-xs text-gray-500 dark:text-gray-400 truncate"},Ie={class:"font-semibold"},Le={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},Ne={class:"flex items-center justify-between gap-3"},De={class:"flex items-center gap-3 min-w-0"},Re={class:"h-10 w-10 rounded-2xl bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center shrink-0"},Be={class:"min-w-0"},Ee={class:"mt-0.5 text-xs text-gray-500 dark:text-gray-400 truncate"},Ke={class:"font-semibold"},Fe={key:1,class:"card p-0 overflow-hidden rounded-2xl"},We={class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},Je={class:"flex items-center gap-2 cursor-pointer select-none"},He={class:"text-xs font-semibold text-gray-500 dark:text-gray-400"},ze={class:"px-6 py-6 sm:px-8 space-y-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},Qe={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden bg-gray-50/60 dark:bg-dark-900/30"},Ze={class:"p-5 space-y-4 bg-white dark:bg-dark-950 border-t border-gray-200/70 dark:border-white/10"},Xe={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},Ye=["disabled"],ta=["disabled"],ea=["disabled"],aa={key:2,class:"card p-0 overflow-hidden rounded-2xl"},sa={class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},ra={class:"flex items-center gap-2 cursor-pointer select-none"},la={class:"text-xs font-semibold text-gray-500 dark:text-gray-400"},oa={class:"px-6 py-6 sm:px-8 space-y-6"},na={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},da={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},ia=["disabled"],pa=["disabled"],ua=["disabled"],ga={key:3,class:"card p-0 overflow-hidden rounded-2xl"},xa={class:"px-6 py-6 sm:px-8 space-y-6"},ca={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},ba={class:"flex flex-wrap gap-2 pt-5 border-t border-gray-200/70 dark:border-white/10"},ma=["disabled"],ya=["disabled"],ka={key:4,class:"card p-0 overflow-hidden rounded-2xl"},fa={class:"px-6 py-6 sm:px-8 space-y-4"},va={class:"flex items-start justify-between gap-3"},wa={class:"min-w-0"},_a={class:"font-bold text-gray-900 dark:text-white"},ha={class:"mt-2 text-sm text-gray-600 dark:text-gray-400 whitespace-pre-line"},Ca={class:"mt-4 flex gap-3"},Ta=["onClick"],Sa=["onClick"],Pa={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},Ua={key:5,class:"card p-0 overflow-hidden rounded-2xl"},Aa={class:"px-6 py-6 sm:px-8 space-y-6"},Va={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},Oa={class:"flex flex-col lg:flex-row gap-4 items-end"},$a={class:"flex-1 w-full"},Ga={class:"w-full lg:w-1/4"},ja={class:"w-full lg:w-1/3"},Ma={class:"flex gap-2"},Ia={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden"},La={class:"max-h-72 overflow-y-auto"},Na={class:"w-full text-left"},Da={class:"text-sm divide-y divide-gray-200 dark:divide-white/10 bg-white dark:bg-dark-950"},Ra={class:"px-4 py-3 text-gray-900 dark:text-white"},Ba={class:"px-4 py-3 text-gray-500 dark:text-gray-400"},Ea={class:"px-4 py-3 text-gray-500 dark:text-gray-400 font-mono text-xs"},Ka={class:"px-4 py-3 text-right space-x-3"},Fa=["onClick"],Wa=["onClick"],Ja={key:0},Ha={key:6,class:"card p-0 overflow-hidden rounded-2xl"},za={class:"px-6 py-6 sm:px-8 space-y-6"},qa={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},Qa={class:"flex flex-col lg:flex-row gap-4 items-end"},Za={class:"flex-1 w-full"},Xa={class:"flex-1 w-full"},Ya={class:"flex gap-2"},ts={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 overflow-hidden"},es={class:"max-h-72 overflow-y-auto"},as={class:"w-full text-left"},ss={class:"text-sm divide-y divide-gray-200 dark:divide-white/10 bg-white dark:bg-dark-950"},rs={class:"px-4 py-3 text-gray-900 dark:text-white"},ls={class:"px-4 py-3 text-gray-500 dark:text-gray-400 font-mono text-xs"},os={class:"px-4 py-3 text-right space-x-3"},ns=["onClick"],ds=["onClick"],is={key:0},ps={key:7,class:"card p-0 overflow-hidden rounded-2xl"},us={class:"px-6 py-6 sm:px-8 space-y-6"},gs={class:"grid grid-cols-1 lg:grid-cols-2 gap-5"},xs={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5"},cs={key:0,class:"space-y-2"},bs=["onUpdate:modelValue","placeholder"],ms=["onClick"],ys={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},ks={class:"pt-2"},fs=["disabled"],vs={key:8,class:"card p-0 overflow-hidden rounded-2xl"},ws={class:"px-6 py-6 sm:px-8 space-y-4"},_s={class:"flex flex-col sm:flex-row gap-2"},hs=["value"],Cs={key:9,class:"card p-0 overflow-hidden rounded-2xl"},Ts={class:"px-6 py-6 sm:px-8 space-y-5"},Ss={class:"flex flex-col sm:flex-row gap-2"},Ps=["type"],Us={class:"pt-1"},As=["disabled"],Vs={key:10,class:"space-y-6"},Os={class:"card p-0 overflow-hidden rounded-2xl"},$s={class:"px-6 py-6 sm:px-8 space-y-6"},Gs={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},js={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},Ms={class:"text-3xl font-black text-gray-900 dark:text-white"},Is={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},Ls={class:"text-3xl font-black text-emerald-600 dark:text-emerald-300"},Ns={class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 text-center"},Ds={class:"text-3xl font-black text-red-600 dark:text-red-300"},Rs={class:"flex flex-col sm:flex-row sm:items-end gap-3"},Bs={class:"flex flex-wrap gap-2"},Es={class:"card p-0 overflow-hidden rounded-2xl"},Ks={class:"px-6 py-4 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-gray-50/80 dark:bg-dark-900/40 backdrop-blur flex items-center justify-between gap-4"},Fs={class:"text-xs text-gray-500 dark:text-gray-400"},Ws={class:"overflow-x-auto max-h-96"},Js={class:"min-w-full divide-y divide-gray-200 dark:divide-white/10"},Hs={class:"bg-white dark:bg-dark-950 divide-y divide-gray-200 dark:divide-white/10"},zs={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap"},qs={class:"px-4 py-3 text-xs text-gray-900 dark:text-gray-200"},Qs={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400"},Zs={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 max-w-[260px] truncate"},Xs={class:"px-4 py-3"},Ys={class:"px-4 py-3 text-xs text-gray-500 dark:text-gray-400 max-w-[260px] truncate"},tr={key:0},er={key:11,class:"card p-0 overflow-hidden rounded-2xl"},ar={class:"px-6 py-6 sm:px-8"},sr={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},rr={class:"flex items-center justify-center min-h-screen pt-4 px-4"},lr={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},or={class:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center"},nr={class:"text-lg font-medium text-gray-900 dark:text-white"},dr=["disabled"],ir={key:0,class:"bg-blue-50 dark:bg-gray-900 p-3 rounded-lg border dark:border-gray-700"},pr={class:"flex flex-wrap gap-1"},ur=["onClick"],gr={class:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700"},xr="/api/v1/settings",vr={__name:"Index",setup(cr){const tt=c(!0),J=c(!1),b=c(!1),k=c(""),et=c(null),I=c(""),$=c({wa:{},tg:{}}),i=T({base_url:"",group_url:"",token:"",sender_number:"",target_number:"",group_id:"",recap_group_id:"",is_active:0,failover_mode:"manual"}),u=T({base_url:"",token:"",sender_number:"",target_number:"",group_id:"",footer:"",is_active:0}),V=T({bot_token:"",chat_id:""}),L=c([]),h=T({code:"",message:""}),H=c(null),G=c(!1),at=c([]),N=c([]),S=T({id:0,pop_name:"",wa_number:"",group_id:""}),z=c(!1),D=c([]),j=T({id:0,name:"",group_id:""}),q=c(!1),v=T({teknisi_fee_install:0,sales_fee_install:0,expense_categories:[]}),R=T({google_maps_api_key:""}),Q=c(!1),st=c(""),Z=c([]),X=c({total:0,sent:0,failed:0}),w=T({search:"",status:"",range:""}),m=c("status"),it=[{id:"status",name:"Gateway Status",icon:"wifi"},{id:"wa",name:"WhatsApp",icon:"chat"},{id:"mpwa",name:"WA Backup (MPWA)",icon:"bolt"},{id:"tg",name:"Telegram",icon:"paper-airplane"},{id:"templates",name:"Template Pesan",icon:"document-text"},{id:"pops",name:"Manajemen POP",icon:"map-pin"},{id:"recap_groups",name:"Group Rekap",icon:"user-group"},{id:"fee",name:"Fee Teknisi",icon:"cash"},{id:"maps",name:"Google Maps",icon:"map"},{id:"public_url",name:"Link Isolir",icon:"link"},{id:"logs",name:"Log Notifikasi",icon:"clock"},{id:"system_update",name:"Update Sistem",icon:"refresh"}],M=[{id:"gateway",title:"Gateway",items:["status","wa","mpwa","tg"]},{id:"pesan",title:"Pesan",items:["templates","logs"]},{id:"operasional",title:"Operasional",items:["pops","recap_groups","fee"]},{id:"system",title:"System",items:["public_url","maps","system_update"]}],vt=Y(()=>Object.fromEntries(it.map(s=>[s.id,s]))),rt=Y(()=>{const s={};for(const e of M)for(const f of e.items)s[f]=e.id;return s}),lt=T({gateway:"status",pesan:"templates",operasional:"pops",system:"public_url"}),B=c("gateway");function pt(s){if(!s)return;m.value=s;const e=rt.value[s];e&&(B.value=e,lt[e]=s)}function wt(s){var n;B.value=s;const e=M.find(_=>_.id===s),f=lt[s]||((n=e==null?void 0:e.items)==null?void 0:n[0]);f&&(m.value=f)}Ft(()=>m.value,s=>{const e=rt.value[s];e&&(B.value=e,lt[e]=s)},{immediate:!0});const _t=Y(()=>{const s=M.find(f=>f.id===B.value)||M[0],e=vt.value;return((s==null?void 0:s.items)||[]).map(f=>e[f]).filter(Boolean)}),ut=Y(()=>{const s=I.value.trim().toLowerCase();return s?it.filter(e=>e.name.toLowerCase().includes(s)):[]});async function g(s,e={}){return(await fetch(`${xr}${s}`,{headers:{Accept:"application/json","Content-Type":"application/json",...e.headers},...e})).json()}async function gt(s={}){var f;const e=!!s.refresh;e?J.value=!0:tt.value=!0;try{const n=await g("");if(n.gateway_status&&($.value=n.gateway_status),n.wa_config&&Object.assign(i,{base_url:n.wa_config.base_url||"",group_url:n.wa_config.group_url||"",token:n.wa_config.token||"",sender_number:n.wa_config.sender_number||"",target_number:n.wa_config.target_number||"",group_id:n.wa_config.group_id||"",recap_group_id:n.wa_config.recap_group_id||"",is_active:n.wa_config.is_active?1:0}),n.wa_failover_mode&&(i.failover_mode=n.wa_failover_mode),(f=n.wa_gateways)!=null&&f.backup){const _=n.wa_gateways.backup,E=_.extra||{};Object.assign(u,{base_url:_.base_url||"",token:_.token||"",sender_number:_.sender_number||"",target_number:E.target_number||"",group_id:_.group_id||"",footer:E.footer||"",is_active:_.is_active?1:0})}n.tg_config&&(V.bot_token=n.tg_config.bot_token||"",V.chat_id=n.tg_config.chat_id||""),L.value=n.templates||[],N.value=n.pops||[],D.value=n.recap_groups||[],n.fee_settings&&Object.assign(v,n.fee_settings),n.maps_config?R.google_maps_api_key=n.maps_config.google_maps_api_key||"":R.google_maps_api_key="",st.value=n.public_url||""}catch(n){console.error("Load settings error:",n)}finally{e?J.value=!1:tt.value=!1,et.value=new Date}P(),ht()}async function P(){const s=new URLSearchParams;w.search&&s.set("search",w.search),w.status&&s.set("status",w.status),w.range&&s.set("range",w.range);const e=await g(`/notif-logs?${s}`);Z.value=e.data||[],e.stats&&(X.value=e.stats)}async function ht(){const s=await g("/install-variables");at.value=s.data||[]}async function Ct(){b.value=!0;try{await g("/wa",{method:"POST",body:JSON.stringify(i)}),alert("WhatsApp config tersimpan!")}catch{alert("Gagal menyimpan")}finally{b.value=!1}}async function Tt(){b.value=!0;try{await g("/wa-backup",{method:"POST",body:JSON.stringify({...u,failover_mode:i.failover_mode})}),alert("MPWA config tersimpan!")}catch{alert("Gagal menyimpan")}finally{b.value=!1}}async function St(){b.value=!0;try{await g("/tg",{method:"POST",body:JSON.stringify(V)}),alert("Telegram config tersimpan!")}catch{alert("Gagal menyimpan")}finally{b.value=!1}}async function xt(s=!1){k.value=s?"wa_group":"wa_personal";try{const e=await g("/test-wa",{method:"POST",body:JSON.stringify({url:i.base_url,token:i.token,sender:i.sender_number,target:s?i.group_id:i.target_number,is_group:s})});alert(e.status==="success"?"Berhasil!":`Gagal: ${e.message}`),P()}catch(e){alert("Error: "+e.message)}finally{k.value=""}}async function ct(s=!1){k.value=s?"mpwa_group":"mpwa_personal";try{const e=await g("/test-mpwa",{method:"POST",body:JSON.stringify({url:u.base_url,token:u.token,sender:u.sender_number,target:s?u.group_id:u.target_number,footer:u.footer,is_group:s})});alert(e.status==="success"?"Berhasil!":`Gagal: ${e.message}`),P()}catch(e){alert("Error: "+e.message)}finally{k.value=""}}async function Pt(){k.value="tg";try{const s=await g("/test-tg",{method:"POST",body:JSON.stringify(V)});alert(s.status==="success"?"Berhasil!":`Gagal: ${s.message}`),P()}catch(s){alert("Error: "+s.message)}finally{k.value=""}}function Ut(s){h.code=s.code,h.message=s.message,H.value=s.code,G.value=!0}function At(){h.code="",h.message="",H.value=null,G.value=!0}async function Vt(){await g("/templates",{method:"POST",body:JSON.stringify(h)}),G.value=!1;const s=await g("/templates");L.value=s.data||[]}async function Ot(s){if(!confirm(`Hapus template "${s.code}"?`))return;await g(`/templates/${s.id}`,{method:"DELETE"});const e=await g("/templates");L.value=e.data||[]}function $t(s){h.message+=`{${s}}`}function Gt(s){Object.assign(S,{id:s.id,pop_name:s.pop_name,wa_number:s.wa_number||"",group_id:s.group_id||""}),z.value=!0}function bt(){Object.assign(S,{id:0,pop_name:"",wa_number:"",group_id:""}),z.value=!1}async function jt(){const s=await g("/pops",{method:"POST",body:JSON.stringify(S)});if(s.status==="error"){alert(s.message);return}bt();const e=await g("/pops");N.value=e.data||[]}async function Mt(s){if(!confirm(`Hapus POP "${s.pop_name}"?`))return;await g(`/pops/${s.id}`,{method:"DELETE"});const e=await g("/pops");N.value=e.data||[]}function It(s){Object.assign(j,{id:s.id,name:s.name,group_id:s.group_id}),q.value=!0}function mt(){Object.assign(j,{id:0,name:"",group_id:""}),q.value=!1}async function Lt(){const s=await g("/recap-groups",{method:"POST",body:JSON.stringify(j)});if(s.status==="error"){alert(s.message);return}mt();const e=await g("/recap-groups");D.value=e.data||[]}async function Nt(s){if(!confirm(`Hapus group "${s.name}"?`))return;await g(`/recap-groups/${s.id}`,{method:"DELETE"});const e=await g("/recap-groups");D.value=e.data||[]}function Dt(){v.expense_categories.push("")}function Rt(s){v.expense_categories.splice(s,1)}async function Bt(){b.value=!0;try{await g("/fee-settings",{method:"POST",body:JSON.stringify(v)}),alert("Fee settings tersimpan!")}catch{alert("Gagal")}finally{b.value=!1}}async function Et(){b.value=!0;try{await g("/maps",{method:"POST",body:JSON.stringify(R)}),alert("Google Maps API key tersimpan!")}catch{alert("Gagal")}finally{b.value=!1}}function Kt(){navigator.clipboard.writeText(st.value),alert("URL disalin!")}function ot(s){return s?new Date(s).toLocaleString("id-ID"):"-"}function nt(s){return s=(s||"").toLowerCase(),["success","sent","ok"].includes(s)?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-400":["failed","error","fail"].includes(s)?"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-300"}return Wt(gt),(s,e)=>(l(),r(C,null,[O(Jt(Ht),{title:"Pengaturan"}),O(Zt,null,{default:zt(()=>{var f,n,_,E,yt,kt;return[t("div",Yt,[t("div",te,[e[44]||(e[44]=t("div",{class:"pointer-events-none absolute inset-0"},[t("div",{class:"absolute -top-24 -right-24 h-72 w-72 rounded-full bg-gradient-to-br from-primary-500/25 to-primary-700/10 blur-3xl"}),t("div",{class:"absolute -bottom-24 -left-24 h-72 w-72 rounded-full bg-gradient-to-br from-emerald-500/10 to-cyan-500/10 blur-3xl"})],-1)),t("div",ee,[t("div",ae,[t("div",se,[e[42]||(e[42]=t("h1",{class:"text-3xl sm:text-4xl font-black tracking-tight text-gray-900 dark:text-white"},"Pengaturan",-1)),e[43]||(e[43]=t("p",{class:"mt-2 text-sm sm:text-base text-gray-600 dark:text-gray-400 max-w-2xl"}," Konfigurasi gateway, notifikasi, template, POP, dan fee teknisi. ",-1)),et.value?(l(),r("p",re,[e[41]||(e[41]=U(" Terakhir refresh: ",-1)),t("span",le,o(et.value.toLocaleString("id-ID")),1)])):x("",!0)]),t("div",oe,[t("button",{onClick:e[0]||(e[0]=a=>gt({refresh:!0})),disabled:J.value,class:"btn btn-secondary btn-press gap-2"},[O(W,{name:"refresh",className:"h-4 w-4"}),t("span",null,o(J.value?"Refreshing...":"Refresh"),1)],8,ne)])])])]),tt.value?(l(),r("div",de,[...e[45]||(e[45]=[t("div",{class:"p-10 flex items-center justify-center gap-3"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t("span",{class:"text-gray-600 dark:text-gray-300 text-sm"},"Memuat data...")],-1)])])):(l(),r("div",ie,[t("div",pe,[t("div",ue,[t("div",ge,[t("div",xe,[t("div",ce,[(l(),r(C,null,A(M,a=>t("button",{key:a.id,type:"button",onClick:y=>wt(a.id),class:F(["px-3.5 py-2 rounded-xl text-xs sm:text-sm font-black tracking-tight transition whitespace-nowrap",B.value===a.id?"bg-primary-600 text-white shadow-sm shadow-primary-500/20":"text-gray-700 dark:text-gray-200 hover:bg-white/80 dark:hover:bg-white/10"])},o(a.title),11,be)),64))])]),t("div",me,[d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>I.value=a),type:"text",class:"input !rounded-xl",placeholder:"Cari pengaturan..."},null,512),[[p,I.value]]),I.value.trim()?(l(),r("div",ye,[ut.value.length===0?(l(),r("div",ke," Menu tidak ditemukan. ")):(l(),r("div",fe,[(l(!0),r(C,null,A(ut.value,a=>{var y;return l(),r("button",{key:a.id,type:"button",onClick:K=>{pt(a.id),I.value=""},class:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-left text-sm font-semibold text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-white/5 transition"},[O(W,{name:a.icon,className:"h-4 w-4 text-gray-400 dark:text-gray-500"},null,8,["name"]),t("span",we,o(a.name),1),t("span",_e,o(((y=M.find(K=>K.id===rt.value[a.id]))==null?void 0:y.title)||""),1)],8,ve)}),128))]))])):x("",!0)])]),t("div",he,[(l(!0),r(C,null,A(_t.value,a=>(l(),r("button",{key:a.id,type:"button",onClick:y=>pt(a.id),class:F(["inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs sm:text-sm font-semibold transition border",m.value===a.id?"bg-primary-600 text-white border-primary-600 shadow-sm shadow-primary-500/20":"bg-white dark:bg-dark-900 text-gray-700 dark:text-gray-200 border-gray-200/70 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/5"])},[O(W,{name:a.icon,className:m.value===a.id?"h-4 w-4 text-white":"h-4 w-4 text-gray-400 dark:text-gray-500"},null,8,["name","className"]),t("span",Te,o(a.name),1)],10,Ce))),128))])])]),t("div",Se,[m.value==="status"?(l(),r("div",Pe,[e[50]||(e[50]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Gateway Status"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Ringkasan kondisi & aktivitas terakhir")],-1)),t("div",Ue,[t("div",Ae,[t("div",Ve,[t("div",Oe,[t("div",$e,[t("div",Ge,[O(W,{name:"chat",className:"h-5 w-5 text-emerald-700 dark:text-emerald-300"})]),t("div",je,[e[47]||(e[47]=t("div",{class:"text-sm font-bold text-gray-900 dark:text-white"},"WhatsApp",-1)),t("div",Me,[e[46]||(e[46]=U(" Last Log: ",-1)),t("span",Ie,o(ot((f=$.value.wa)==null?void 0:f.last_time)),1)])])]),t("span",{class:F([nt((n=$.value.wa)==null?void 0:n.last_status),"px-2 py-0.5 rounded-md text-xs font-bold uppercase whitespace-nowrap"])},o(((_=$.value.wa)==null?void 0:_.last_status)||"-"),3)])]),t("div",Le,[t("div",Ne,[t("div",De,[t("div",Re,[O(W,{name:"paper-airplane",className:"h-5 w-5 text-blue-700 dark:text-blue-300"})]),t("div",Be,[e[49]||(e[49]=t("div",{class:"text-sm font-bold text-gray-900 dark:text-white"},"Telegram",-1)),t("div",Ee,[e[48]||(e[48]=U(" Last Log: ",-1)),t("span",Ke,o(ot((E=$.value.tg)==null?void 0:E.last_time)),1)])])]),t("span",{class:F([nt((yt=$.value.tg)==null?void 0:yt.last_status),"px-2 py-0.5 rounded-md text-xs font-bold uppercase whitespace-nowrap"])},o(((kt=$.value.tg)==null?void 0:kt.last_status)||"-"),3)])])])])])):x("",!0),m.value==="wa"?(l(),r("div",Fe,[t("div",We,[e[51]||(e[51]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"WhatsApp (Gateway Utama)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Gateway utama untuk notifikasi personal dan group.")],-1)),t("label",Je,[t("span",He,o(i.is_active?"Aktif":"Non-aktif"),1),d(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>i.is_active=a),"true-value":1,"false-value":0,class:"h-5 w-5 rounded-md text-primary-600 dark:bg-gray-700"},null,512),[[ft,i.is_active]])])]),t("div",ze,[t("div",qe,[t("div",null,[e[52]||(e[52]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL Pesan Personal",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.base_url=a),type:"url",class:"input w-full",placeholder:"https://api.balesotomatis.id/v1/send-message"},null,512),[[p,i.base_url]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"API Token",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.token=a),type:"text",class:"input w-full",placeholder:"Token..."},null,512),[[p,i.token]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Device Key (Sender)",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>i.sender_number=a),type:"text",class:"input w-full",placeholder:"Device Key..."},null,512),[[p,i.sender_number]])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Target Tes",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.target_number=a),type:"text",class:"input w-full",placeholder:"08xxx"},null,512),[[p,i.target_number]])]),t("div",null,[e[57]||(e[57]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Mode Failover",-1)),d(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>i.failover_mode=a),class:"input w-full"},[...e[56]||(e[56]=[t("option",{value:"manual"},"Manual (tetap gateway aktif)",-1),t("option",{value:"auto"},"Auto (pindah ke backup jika gagal)",-1)])],512),[[dt,i.failover_mode]]),e[58]||(e[58]=t("p",{class:"text-xs text-gray-400 mt-1"},"Manual: aktifkan hanya gateway yang ingin dipakai. Auto: gunakan backup bila primary gagal.",-1))])]),t("details",Qe,[e[63]||(e[63]=t("summary",{class:"px-5 py-4 cursor-pointer text-sm font-bold text-gray-700 dark:text-gray-200 hover:bg-gray-100/80 dark:hover:bg-white/5"}," Pengaturan Group (Advanced) ",-1)),t("div",Ze,[t("div",null,[e[59]||(e[59]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL Pesan Group",-1)),d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>i.group_url=a),type:"url",class:"input w-full",placeholder:"https://api.balesotomatis.id/v1/send-group-message"},null,512),[[p,i.group_url]])]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Default Group ID",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>i.group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[p,i.group_id]])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group Laporan Rekap",-1)),d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>i.recap_group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[p,i.recap_group_id]]),e[62]||(e[62]=t("p",{class:"text-xs text-gray-400 mt-1"},"Grup khusus untuk laporan harian teknisi. Jika kosong, gunakan Default Group ID.",-1))])])]),t("div",Xe,[t("button",{onClick:e[11]||(e[11]=a=>xt(!1)),disabled:k.value==="wa_personal",class:"btn btn-secondary"},o(k.value==="wa_personal"?"Sending...":"Tes Personal"),9,Ye),t("button",{onClick:e[12]||(e[12]=a=>xt(!0)),disabled:k.value==="wa_group",class:"btn btn-secondary"},o(k.value==="wa_group"?"Sending...":"Tes Group"),9,ta),t("button",{onClick:Ct,disabled:b.value,class:"btn btn-primary ml-auto"},o(b.value?"Menyimpan...":"Simpan"),9,ea)])])])):x("",!0),m.value==="mpwa"?(l(),r("div",aa,[t("div",sa,[e[64]||(e[64]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"WhatsApp Backup (MPWA)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Gateway cadangan untuk failover atau penggunaan manual.")],-1)),t("label",ra,[t("span",la,o(u.is_active?"Aktif":"Non-aktif"),1),d(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=a=>u.is_active=a),"true-value":1,"false-value":0,class:"h-5 w-5 rounded-md text-orange-600 dark:bg-gray-700"},null,512),[[ft,u.is_active]])])]),t("div",oa,[t("div",na,[t("div",null,[e[65]||(e[65]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"URL API",-1)),d(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>u.base_url=a),type:"url",class:"input w-full",placeholder:"https://app.mpwa.net/send-message"},null,512),[[p,u.base_url]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"API Key",-1)),d(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>u.token=a),type:"text",class:"input w-full"},null,512),[[p,u.token]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Sender",-1)),d(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>u.sender_number=a),type:"text",class:"input w-full",placeholder:"62888xxxx"},null,512),[[p,u.sender_number]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Target Tes",-1)),d(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>u.target_number=a),type:"text",class:"input w-full",placeholder:"62888xxxx atau xxx@g.us"},null,512),[[p,u.target_number]])]),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Default Group ID",-1)),d(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>u.group_id=a),type:"text",class:"input w-full",placeholder:"xxx@g.us"},null,512),[[p,u.group_id]])]),t("div",null,[e[70]||(e[70]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Footer (Opsional)",-1)),d(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>u.footer=a),type:"text",class:"input w-full",placeholder:"Sent via mpwa"},null,512),[[p,u.footer]])])]),t("div",da,[t("button",{onClick:e[20]||(e[20]=a=>ct(!1)),disabled:k.value==="mpwa_personal",class:"btn btn-secondary"},o(k.value==="mpwa_personal"?"Sending...":"Tes Personal"),9,ia),t("button",{onClick:e[21]||(e[21]=a=>ct(!0)),disabled:k.value==="mpwa_group",class:"btn btn-secondary"},o(k.value==="mpwa_group"?"Sending...":"Tes Group"),9,pa),t("button",{onClick:Tt,disabled:b.value,class:"btn btn-primary ml-auto"},o(b.value?"Menyimpan...":"Simpan"),9,ua)])])])):x("",!0),m.value==="tg"?(l(),r("div",ga,[e[73]||(e[73]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Telegram Backup"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Backup notifikasi jika WhatsApp bermasalah.")],-1)),t("div",xa,[t("div",ca,[t("div",null,[e[71]||(e[71]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Bot Token",-1)),d(t("input",{"onUpdate:modelValue":e[22]||(e[22]=a=>V.bot_token=a),type:"text",class:"input w-full",placeholder:"123:ABC..."},null,512),[[p,V.bot_token]])]),t("div",null,[e[72]||(e[72]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Chat ID",-1)),d(t("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>V.chat_id=a),type:"text",class:"input w-full",placeholder:"-100xxx"},null,512),[[p,V.chat_id]])])]),t("div",ba,[t("button",{onClick:Pt,disabled:k.value==="tg",class:"btn btn-secondary"},o(k.value==="tg"?"Sending...":"Tes Kirim"),9,ma),t("button",{onClick:St,disabled:b.value,class:"btn btn-primary ml-auto"},o(b.value?"Menyimpan...":"Simpan"),9,ya)])])])):x("",!0),m.value==="templates"?(l(),r("div",ka,[t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur flex items-start justify-between gap-4"},[e[74]||(e[74]=t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Template Pesan"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Kelola template notifikasi (WA/Telegram) yang dipakai sistem.")],-1)),t("button",{onClick:At,class:"btn btn-primary shrink-0"},"+ Tambah")]),t("div",fa,[(l(!0),r(C,null,A(L.value,a=>(l(),r("div",{key:a.id||a.code,class:"rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-950 p-5 hover:shadow-sm transition"},[t("div",va,[t("div",wa,[t("h3",_a,o(a.code),1),t("p",ha,o(a.message),1)])]),t("div",Ca,[t("button",{onClick:y=>Ut(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,Ta),t("button",{onClick:y=>Ot(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,Sa)])]))),128)),L.value.length===0?(l(),r("div",Pa,"Belum ada template")):x("",!0)])])):x("",!0),m.value==="pops"?(l(),r("div",Ua,[e[80]||(e[80]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Manajemen Data POP"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Pengaturan area & group notifikasi spesifik.")],-1)),t("div",Aa,[t("div",Va,[t("div",Oa,[t("div",$a,[e[75]||(e[75]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Nama POP / Area",-1)),d(t("input",{"onUpdate:modelValue":e[24]||(e[24]=a=>S.pop_name=a),type:"text",class:"input w-full",placeholder:"Contoh: Krui Selatan..."},null,512),[[p,S.pop_name]])]),t("div",Ga,[e[76]||(e[76]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"WA Admin (PIC)",-1)),d(t("input",{"onUpdate:modelValue":e[25]||(e[25]=a=>S.wa_number=a),type:"text",class:"input w-full",placeholder:"08xxx..."},null,512),[[p,S.wa_number]])]),t("div",ja,[e[77]||(e[77]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group ID (Notif)",-1)),d(t("input",{"onUpdate:modelValue":e[26]||(e[26]=a=>S.group_id=a),type:"text",class:"input w-full",placeholder:"xxxx@g.us"},null,512),[[p,S.group_id]])]),t("div",Ma,[z.value?(l(),r("button",{key:0,onClick:bt,class:"btn btn-secondary"},"Batal")):x("",!0),t("button",{onClick:jt,class:"btn btn-primary whitespace-nowrap"},o(z.value?"Update":"+ Tambah"),1)])])]),t("div",Ia,[t("div",La,[t("table",Na,[e[79]||(e[79]=t("thead",{class:"bg-gray-50/80 dark:bg-dark-900/60 text-[11px] uppercase font-black tracking-widest text-gray-500 sticky top-0"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Nama Area"),t("th",{class:"px-4 py-3"},"PIC WA"),t("th",{class:"px-4 py-3"},"Group ID"),t("th",{class:"px-4 py-3 text-right"},"Aksi")])],-1)),t("tbody",Da,[(l(!0),r(C,null,A(N.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",Ra,o(a.pop_name),1),t("td",Ba,o(a.wa_number||"-"),1),t("td",Ea,o(a.group_id||"-"),1),t("td",Ka,[t("button",{onClick:y=>Gt(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,Fa),t("button",{onClick:y=>Mt(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,Wa)])]))),128)),N.value.length===0?(l(),r("tr",Ja,[...e[78]||(e[78]=[t("td",{colspan:"4",class:"px-4 py-10 text-center text-gray-500 dark:text-gray-400"},"Belum ada POP",-1)])])):x("",!0)])])])])])])):x("",!0),m.value==="recap_groups"?(l(),r("div",Ha,[e[85]||(e[85]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Manajemen Group Rekap"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Kelola grup WhatsApp untuk laporan teknisi.")],-1)),t("div",za,[t("div",qa,[t("div",Qa,[t("div",Za,[e[81]||(e[81]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Nama Group Rekap",-1)),d(t("input",{"onUpdate:modelValue":e[27]||(e[27]=a=>j.name=a),type:"text",class:"input w-full",placeholder:"Contoh: Rekap Jakarta..."},null,512),[[p,j.name]])]),t("div",Xa,[e[82]||(e[82]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Group ID WhatsApp",-1)),d(t("input",{"onUpdate:modelValue":e[28]||(e[28]=a=>j.group_id=a),type:"text",class:"input w-full",placeholder:"xxxx@g.us"},null,512),[[p,j.group_id]])]),t("div",Ya,[q.value?(l(),r("button",{key:0,onClick:mt,class:"btn btn-secondary"},"Batal")):x("",!0),t("button",{onClick:Lt,class:"btn btn-primary whitespace-nowrap"},o(q.value?"Update":"+ Tambah"),1)])])]),t("div",ts,[t("div",es,[t("table",as,[e[84]||(e[84]=t("thead",{class:"bg-gray-50/80 dark:bg-dark-900/60 text-[11px] uppercase font-black tracking-widest text-gray-500 sticky top-0"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Nama Group"),t("th",{class:"px-4 py-3"},"Group ID"),t("th",{class:"px-4 py-3 text-right"},"Aksi")])],-1)),t("tbody",ss,[(l(!0),r(C,null,A(D.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",rs,o(a.name),1),t("td",ls,o(a.group_id),1),t("td",os,[t("button",{onClick:y=>It(a),class:"text-sm font-semibold text-primary-600 hover:text-primary-800"},"Edit",8,ns),t("button",{onClick:y=>Nt(a),class:"text-sm font-semibold text-red-600 hover:text-red-800"},"Hapus",8,ds)])]))),128)),D.value.length===0?(l(),r("tr",is,[...e[83]||(e[83]=[t("td",{colspan:"3",class:"px-4 py-10 text-center text-gray-500 dark:text-gray-400"},"Belum ada group",-1)])])):x("",!0)])])])])])])):x("",!0),m.value==="fee"?(l(),r("div",ps,[e[92]||(e[92]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Konfigurasi Fee Teknisi"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Atur fee instalasi dan kategori pengeluaran.")],-1)),t("div",us,[t("div",gs,[t("div",null,[e[86]||(e[86]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Fee Instalasi - Teknisi (Rp)",-1)),d(t("input",{"onUpdate:modelValue":e[29]||(e[29]=a=>v.teknisi_fee_install=a),type:"number",min:"0",class:"input w-full",placeholder:"0"},null,512),[[p,v.teknisi_fee_install,void 0,{number:!0}]]),e[87]||(e[87]=t("p",{class:"text-xs text-gray-400 mt-1"},"Fee default untuk setiap teknisi per instalasi",-1))]),t("div",null,[e[88]||(e[88]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Fee Instalasi - Sales (Rp)",-1)),d(t("input",{"onUpdate:modelValue":e[30]||(e[30]=a=>v.sales_fee_install=a),type:"number",min:"0",class:"input w-full",placeholder:"0"},null,512),[[p,v.sales_fee_install,void 0,{number:!0}]]),e[89]||(e[89]=t("p",{class:"text-xs text-gray-400 mt-1"},"Fee default untuk setiap sales per instalasi",-1))])]),t("div",xs,[t("div",{class:"flex items-center justify-between gap-3 mb-4"},[e[90]||(e[90]=t("div",null,[t("h5",{class:"text-sm font-black tracking-tight text-gray-900 dark:text-white"},"Kategori Pengeluaran"),t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Dipakai untuk input pengeluaran teknisi.")],-1)),t("button",{onClick:Dt,class:"btn btn-secondary shrink-0"},"+ Tambah")]),v.expense_categories.length>0?(l(),r("div",cs,[(l(!0),r(C,null,A(v.expense_categories,(a,y)=>(l(),r("div",{key:y,class:"flex items-center gap-2"},[d(t("input",{"onUpdate:modelValue":K=>v.expense_categories[y]=K,type:"text",class:"input flex-1",placeholder:`Kategori ${y+1}`},null,8,bs),[[p,v.expense_categories[y]]]),t("button",{onClick:K=>Rt(y),class:"h-10 w-10 rounded-xl border border-gray-200/70 dark:border-white/10 bg-white dark:bg-dark-900 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition",title:"Hapus"}," ✕ ",8,ms)]))),128))])):(l(),r("div",ys,[...e[91]||(e[91]=[U(" Belum ada kategori. Klik ",-1),t("span",{class:"font-semibold"},"Tambah",-1),U(" untuk membuat. ",-1)])]))]),t("div",ks,[t("button",{onClick:Bt,disabled:b.value,class:"btn btn-primary"},o(b.value?"Menyimpan...":"Simpan Konfigurasi"),9,fs)])])])):x("",!0),m.value==="public_url"?(l(),r("div",vs,[e[94]||(e[94]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Link Isolir (URL Publik)"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Link tenant untuk halaman isolir/direct/chat.")],-1)),t("div",ws,[t("div",_s,[t("input",{value:st.value,readonly:"",class:"input flex-1 font-mono text-sm bg-gray-50 dark:bg-gray-800",placeholder:"Belum tersedia"},null,8,hs),t("button",{onClick:Kt,class:"btn btn-primary shrink-0"},"Copy")]),e[93]||(e[93]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bagikan link ini ke pelanggan agar masuk ke halaman isolir/chat.",-1))])])):x("",!0),m.value==="maps"?(l(),r("div",Cs,[e[98]||(e[98]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Google Maps"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"API key untuk modul yang membutuhkan peta (contoh: Kabel FO).")],-1)),t("div",Ts,[t("div",null,[e[95]||(e[95]=t("label",{class:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1"},"Google Maps API Key",-1)),t("div",Ss,[d(t("input",{"onUpdate:modelValue":e[31]||(e[31]=a=>R.google_maps_api_key=a),type:Q.value?"text":"password",class:"input flex-1 font-mono text-sm",placeholder:"AIzaSy...",autocomplete:"off"},null,8,Ps),[[qt,R.google_maps_api_key]]),t("button",{onClick:e[32]||(e[32]=a=>Q.value=!Q.value),class:"btn btn-secondary shrink-0"},o(Q.value?"Hide":"Show"),1)]),e[96]||(e[96]=t("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," Catatan: API key dipakai di browser (bukan rahasia). Tetap wajib dibatasi via HTTP referrer/domain agar aman. ",-1)),e[97]||(e[97]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},[U(" Pastikan API "),t("span",{class:"font-semibold"},"Maps JavaScript API"),U(" aktif di Google Cloud dan billing aktif. ")],-1))]),t("div",Us,[t("button",{onClick:Et,disabled:b.value,class:"btn btn-primary"},o(b.value?"Menyimpan...":"Simpan Google Maps Key"),9,As)])])])):x("",!0),m.value==="logs"?(l(),r("div",Vs,[t("div",Os,[e[104]||(e[104]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Log Notifikasi"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Monitoring status pengiriman notifikasi (WA/Telegram).")],-1)),t("div",$s,[t("div",Gs,[t("div",js,[t("div",Ms,o(X.value.total),1),e[99]||(e[99]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Total",-1))]),t("div",Is,[t("div",Ls,o(X.value.sent),1),e[100]||(e[100]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Terkirim",-1))]),t("div",Ns,[t("div",Ds,o(X.value.failed),1),e[101]||(e[101]=t("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Gagal",-1))])]),t("div",Rs,[t("div",Bs,[d(t("select",{"onUpdate:modelValue":e[33]||(e[33]=a=>w.range=a),onChange:P,class:"input text-sm !rounded-xl"},[...e[102]||(e[102]=[t("option",{value:""},"All Time",-1),t("option",{value:"24h"},"24 Jam",-1),t("option",{value:"7d"},"7 Hari",-1),t("option",{value:"30d"},"30 Hari",-1)])],544),[[dt,w.range]]),d(t("select",{"onUpdate:modelValue":e[34]||(e[34]=a=>w.status=a),onChange:P,class:"input text-sm !rounded-xl"},[...e[103]||(e[103]=[t("option",{value:""},"All Status",-1),t("option",{value:"success"},"Success",-1),t("option",{value:"failed"},"Failed",-1)])],544),[[dt,w.status]]),d(t("input",{"onUpdate:modelValue":e[35]||(e[35]=a=>w.search=a),onInput:P,type:"text",class:"input text-sm w-56 !rounded-xl",placeholder:"Cari..."},null,544),[[p,w.search]])]),t("button",{onClick:P,class:"btn btn-secondary sm:ml-auto"},"Refresh")])])]),t("div",Es,[t("div",Ks,[t("div",null,[e[105]||(e[105]=t("h3",{class:"text-sm font-black tracking-tight text-gray-900 dark:text-white"},"Daftar Log",-1)),t("p",Fs,"Menampilkan "+o(Z.value.length)+" baris",1)]),t("button",{onClick:P,class:"btn btn-secondary shrink-0"},"Refresh")]),t("div",Ws,[t("table",Js,[e[107]||(e[107]=t("thead",{class:"bg-white/70 dark:bg-dark-950/60 sticky top-0"},[t("tr",{class:"text-[11px] uppercase font-black tracking-widest text-gray-500 dark:text-gray-400"},[t("th",{class:"px-4 py-3 text-left"},"Waktu"),t("th",{class:"px-4 py-3 text-left"},"Platform"),t("th",{class:"px-4 py-3 text-left"},"Target"),t("th",{class:"px-4 py-3 text-left"},"Pesan"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-left"},"Response")])],-1)),t("tbody",Hs,[(l(!0),r(C,null,A(Z.value,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50/80 dark:hover:bg-white/5"},[t("td",zs,o(ot(a.timestamp)),1),t("td",qs,o(a.platform),1),t("td",Qs,o(a.target),1),t("td",Zs,o(a.message),1),t("td",Xs,[t("span",{class:F([nt(a.normalized_status||a.status),"px-2 py-1 text-xs rounded-full font-bold uppercase"])},o(a.normalized_status||a.status),3)]),t("td",Ys,o(a.response_log||"-"),1)]))),128)),Z.value.length===0?(l(),r("tr",tr,[...e[106]||(e[106]=[t("td",{colspan:"6",class:"px-4 py-12 text-center text-gray-500 dark:text-gray-400"},"Tidak ada log",-1)])])):x("",!0)])])])])])):x("",!0),m.value==="system_update"?(l(),r("div",er,[e[108]||(e[108]=t("div",{class:"px-6 py-5 sm:px-8 border-b border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-dark-900/40 backdrop-blur"},[t("h2",{class:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 dark:text-white"},"Update Sistem"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Update panel via ZIP atau paket build dari GitHub.")],-1)),t("div",ar,[O(Xt,{embedded:""})])])):x("",!0)])]))]),G.value?(l(),r("div",sr,[t("div",rr,[t("div",{class:"fixed inset-0 bg-gray-500/75 dark:bg-gray-900/80",onClick:e[36]||(e[36]=a=>G.value=!1)}),t("div",lr,[t("div",or,[t("h3",nr,o(H.value?"Edit Template":"Tambah Template"),1),t("button",{onClick:e[37]||(e[37]=a=>G.value=!1),class:"text-gray-400 hover:text-gray-500"},"✕")]),t("form",{onSubmit:Qt(Vt,["prevent"]),class:"p-6 space-y-4"},[t("div",null,[e[109]||(e[109]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kode Template *",-1)),d(t("input",{"onUpdate:modelValue":e[38]||(e[38]=a=>h.code=a),type:"text",required:"",class:"input w-full",disabled:!!H.value,placeholder:"web_welcome"},null,8,dr),[[p,h.code]])]),t("div",null,[e[110]||(e[110]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Konten *",-1)),d(t("textarea",{"onUpdate:modelValue":e[39]||(e[39]=a=>h.message=a),rows:"5",required:"",class:"input w-full",placeholder:"Tulis template..."},null,512),[[p,h.message]])]),at.value.length>0?(l(),r("div",ir,[e[113]||(e[113]=t("p",{class:"text-xs text-gray-500 font-bold uppercase mb-2"},"Klik untuk insert variable:",-1)),t("div",pr,[(l(!0),r(C,null,A(at.value,a=>(l(),r("button",{key:a,type:"button",onClick:y=>$t(a),class:"px-2 py-1 text-xs bg-white dark:bg-gray-800 border dark:border-gray-600 rounded hover:bg-blue-100 dark:hover:bg-blue-900 transition"},[e[111]||(e[111]=U(" {",-1)),t("span",null,o(a),1),e[112]||(e[112]=U("} ",-1))],8,ur))),128))])])):x("",!0),t("div",gr,[t("button",{type:"button",onClick:e[40]||(e[40]=a=>G.value=!1),class:"btn btn-secondary"},"Batal"),e[114]||(e[114]=t("button",{type:"submit",class:"btn btn-primary"},"Simpan",-1))])],32)])])])):x("",!0)]}),_:1})],64))}};export{vr as default};
